<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>All Posts - üìö | Dev Blog</title>
        <link>https://jaeyeonme.github.io/posts/</link>
        <description>All Posts | üìö | Dev Blog</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sat, 01 Jan 2022 10:00:00 &#43;0000</lastBuildDate><atom:link href="https://jaeyeonme.github.io/posts/" rel="self" type="application/rss+xml" /><item>
    <title>Spring Data JPAÍ∞Ä Ï†úÍ≥µÌïòÎäî QueryDSL</title>
    <link>https://jaeyeonme.github.io/posts/spring-data-jpa-with-querydsl/</link>
    <pubDate>Sat, 01 Jan 2022 10:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/spring-data-jpa-with-querydsl/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/querydsl.png" referrerpolicy="no-referrer">
            </div>1. Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏßÄÏõê - QuerydslPredicateExecutor  Í≥µÏãù URL : https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl  QuerydslPredicateExecutor Ïù∏ÌÑ∞ÌéòÏù¥Ïä§
public interface QuerydslPredicateExecutor&lt;T&gt; { Optional&lt;T&gt; findById(Predicate predicate); Iterable&lt;T&gt; findAll(Predicate predicate); long count(Predicate predicate); boolean exists(Predicate predicate); // ‚Ä¶ more functionality omitted.  } 
Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Ïóê Ï†ÅÏö©
interface MemberRepository extends JpaRepository&lt;User, Long&gt;, QuerydslPredicateExecutor&lt;User&gt; { } Iterable result = memberRepository.findAll( member.age.between(10, 40) .and(member.username.eq(&#34;member1&#34;)) ); 
ÌïúÍ≥ÑÏ†ê
 Ï°∞Ïù∏X (Î¨µÏãúÏ†Å Ï°∞Ïù∏ÏùÄ Í∞ÄÎä•ÌïòÏßÄÎßå left joinÏù¥ Î∂àÍ∞ÄÎä•ÌïòÎã§) ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Í∞Ä QuerydslÏóê ÏùòÏ°¥Ìï¥Ïïº ÌïúÎã§. ÏÑúÎπÑÏä§ ÌÅ¥ÎûòÏä§Í∞Ä Querydsl Ïù¥ÎùºÎäî Íµ¨ÌòÑ Í∏∞Ïà†Ïóê ÏùòÏ°¥Ìï¥Ïïº ÌïúÎã§. Î≥µÏû°Ìïú Ïã§Î¨¥ÌôòÍ≤ΩÏóêÏÑú ÏÇ¨Ïö©ÌïòÍ∏∞ÏóêÎäî ÌïúÍ≥ÑÍ∞Ä Î™ÖÌôïÌïòÎã§.  Ï∞∏Í≥†: QuerydslPredicateExecutor Îäî Pageable, SortÎ•º Î™®Îëê ÏßÄÏõêÌïòÍ≥† Ï†ïÏÉÅ ÎèôÏûëÌïúÎã§.
2. Querydsl Web ÏßÄÏõê  Í≥µÏãù URL : https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.web.type-safe  ÌïúÍ≥ÑÏ†ê
 Îã®ÏàúÌïú Ï°∞Í±¥Îßå Í∞ÄÎä• Ï°∞Í±¥ÏùÑ Ïª§Ïä§ÌÖÄÌïòÎäî Í∏∞Îä•Ïù¥ Î≥µÏû°ÌïòÍ≥† Î™ÖÏãúÏ†ÅÏù¥ÏßÄ ÏïäÏùå Ïª®Ìä∏Î°§Îü¨Í∞Ä QuerydslÏóê ÏùòÏ°¥ Î≥µÏû°Ìïú Ïã§Î¨¥ÌôòÍ≤ΩÏóêÏÑú ÏÇ¨Ïö©ÌïòÍ∏∞ÏóêÎäî ÌïúÍ≥ÑÍ∞Ä Î™ÖÌôï  3. Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ ÏßÄÏõê - QuerydslRepositorySupport QuerydslRepositorySupport
Ïû•Ï†ê
 getQuerydsl().applyPagination() Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞Í∞Ä Ï†úÍ≥µÌïòÎäî ÌéòÏù¥ÏßïÏùÑ QuerydslÎ°ú Ìé∏Î¶¨ÌïòÍ≤å Î≥ÄÌôò Í∞ÄÎä•(Îã®! SortÎäî Ïò§Î•òÎ∞úÏÉù) from() ÏúºÎ°ú ÏãúÏûë Í∞ÄÎä•(ÏµúÍ∑ºÏóêÎäî QueryFactoryÎ•º ÏÇ¨Ïö©Ìï¥ÏÑú select() Î°ú ÏãúÏûëÌïòÎäî Í≤ÉÏù¥ Îçî Î™ÖÏãúÏ†Å) EntityManager Ï†úÍ≥µ  ÌïúÍ≥Ñ
 Querydsl 3.x Î≤ÑÏ†ÑÏùÑ ÎåÄÏÉÅÏúºÎ°ú ÎßåÎì¨ Querydsl 4.x Ïóê ÎÇòÏò® JPAQueryFactoryÎ°ú ÏãúÏûëÌï† Ïàò ÏóÜÏùå  selectÎ°ú ÏãúÏûëÌï† Ïàò ÏóÜÏùå (fromÏúºÎ°ú ÏãúÏûëÌï¥Ïïº Ìï®)   QueryFactory Î•º Ï†úÍ≥µÌïòÏßÄ ÏïäÏùå Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ Sort Í∏∞Îä•Ïù¥ Ï†ïÏÉÅ ÎèôÏûëÌïòÏßÄ ÏïäÏùå  4. Querydsl ÏßÄÏõê ÌÅ¥ÎûòÏä§ ÏßÅÏ†ë ÎßåÎì§Í∏∞ Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞Í∞Ä Ï†úÍ≥µÌïòÎäî QuerydslRepositorySupport Í∞Ä ÏßÄÎãå ÌïúÍ≥ÑÎ•º Í∑πÎ≥µÌïòÍ∏∞ ÏúÑÌï¥ ÏßÅÏ†ë QueryDSL ÏßÄÏõê ÌÅ¥ÎûòÏä§Î•¥ ÎßåÎì§Ïñ¥Î≥¥Ïûê.
Ïû•Ï†ê
 Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞Í∞Ä Ï†úÍ≥µÌïòÎäî ÌéòÏù¥ÏßïÏùÑ Ìé∏Î¶¨ÌïòÍ≤å Î≥ÄÌôò ÌéòÏù¥ÏßïÍ≥º Ïπ¥Ïö¥Ìä∏ ÏøºÎ¶¨ Î∂ÑÎ¶¨ Í∞ÄÎä• Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ Sort ÏßÄÏõê select() , selectFrom() ÏúºÎ°ú ÏãúÏûë Í∞ÄÎä• EntityManager , QueryFactory Ï†úÍ≥µ  Querydsl4RepositorySupport /** * Querydsl 4.x Î≤ÑÏ†ÑÏóê ÎßûÏ∂ò Querydsl ÏßÄÏõê ÎùºÏù¥Î∏åÎü¨Î¶¨ * * @author Yonghan Kim * org.springframework.data.jpa.repository.support.QuerydslRepositorySupport */ @Repository public abstract class Querydsl4RepositorySupport { private final Class domainClass; private Querydsl querydsl; private EntityManager entityManager; private JPAQueryFactory queryFactory; public Querydsl4RepositorySupport(Class&lt;?&gt; domainClass) { Assert.notNull(domainClass, &#34;Domain class must not be null!&#34;); this.domainClass = domainClass; } @Autowired public void setEntityManager(EntityManager entityManager) { Assert.notNull(entityManager, &#34;EntityManager must not be null!&#34;); JpaEntityInformation entityInformation = JpaEntityInformationSupport.getEntityInformation(domainClass, entityManager); SimpleEntityPathResolver resolver = SimpleEntityPathResolver.INSTANCE; EntityPath path = resolver.createPath(entityInformation.getJavaType()); this.entityManager = entityManager; this.querydsl = new Querydsl(entityManager, new PathBuilder&lt;&gt;(path.getType(), path.getMetadata())); this.queryFactory = new JPAQueryFactory(entityManager); } @PostConstruct public void validate() { Assert.notNull(entityManager, &#34;EntityManager must not be null!&#34;); Assert.notNull(querydsl, &#34;Querydsl must not be null!&#34;); Assert.notNull(queryFactory, &#34;QueryFactory must not be null!&#34;); } protected JPAQueryFactory getQueryFactory() { return queryFactory; } protected Querydsl getQuerydsl() { return querydsl; } protected EntityManager getEntityManager() { return entityManager; } protected &lt;T&gt; JPAQuery&lt;T&gt; select(Expression&lt;T&gt; expr) { return getQueryFactory().select(expr); } protected &lt;T&gt; JPAQuery&lt;T&gt; selectFrom(EntityPath&lt;T&gt; from) { return getQueryFactory().selectFrom(from); } protected &lt;T&gt; Page&lt;T&gt; applyPagination(Pageable pageable, Function&lt;JPAQueryFactory, JPAQuery&gt; contentQuery) { JPAQuery jpaQuery = contentQuery.apply(getQueryFactory()); List&lt;T&gt; content = getQuerydsl().applyPagination(pageable, jpaQuery).fetch(); return PageableExecutionUtils.getPage(content, pageable, jpaQuery::fetchCount); } protected &lt;T&gt; Page&lt;T&gt; applyPagination(Pageable pageable, Function&lt;JPAQueryFactory, JPAQuery&gt; contentQuery, Function&lt;JPAQueryFactory, JPAQuery&gt; countQuery) { JPAQuery jpaContentQuery = contentQuery.apply(getQueryFactory()); List&lt;T&gt; content = getQuerydsl().applyPagination(pageable, jpaContentQuery).fetch(); JPAQuery countResult = countQuery.apply(getQueryFactory()); return PageableExecutionUtils.getPage(content, pageable, countResult::fetchCount); } } 
Querydsl4RepositorySupport ÏÇ¨Ïö© ÏΩîÎìú @Repository public class MemberTestRepository extends Querydsl4RepositorySupport { public MemberTestRepository() { super(Member.class); } public List&lt;Member&gt; basicSelect() { return select(member) .from(member) .fetch(); } public List&lt;Member&gt; basicSelectFrom() { return selectFrom(member) .fetch(); } public Page&lt;Member&gt; searchPageByApplyPage(MemberSearchCondition condition, Pageable pageable) { JPAQuery&lt;Member&gt; query = selectFrom(member) .leftJoin(member.team, team) .where(usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ); List&lt;Member&gt; content = getQuerydsl().]]></description>
</item><item>
    <title>Spring Data JPAÏôÄ QueryDSL</title>
    <link>https://jaeyeonme.github.io/posts/spring-data-jpa-and-querydsl/</link>
    <pubDate>Sat, 01 Jan 2022 09:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/spring-data-jpa-and-querydsl/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/querydsl.png" referrerpolicy="no-referrer">
            </div>Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPA Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Î°ú Î≥ÄÍ≤Ω Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPA - MemberRepository ÏÉùÏÑ± package study.querydsl.repository; import org.springframework.data.jpa.repository.JpaRepository; import study.querydsl.entity.Member; import java.util.List; public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { // select m from m where m.username = ?;  List&lt;Member&gt; findByUsername(String username); } 
Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPA ÌÖåÏä§Ìä∏ @Test public void basicTest() throws Exception { Member member = new Member(&#34;member1&#34;, 10); memberRepository.save(member); Member findMember = memberRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result1 = memberRepository.findAll(); assertThat(result1).containsExactly(member); List&lt;Member&gt; result2 = memberRepository.findByUsername(&#34;member1&#34;); assertThat(result2).containsExactly(member); }  QueryDSL Ï†ÑÏö© Í∏∞Îä•Ïù∏ ÌöåÏõê searchÎ•º ÏûëÏÑ±Ìï† ÏàòÏóÜÎã§. ‚Üí ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ ÌïÑÏöî  ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ ÏÇ¨Ïö©Î≤ï
 ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏûëÏÑ± ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Íµ¨ÌòÑ Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Ïóê ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏÉÅÏÜç  ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Íµ¨ÏÑ± 1. ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏûëÏÑ± public interface MemberRepositoryCustom { List&lt;Member&gt; findMemberCustom(); } 
2. ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Íµ¨ÌòÑ public class MemberRepositoryImpl implements MemberRepositoryCustom{ @Override public List&lt;Member&gt; findMemberCustom() { return null; } private final JPAQueryFactory queryFactory; public MemberRepositoryImpl(JPAQueryFactory queryFactory) { this.queryFactory = queryFactory; } @Override public List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition) { return queryFactory .select(new QMemberTeamDto( member.id.as(&#34;memberId&#34;), member.username, member.age, team.id.as(&#34;teamId&#34;), team.name.as(&#34;teamName&#34;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .fetch(); } private BooleanExpression usernameEq(String username) { return isEmpty(username)?null:member.username.eq(username); } private BooleanExpression teamNameEq(String teamName) { return hasText(teamName) ? team.name.eq(teamName):null; } private BooleanExpression ageGoe(Integer ageGoe) { return ageGoe!= null ? member.age.goe(ageGoe):null; } private BooleanExpression ageLoe(Integer ageLoe) { return ageLoe!= null ? member.age.loe(ageLoe):null; } } 
3. Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Ïóê ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏÉÅÏÜç public interface MemberRepository extends JpaRepository&lt;Member, Long&gt;, MemberRepositoryCustom { // select m from Member m where m.username = ?;  List&lt;Member&gt; findByUsername(String username); } 
ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ ÌÖåÏä§Ìä∏ ÏΩîÎìú ÏûëÏÑ± @Test public void searchTest() { Team teamA = new Team(&#34;teamA&#34;); Team teamB = new Team(&#34;teamB&#34;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&#34;member1&#34;, 10, teamA); Member member2 = new Member(&#34;member2&#34;, 20, teamA); Member member3 = new Member(&#34;member3&#34;, 30, teamB); Member member4 = new Member(&#34;member4&#34;, 40, teamB); em.persist(member1); em.persist(member2); em.persist(member3); em.persist(member4); MemberSearchCondition condition = new MemberSearchCondition(); condition.setAgeGoe(35); condition.setAgeLoe(40); condition.setTeamName(&#34;teamB&#34;); List&lt;MemberTeamDto&gt; result = memberRepository.search(condition); assertThat(result).extracting(&#34;username&#34;).containsExactly(&#34;member4&#34;); } 
Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ ÌéòÏù¥Ïßï ÌôúÏö© 1 - Querydsl ÌéòÏù¥Ïßï Ïó∞Îèô  Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞Ïùò Page, PageableÏùÑ ÌôúÏö©Ìï¥Î≥¥Ïûê. Ï†ÑÏ≤¥ Ïπ¥Ïö¥Ìä∏Î•º ÌïúÎ≤àÏóê Ï°∞ÌöåÌïòÎäî Îã®ÏàúÌïú Î∞©Î≤ï Îç∞Ïù¥ÌÑ∞ ÎÇ¥Ïö©Í≥º Ï†ÑÏ≤¥ Ïπ¥Ïö¥Ìä∏Î•º Î≥ÑÎèÑÎ°ú Ï°∞ÌöåÌïòÎäî Î∞©Î≤ï  ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Ïóê ÌéòÏù¥Ïßï 2Í∞ÄÏßÄ Ï∂îÍ∞Ä public interface MemberRepositoryCustom { List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition); Page&lt;MemberTeamDto&gt; searchPageSimple(MemberSearchCondition condition, Pageable pageable); Page&lt;MemberTeamDto&gt; searchPageComplex(MemberSearchCondition condition, Pageable pageable); } 
Ï†ÑÏ≤¥ Ïπ¥Ïö¥Ìä∏Î•º ÌïúÎ≤àÏóê Ï°∞ÌöåÌïòÎäî Îã®ÏàúÌïú Î∞©Î≤ï - searchPageSimple() @Override public Page&lt;MemberTeamDto&gt; searchPageSimple(MemberSearchCondition condition, Pageable pageable) { QueryResults&lt;MemberTeamDto&gt; results = queryFactory .select(new QMemberTeamDto( member.id.as(&#34;memberId&#34;), member.username, member.age, team.id.as(&#34;teamId&#34;), team.name.as(&#34;teamName&#34;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .offset(pageable.getOffset()) // Î™áÎ≤àÏß∏Î∂ÄÌÑ∞ ÏãúÏûëÌï† Í≤ÉÏù∏Í∞Ä  .limit(pageable.getPageSize()) // Î™áÍ∞úÎ•º Í∞ÄÏ†∏Ïò¨ Í≤ÉÏù∏Í∞Ä  .fetchResults(); List&lt;MemberTeamDto&gt; content = results.getResults(); long totalCount = results.getTotal(); return new PageImpl&lt;&gt;(content, pageable, totalCount); }  QuerydslÏù¥ Ï†úÍ≥µÌïòÎäî fetchResults() Î•º ÏÇ¨Ïö©ÌïòÎ©¥ ÎÇ¥Ïö©Í≥º Ï†ÑÏ≤¥ Ïπ¥Ïö¥Ìä∏Î•º ÌïúÎ≤àÏóê Ï°∞ÌöåÌï† Ïàò ÏûàÎã§. (Ïã§Ï†ú ÏøºÎ¶¨Îäî 2Î≤à Ìò∏Ï∂ú) fetchResult() Îäî ÏøºÎ¶¨ Ïπ¥Ïö¥Ìä∏ ÏøºÎ¶¨ Ïã§ÌñâÏãú ÌïÑÏöîÏóÜÎäî order by Îäî Ï†úÍ±∞ÌïúÎã§.  ÌÖåÏä§Ìä∏ ÏΩîÎìú ÏûëÏÑ± @Test public void searchPageSimple() throws Exception { Team teamA = new Team(&#34;teamA&#34;); Team teamB = new Team(&#34;teamB&#34;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&#34;member1&#34;, 10, teamA); Member member2 = new Member(&#34;member2&#34;, 20, teamA); Member member3 = new Member(&#34;member3&#34;, 30, teamB); Member member4 = new Member(&#34;member4&#34;, 40, teamB); em.]]></description>
</item><item>
    <title>JPAÏôÄ QueryDSL</title>
    <link>https://jaeyeonme.github.io/posts/jpa-and-querydsl/</link>
    <pubDate>Fri, 31 Dec 2021 15:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/jpa-and-querydsl/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/querydsl.png" referrerpolicy="no-referrer">
            </div>ÏàúÏàò JPA Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ÏôÄ Querydsl ÏàúÏàò JPA Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ @Repository public class MemberJpaRepository { private final EntityManager em; private final JPAQueryFactory queryFactory; public MemberJpaRepository(EntityManager em) { this.em = em; this.queryFactory = new JPAQueryFactory(em); } public void save(Member member) { em.persist(member); } public Optional&lt;Member&gt; findById(Long id) { Member findMember = em.find(Member.class, id); return Optional.ofNullable(findMember); } public List&lt;Member&gt; findAll() { return em.createQuery(&#34;select m from Member m&#34;, Member.class) .getResultList(); } public List&lt;Member&gt; findAll_Querydsl() { return queryFactory .selectFrom(member) .fetch(); } public List&lt;Member&gt; findByUsername(String username) { return em.createQuery(&#34;select m from Member m where m.username = :username&#34;, Member.class) .setParameter(&#34;username&#34;, username) .getResultList(); } public List&lt;Member&gt; findByUsername_Querydsl(String username) { return queryFactory .selectFrom(member) .where(member.username.eq(username)) .fetch(); } } 
ÏàúÏàò JPA Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ ÌÖåÏä§Ìä∏ @SpringBootTest @Transactional class MemberJpaRepositoryTest { @Autowired EntityManager em; @Autowired MemberJpaRepository memberJpaRepository; @Test public void basicTest() { Member member = new Member(&#34;member1&#34;, 10); memberJpaRepository.save(member); Member findMember = memberJpaRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result1 = memberJpaRepository.findAll_Querydsl(); assertThat(result1).containsExactly(member); List&lt;Member&gt; result2 = memberJpaRepository.findByUsername_Querydsl(&#34;member1&#34;); assertThat(result2).containsExactly(member); } 
ÏàúÏàò JPA Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ - Querydsl Ï∂îÍ∞Ä public List&lt;Member&gt; findAll() { return em.createQuery(&#34;select m from Member m&#34;, Member.class).getResultList(); } public List&lt;Member&gt; findAll_Querydsl() { return queryFactory .selectFrom(member) .fetch(); } public List&lt;Member&gt; findByUsername(String username) { return em.createQuery(&#34;select m from Member m where m.username = :username&#34;, Member.class) .setParameter(&#34;username&#34;, username) .getResultList(); } public List&lt;Member&gt; findByUsername_Querydsl(String username) { return queryFactory .selectFrom(member) .where(member.username.eq(username)) .fetch(); } 
Querydsl ÌÖåÏä§Ìä∏ Ï∂îÍ∞Ä @Test public void basicQuerydslTest() throws Exception{ Member member = new Member(&#34;member1&#34;, 10); memberJpaRepository.save(member); Member findMember = memberJpaRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result1 = memberJpaRepository.findAll_Querydsl(); assertThat(result1).containsExactly(member); List&lt;Member&gt; result2 = memberJpaRepository.findByUsername_Querydsl(&#34;member1&#34;); assertThat(result2).containsExactly(member); } 
JPAQueryFactory Ïä§ÌîÑÎßÅ Îπà Îì±Î°ù Îã§ÏùåÍ≥º Í∞ôÏù¥ JPAQueryFactory Î•º Ïä§ÌîÑÎßÅ ÎπàÏúºÎ°ú Îì±Î°ùÌï¥ÏÑú Ï£ºÏûÖÎ∞õÏïÑ ÏÇ¨Ïö©Ìï¥ÎèÑ ÎêúÎã§.
@Bean JPAQueryFactory jpaQueryFactory(EntityManager em) { return new JPAQueryFactory(em); } 
Ï∞∏Í≥† ÎèôÏãúÏÑ± Î¨∏Ï†úÎäî Í±±Ï†ïÌïòÏßÄ ÏïäÏïÑÎèÑ ÎêúÎã§. Ïó¨Í∏∞ÏÑú Ïä§ÌîÑÎßÅÏù¥ Ï£ºÏûÖÌï¥Ï£ºÎäî ÏóîÌã∞Ìã∞Îß§ÎãàÏ†Ä(em)Îäî Ïã§Ï†ú ÎèôÏûë ÏãúÏ†êÏóê ÏßÑÏßú ÏóîÌã∞Ìã∞ Îß§ÎãàÏ†ÄÎ•º Ï∞æÏïÑÏ£ºÎäî ÌîÑÎ°ùÏãúÏö© Í∞ÄÏßú ÏóîÌã∞Ìã∞ Îß§ÎãàÏ†ÄÏù¥Îã§. Ïù¥ Í∞ÄÏûê ÏóîÌã∞Ìã∞ Îß§ÎãàÏ†ÄÎäî Ïã§Ï†ú ÏÇ¨Ïö© ÏãúÏ†êÏóê Ìä∏ÎûúÏû≠ÏÖò Îã®ÏúÑÎ°ú Ïã§Ï†ú ÏóîÌã∞Ìã∞ Îß§ÎãàÏ†Ä(ÏòÅÏÜçÏÑ± Ïª®ÌÖçÏä§Ìä∏)Î•º Ìï†ÎãπÌï¥Ï§ÄÎã§.
ÎèôÏ†Å ÏøºÎ¶¨ÏôÄ ÏÑ±Îä• ÏµúÏ†ÅÌôî Ï°∞Ìöå - Builder ÏÇ¨Ïö© MemberTeamDto - Ï°∞Ìöå ÏµúÏ†ÅÌôîÏö© DTO Ï∂îÍ∞Ä @Data public class MemberTeamDto { private Long memberId; private String username; private int age; private Long teamId; private String teamName; @QueryProjection public MemberTeamDto(Long memberId, String username, int age, Long teamId, String teamName) { this.memberId = memberId; this.username = username; this.age = age; this.teamId = teamId; this.teamName = teamName; } }  @QueryProjection ÏùÑ Ï∂îÍ∞ÄÌñàÎã§. QMemberTeamDto Î•º ÏÉùÏÑ±ÌïòÍ∏∞ ÏúÑÌï¥ ./gradlew compileQuerydsl ÏùÑ ÌïúÎ≤à Ïã§ÌñâÌïòÏûê.  Ï∞∏Í≥† @QueryProjection ÏùÑ ÏÇ¨Ïö©ÌïòÎ©¥ Ìï¥Îãπ DTOÍ∞Ä QuerydslÏùÑ ÏùòÏ°¥ÌïòÍ≤å ÎêúÎã§. Ïù¥Îü∞ ÏùòÏ°¥Ïù¥ Ïã´ÏúºÎ©¥, Ìï¥Îãπ Ïï†ÎÖ∏ÌÖåÏù¥ÏÖòÏùÑ Ï†úÍ±∞ÌïòÍ≥†, Proejction.bean(), fields(), constructor() ÏùÑ ÏÇ¨Ïö©ÌïòÎ©¥ ÎêúÎã§.
ÌöåÏõê Í≤ÄÏÉâ Ï°∞Í±¥ (MemberSearchCondition) package study.querydsl.dto; import lombok.Data; @Data public class MemberSearchCondition { // ÌöåÏõêÎ™Ö, ÌåÄÎ™Ö, ÎÇòÏù¥(ageGoe, ageLoe)  private String username; private String teamName; private Integer ageGoe; private Integer ageLoe; }  Ïù¥Î¶ÑÏù¥ ÎÑàÎ¨¥ Í∏∏Î©¥ MemberCond Îì±ÏúºÎ°ú Ï§ÑÏó¨ ÏÇ¨Ïö©Ìï¥ÎèÑ ÎêúÎã§.  BuilderÎ•º ÏÇ¨Ïö©Ìïú ÏòàÏ†ú - searchByBuilder Î©îÏÑúÎìú ÏûëÏÑ± public List&lt;MemberTeamDto&gt; searchByBuilder(MemberSearchCondition condition) { BooleanBuilder builder = new BooleanBuilder(); if (hasText(condition.getUsername())) { builder.and(member.username.eq(condition.getUsername())); } if (hasText(condition.getTeamName())) { builder.and(team.name.eq(condition.getTeamName())); } if (condition.getAgeGoe() != null) { builder.and(member.age.goe(condition.getAgeGoe())); } if (condition.getAgeLoe() != null) { builder.and(member.age.loe(condition.getAgeLoe())); } return queryFactory .select(new QMemberTeamDto( member.id.as(&#34;memberId&#34;), member.username, member.age, team.id.as(&#34;teamId&#34;), team.name.as(&#34;teamName&#34;) )) .from(member) .leftJoin(member.team, team) .where(builder) .fetch(); }]]></description>
</item><item>
    <title>QueryDSL Ï§ëÍ∏â Î¨∏Î≤ï</title>
    <link>https://jaeyeonme.github.io/posts/querydsl-intermediate-grammer/</link>
    <pubDate>Fri, 31 Dec 2021 13:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/querydsl-intermediate-grammer/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/querydsl.png" referrerpolicy="no-referrer">
            </div>ÌîÑÎ°úÏ†ùÏÖòÍ≥º Í≤∞Í≥º Î∞òÌôò - Í∏∞Î≥∏ ÌîÑÎ°úÏ†ùÏÖò : select ÎåÄÏÉÅ ÏßÄÏ†ï
ÌîÑÎ°úÏ†ùÏÖò ÎåÄÏÉÅÏù¥ ÌïòÎÇò
List&lt;String&gt; result = queryFactory .select(member.username) .from(member) .fetch();  ÌîÑÎ°úÏ†ùÏÖò ÎåÄÏÉÅÏù¥ ÌïòÎÇòÎ©¥ ÌÉÄÏûÖÏùÑ Î™ÖÌôïÌïòÍ≤å ÏßÄÏ†ïÌï† Ïàò ÏûàÏùå(List&lt;String&gt;) ÌîÑÎ°úÏ†ùÏÖò ÎåÄÏÉÅÏù¥ Îëò Ïù¥ÏÉÅÏù¥Î©¥ ÌäúÌîåÏù¥ÎÇò DTOÎ°ú Ï°∞Ìöå  ÌäúÌîå Ï°∞Ìöå ÌîÑÎ°úÏ†ùÏÖò ÎåÄÏÉÅÏù¥ Îëò Ïù¥ÏÉÅÏùº Îïå ÏÇ¨Ïö©
com.querydsl.core.Tuple
List&lt;Tuple&gt; result = queryFactory .select(member.username, member.age) .from(member) .fetch(); for (Tuple tuple : result) { String username = tuple.get(member.username); Integer age = tuple.get(member.age); System.out.println(&#34;username = &#34; + username); System.out.println(&#34;age = &#34; + age); }  Tuple ÏùÄ Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Í≥ÑÏ∏µÏïàÏóêÏÑú Ïì∞Îäî Ï†ïÎèÑÎäî Í¥úÏ∞ÆÏßÄÎßå Í∑∏ Î∞ñÏùò Í≥ÑÏ∏µÏóêÏÑúÎäî DTOÎ°ú Î≥ÄÌôòÌï¥ÏÑú Ïì∞Îäî Í≤ÉÏù¥ Ï¢ãÎã§. ‚Üí Tuple ÎèÑ Í≤∞Íµ≠ QuerydslÏóê Ï¢ÖÏÜçÏ†ÅÏù¥Í∏∞ ÎñÑÎ¨∏  ÌîÑÎ°úÏ†ùÏÖòÍ≥º Í≤∞Í≥º Î∞òÌôò - DTO Ï°∞Ìöå ÏàúÏàò JPAÏóêÏÑú DTO Ï°∞Ìöå ÏúÑÏóêÏÑú select Ï†àÏóêÏÑú ÎåÄÏÉÅÏùÑ ÏßÄÏ†ï(ÌîÑÎ°úÏ†ùÏÖò)Ìï¥ÏÑú Í∞ÄÏ†∏Ïò§Í≥† Ïã∂ÏùÑÎïå Í∑∏ ÎåÄÏÉÅÏù¥ Îëò Ïù¥ÏÉÅÏù¥Î©¥ TupleÎ°ú Í∞ÄÏ†∏ÏôîÏóàÎã§. ÌïòÏßÄÎßå, Í∑∏ Ïô∏ Í≥ÑÏ∏µÏúºÎ°ú Í∞ÄÏ†∏Í∞à ÎïåÎäî DTOÎ°ú Í∞ÄÏ†∏Í∞ÄÎäîÍ≤å Ï¢ãÎã§. Ïö∞ÏÑ† ÏàúÏàò JPAÎ•º Ïù¥Ïö©Ìï¥ÏÑú DTOÎ°ú Ï°∞ÌöåÌïòÎäî ÏΩîÎìúÎ•º ÏûëÏÑ±Ìï¥Î≥¥Ïûê.
MemberDto
@Data @NoArgsConstructor public class MemberDto { private String username; private int age; public MemberDto(String username, int age) { this.username = username; this.age = age; } } 
ÏàúÏàò JPAÏóêÏÑú DTO Ï°∞Ìöå ÏΩîÎìú
@Test public void findDtoByJPQL() { List&lt;MemberDto&gt; result = em.createQuery(&#34;select new study.querydsl.dto.MemberDto(m.username, m.age) from Member m&#34;, MemberDto.class) .getResultList(); for (MemberDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } }  ÏàúÏàò JPAÏóêÏÑú DTOÎ•º Ï°∞ÌöåÌï† ÎïåÎäî new Î™ÖÎ†πÏñ¥Î•º ÏÇ¨Ïö©Ìï¥Ïïº Ìï® DTOÏùò packageÏù¥Î¶ÑÏùÑ Îã§ Ï†ÅÏñ¥Ï§òÏïºÌï¥ÏÑú ÏßÄÏ†ÄÎ∂ÑÌï® ÏÉùÏÑ±Ïûê Î∞©ÏãùÎßå ÏßÄÏõêÌï®  QueryDSL Îπà ÏÉùÏÑ± (Bean Population) Í≤∞Í≥ºÎ•º DTOÎ∞òÌôòÌï† ÎñÑ ÏÇ¨Ïö©ÌïòÎ©∞ 3Í∞ÄÏßÄ Î∞©Î≤ïÏù¥ Ï°¥Ïû¨ÌïúÎã§.
 ÌîÑÎ°úÌçºÌã∞ Ï†ëÍ∑º ÌïÑÎìú ÏßÅÏ†ë Ï†ëÍ∑º ÏÉùÏÑ±Ïûê ÏÇ¨Ïö©  ÌîÑÎ°úÌçºÌã∞ Ï†ëÍ∑º - Setter
@Test public void findDtoBySetter() { List&lt;MemberDto&gt; result = queryFactory .select(Projections.bean(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } }  Projections.bean(Ï£ºÏûÖÎåÄÏÉÅÌÅ¥ÎûòÏä§, ÌîÑÎ°úÌçºÌã∞1, ÌîÑÎ°úÌçºÌã∞2&hellip;)Î∞©ÏãùÏúºÎ°ú ÌîÑÎ°úÌçºÌã∞Ïóê Í∞íÏùÑ Ï£ºÏûÖ  ÌïÑÎìú ÏßÅÏ†ë Ï†ëÍ∑º
@Test public void findDtoByField() { List&lt;MemberDto&gt; result = queryFactory .select(Projections.fields(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } }  Getter, SetterÍ∞Ä ÏóÜÏñ¥ÎèÑ ÌïÑÎìúÏóê Î∞îÎ°ú Í∞íÏùÑ Ï£ºÏûÖ Projections.fields(Ï£ºÏûÖÎåÄÏÉÅÌÅ¥ÎûòÏä§, ÌïÑÎìú1, ÌïÑÎìú2&hellip;)  ÌïÑÎìú ÏßÅÏ†ë Ï†ëÍ∑º - Î≥ÑÏπ≠Ïù¥ Îã§Î•º Îïå
@Test public void findUserDtoByField() throws Exception { QMember memberSub = new QMember(&#34;memberSub&#34;); List&lt;UserDto&gt; result = queryFactory .select(Projections.fields(UserDto.class, member.username.as(&#34;name&#34;), ExpressionUtils.as(JPAExpressions .select(memberSub.age.max()) .from(memberSub), &#34;age&#34;) )) .from(member) .fetch(); for (UserDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } }  ÌïÑÎìúÎÇò ÌîÑÎ°úÌçºÌã∞Î™Ö Ï†ëÍ∑º ÏÉùÏÑ±Î∞©ÏãùÏóêÏÑú Ïù¥Î¶ÑÏù¥ Îã§Î•º Îïå Ìï¥Í≤∞Î∞©ÏïàÏùÑ as(name)ÏùÑ Ïù¥Ïö©Ìï¥ÏÑú Ìï¥Í≤∞ÌïúÎã§. ExpressionUtils.as(source,alias) : ÌïÑÎìúÎÇò ÏÑúÎ∏å ÏøºÎ¶¨Ïóê Î≥ÑÏπ≠ Ï†ÅÏö© username.as(&quot;memberName&quot;) : ÌïÑÎìúÏóê Î≥ÑÏπ≠ Ï†ÅÏö©  ÏÉùÏÑ±Ïûê Ï†ÅÏö©
@Test public void findDtoByConstructor() { List&lt;MemberDto&gt; result = queryFactory .select(Projections.constructor(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } } 
ÌîÑÎ°úÏ†ùÏÖòÍ≥º Í≤∞Í≥º Î∞òÌôò - @QueryProjection ÌîÑÎ°úÏ†ùÏÖòÍ≤∞Í≥ºÎ•º Î∞òÌôòÌï† DTOÏóê @QueryProjection ÏùÑ ÏÉùÏÑ±ÏûêÏóê Î∂ôÌòÄÏ§Ä Îí§ gradle ‚Üí tasks ‚Üí other ‚Üí compileQuerydsl ÏùÑ ÌÜµÌï¥ DTOÎèÑ QÌÉÄÏûÖÏúºÎ°ú ÏÉùÏÑ±Ìï¥ Ï§ÄÎã§.
ÏÉùÏÑ±Ïûê + @QueryProjection @Data @NoArgsConstructor public class MemberDto { private String username; private int age; @QueryProjection public MemberDto(String username, int age) { this.username = username; this.age = age; } }  ./gradlew compileQuerydsl QMemberDto ÏÉùÏÑ± ÌôïÏù∏  @QueryProjection ÌôúÏö© @Test public void findDtoByQueryProjection() throws Exception{ List&lt;MemberDto&gt; result = queryFactory .]]></description>
</item><item>
    <title>QueryDSL Í∏∞Î≥∏ Î¨∏Î≤ï</title>
    <link>https://jaeyeonme.github.io/posts/querydsl-basic-grammer/</link>
    <pubDate>Fri, 31 Dec 2021 12:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/querydsl-basic-grammer/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/querydsl.png" referrerpolicy="no-referrer">
            </div>JPQL VS QueryDSL QueryDSL vs JPQL @Test public void startJQPL() { // member1ÏùÑ Ï∞æÏïÑÎùº  String qlString = &#34;select m from Member m &#34; + &#34;where m.username = :username&#34;; Member findMember = em.createQuery(qlString, Member.class) .setParameter(&#34;username&#34;, &#34;member1&#34;) .getSingleResult(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } @Test public void startQuerydsl() { // member1ÏùÑ Ï∞æÏïÑÎùº.  JPAQueryFactory queryFactory = new JPAQueryFactory(em); QMember m = new QMember(&#34;m&#34;); Member findMember = queryFactory .select(m) .from(m) .where(m.username.eq(&#34;member1&#34;)) // ÌååÎùºÎØ∏ÌÑ∞ Î∞îÏù∏Îî© Ï≤òÎ¶¨  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  EntityManager Î°ú JPAQueryFactory ÏÉùÏÑ± QuerydslÏùÄ JPQL ÎπåÎçî JPQL : Î¨∏Ïûê(Ïã§Ìñâ ÏãúÏ†ê Ïò§Î•ò), Querydsl : ÏΩîÎìú(Ïª¥ÌååÏùº ÏãúÏ†ê Ïò§Î•ò) JPQL : ÌååÎùºÎØ∏ÌÑ∞ Î∞îÏù∏Îî© ÏßÅÏ†ë, Querydsl : ÌååÎùºÎØ∏ÌÑ∞ Î∞îÏù∏Îî© ÏûêÎèô Ï≤òÎ¶¨  JPAQueryFactoryÎ•º ÌïÑÎìúÎ°ú @SpringBootTest @Transactional public class QuerydslBasicTest { @Autowired EntityManager em; JPAQueryFactory queryFactory; @BeforeEach public void before() { queryFactory = new JPAQueryFactory(em); // ... 	} @Test public void startQuerydsl() { // member1ÏùÑ Ï∞æÏïÑÎùº.  QMember m = new QMember(&#34;m&#34;); Member findMember = queryFactory .select(m) .from(m) .where(m.username.eq(&#34;member1&#34;)) // ÌååÎùºÎØ∏ÌÑ∞ Î∞îÏù∏Îî© Ï≤òÎ¶¨  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } }  JPAQueryFactoryÎ•º ÌïÑÎìúÎ°ú Ï†úÍ≥µÌïòÎ©¥ ÎèôÏãúÏÑ± Î¨∏Ï†úÎäî Ïñ¥ÎñªÍ≤å Îê†Íπå? ÎèôÏãúÏÑ± Î¨∏Ï†úÎäî JPAQueryFactoryÎ•º ÏÉùÏÑ±Ìï† Îïå Ï†úÍ≥µÌïòÎäî EntityManager(em)Ïóê Îã¨Î†§ÏûàÎã§. Ïä§ÌîÑÎßÅ ÌîÑÎ†àÏûÑÏõåÌÅ¨Îäî Ïó¨Îü¨ Ïì∞Î†àÎìúÏóêÏÑú ÎèôÏãúÏóê Í∞ôÏùÄ EntityManagerÏóê Ï†ëÍ∑ºÌï¥ÎèÑ, Ìä∏ÎûúÏû≠ÏÖò ÎßàÎã§ Î≥ÑÎèÑÏùò ÏòÅÏÜçÏÑ± Ïª®ÌÖçÏä§Ìä∏Î•º Ï†úÍ≥µÌïòÍ∏∞ ÎïåÎ¨∏Ïóê, ÎèôÏãúÏÑ± Î¨∏Ï†úÎäî Í±±Ï†ïÌïòÏßÄ ÏïäÏïÑÎèÑ ÎêúÎã§.  Í∏∞Î≥∏ Q-Type ÌôúÏö© QÌÅ¥ÎûòÏä§ Ïù∏Ïä§ÌÑ¥Ïä§Î•º ÏÇ¨Ïö©ÌïòÎäî 2Í∞ÄÏßÄ Î∞©Î≤ï QMember qMember = new QMember(&#34;m&#34;); //Î≥ÑÏπ≠ ÏßÅÏ†ë ÏßÄÏ†ï QMember qMember = QMember.member; //Í∏∞Î≥∏ Ïù∏Ïä§ÌÑ¥Ïä§ ÏÇ¨Ïö© 
Í∏∞Î≥∏ Ïù∏Ïä§ÌÑ¥Ïä§Î•º static importÏôÄ Ìï®Íªò ÏÇ¨Ïö© @Test public void startQuerydsl() { Member findMember = queryFactory .select(QMember.member) .from(QMember.member) .where(QMember.member.username.eq(&#34;member1&#34;)) // ÌååÎùºÎØ∏ÌÑ∞ Î∞îÏù∏Îî© Ï≤òÎ¶¨  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } 
Îã§Ïùå ÏÑ§Ï†ïÏùÑ Ï∂îÍ∞ÄÌïòÎ©¥ Ïã§ÌñâÎêòÎäî JPQLÏùÑ Î≥º Ïàò ÏûàÎã§.
spring.jpa.properties.hibernate.use_sql_comments: true 
Ï∞∏Í≥†: Í∞ôÏùÄ ÌÖåÏù¥Î∏îÏùÑ Ï°∞Ïù∏Ìï¥Ïïº ÌïòÎäî Í≤ΩÏö∞Í∞Ä ÏïÑÎãàÎ©¥ Í∏∞Î≥∏ Ïù∏Ïä§ÌÑ¥Ïä§Î•º ÏÇ¨Ïö©ÌïòÏûê
Í≤ÄÏÉâ Ï°∞Í±¥ ÏøºÎ¶¨ Í∏∞Î≥∏ Í≤ÄÏÉâ ÏøºÎ¶¨ @Test public void search() { Member findMember = queryFactory .selectFrom(member) .where(member.username.eq(&#34;member1&#34;) .and(member.age.eq(10))) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  Í≤ÄÏÉâ Ï°∞Í±¥ÏùÄ .and() , .or() Î•º Î©îÏÑúÎìú Ï≤¥Ïù∏ÏúºÎ°ú Ïó∞Í≤∞Ìï† Ïàò ÏûàÎã§. select ÏôÄ from ÏùÄ selectFrom ÏúºÎ°ú Ìï©Ïπ† Ïàò ÏûàÎã§.  JPQLÏù¥ Ï†úÍ≥µÌïòÎäî Î™®Îì† Í≤ÄÏÉâ Ï°∞Í±¥ Ï†úÍ≥µ member.username.eq(&#34;member1&#34;) // username = &#39;member1&#39; member.username.ne(&#34;member1&#34;) //username != &#39;member1&#39; member.username.eq(&#34;member1&#34;).not() // username != &#39;member1&#39;  member.username.isNotNull() //Ïù¥Î¶ÑÏù¥ is not null  member.age.in(10, 20) // age in (10,20) member.age.notIn(10, 20) // age not in (10, 20) member.age.between(10,30) // between 10, 30  member.age.goe(30) // age &gt;= 30 member.age.gt(30) // age &gt; 30 member.age.loe(30) // age &lt;= 30 member.age.lt(30) // age &lt; 30  member.username.like(&#34;member%&#34;) // like Í≤ÄÏÉâ member.username.contains(&#34;member&#34;) // like ‚Äò%member%‚Äô Í≤ÄÏÉâ member.username.startsWith(&#34;member&#34;) // like ‚Äòmember%‚Äô Í≤ÄÏÉâ 
AND Ï°∞Í±¥ÏùÑ ÌååÎùºÎØ∏ÌÑ∞Î°ú Ï≤òÎ¶¨ @Test public void searchAndParam() { Member findMember = queryFactory .selectFrom(member) .where( member.username.eq(&#34;member1&#34;), member.age.eq(10)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  where() Ïóê ÌååÎùºÎØ∏ÌÑ∞Î°ú Ï°∞Í±¥Í≤ÄÏÉâÏùÑ Ï∂îÍ∞ÄÌïòÎ©¥ AND Ï°∞Í±¥Ïù¥ Ï∂îÍ∞ÄÎê® Ïù¥ Í≤ΩÏö∞ null Í∞íÏùÄ Î¨¥Ïãú ‚Üí Î©îÏÑúÎìú Ï∂îÏ∂úÏùÑ ÌôúÏö©Ìï¥ÏÑú ÎèôÏ†Å ÏøºÎ¶¨Î•º ÍπîÎÅîÌïòÍ≤å ÎßåÎì§ Ïàò ÏûàÏùå ‚Üí Îí§ÏóêÏÑú ÏÑ§Î™Ö  Í≤∞Í≥º Ï°∞Ìöå  fetch() : Î¶¨Ïä§Ìä∏ Ï°∞Ìöå, Îç∞Ïù¥ÌÑ∞ ÏóÜÏúºÎ©¥ Îπà Î¶¨Ïä§Ìä∏ Î∞òÌôò fetchOne() : Îã® Í±¥ Ï°∞Ìöå  Í≤∞Í≥ºÍ∞Ä ÏóÜÏúºÎ©¥ : null Í≤∞Í≥ºÍ∞Ä Îëò Ïù¥ÏÉÅÏù¥Î©¥ : com.querydsl.core.NonUniqueResultException   fetchFirst() : limit(1).fetchOne() fetchResults() : ÌéòÏù¥Ïßï Ï†ïÎ≥¥ Ìè¨Ìï®, total count ÏøºÎ¶¨ Ï∂îÍ∞Ä Ïã§Ìñâ fetchCount() : count ÏøºÎ¶¨Î°ú Î≥ÄÍ≤ΩÌï¥ÏÑú count Ïàò Ï°∞Ìöå  // List List&lt;Member&gt; fetch = queryFactory .selectFrom(member) .]]></description>
</item><item>
    <title>ÌôïÏû• Í∏∞Îä•</title>
    <link>https://jaeyeonme.github.io/posts/spring-data-jpa-extension/</link>
    <pubDate>Fri, 31 Dec 2021 10:30:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/spring-data-jpa-extension/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/spring-data-jpa.png" referrerpolicy="no-referrer">
            </div>1. ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Íµ¨ÌòÑ ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Íµ¨ÌòÑ  Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPA Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Îäî Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Îßå Ï†ïÏùòÌïòÍ≥† Íµ¨ÌòÑÏ≤¥Îäî Ïä§ÌîÑÎßÅÏù¥ ÏûêÎèô ÏÉùÏÑ± Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÍ∞Ä Ï†úÍ≥µÌïòÎäî Ïù∏ÌÑ∞ÌéòÏù¥Î•º ÏßÅÏ†ë Íµ¨ÌòÑÌïòÎ©¥ Íµ¨ÌòÑÌï¥Ïïº ÌïòÎäî Í∏∞Îä•Ïù¥ ÎÑàÎ¨¥ ÎßéÏùå Îã§ÏñëÌïú Ïù¥Ïú†Î°ú Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Ïùò Î©îÏÑúÎìúÎ•º ÏßÅÏ†ë Íµ¨ÌòÑÌïòÍ≥† Ïã∂Îã§Î©¥?  JPA ÏßÅÏ†ë ÏÇ¨Ïö©(EntityManager) Ïä§ÌîÑÎßÅ JDBC Template ÏÇ¨Ïö© MyBatis ÏÇ¨Ïö© Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Ïª§ÎÑ•ÏÖò ÏßÅÏ†ë ÏÇ¨Ïö© Îì±Îì±.. QueryDSL ÏÇ¨Ïö©    ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§
public interface MemberRepositoryCustom { List&lt;Member&gt; findMemberCustom(); } 
ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Íµ¨ÌòÑ ÌÅ¥ÎûòÏä§
@RequiredArgsConstructor public class MemberRepositoryImpl implements MemberRepositoryCustom { private final EntityManager em; @Override public List&lt;Member&gt; findMemberCustom() { return em.createQuery(&#34;select m from Member m&#34;) .getResultList(); } } 
ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏÉÅÏÜç
public interface MemberRepository extends JpaRepository&lt;Member, Long&gt;, MemberRepositoryCustom { } 
ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î©îÏÑúÎìú Ìò∏Ï∂ú ÏΩîÎìú
List&lt;Member&gt; result = memberRepository.findMemberCustom(); 
ÏÇ¨Ïö©Ïûê Ï†ïÏùò Íµ¨ÌòÑ ÌÅ¥ÎûòÏä§
 Í∑úÏπô : Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ïù¥Î¶Ñ + Impl Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÍ∞Ä Ïù∏ÏãùÌï¥ÏÑú Ïä§ÌîÑÎßÅ ÎπàÏúºÎ°ú Îì±Î°ù  Impl ÎåÄÏãú Îã§Î•∏ Ïù¥Î¶ÑÏúºÎ°ú Î≥ÄÍ≤ΩÌïòÍ≥† Ïã∂ÏúºÎ©¥?
XML ÏÑ§Ï†ï
&lt;repositories base-package=&#34;study.datajpa.repository&#34; repository-impl-postfix=&#34;Impl&#34; /&gt; 
JavaConfig ÏÑ§Ï†ï
@EnableJpaRepositories(basePackages = &#34;study.datajpa.repository&#34;, repositoryImplementationPostfix = &#34;Impl&#34;) 
Ï∞∏Í≥† Ïã§Î¨¥ÏóêÏÑúÎäî Ï£ºÎ°ú QueryDSLÏù¥ÎÇò SpringJdbcTemplateÏùÑ Ìï®Íªò ÏÇ¨Ïö©Ìï† Îïå ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Í∏∞Îä• ÏûêÏ£º ÏÇ¨Ïö© Ìï≠ÏÉÅ ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Í∞Ä ÌïÑÏöîÌïú Í≤ÉÏùÄ ÏïÑÎãàÎã§. Í∑∏ÎÉ• ÏûÑÏùòÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Î•º ÎßåÎì§Ïñ¥ÎèÑ ÎêúÎã§.
ÏòàÎ•ºÎì§Ïñ¥ MemberQueryRepositoryÎ•º Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Í∞Ä ÏïÑÎãå ÌÅ¥ÎûòÏä§Î°ú ÎßåÎì§Í≥† Ïä§ÌîÑÎßÅ ÎπàÏúºÎ°ú Îì±Î°ùÌï¥ÏÑú Í∑∏ÎÉ• ÏßÅÏ†ë ÏÇ¨Ïö©Ìï¥ÎèÑ ÎêúÎã§. Î¨ºÎ°† Ïù¥ Í≤ΩÏö∞ Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÏôÄÎäî ÏïÑÎ¨¥Îü∞ Í¥ÄÍ≥Ñ ÏóÜÏù¥ Î≥ÑÎèÑÎ°ú ÎèôÏûëÌïúÎã§.
ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Íµ¨ÌòÑ ÏµúÏã† Î∞©Ïãù Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ 2.x Î∂ÄÌÑ∞Îäî ÏÇ¨Ïö©Ïûê Ï†ïÏùò Íµ¨ÌòÑ ÌÅ¥ÎûòÏä§Ïóê Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ïù¥Î¶Ñ + Impl ÏùÑ Ï†ÅÏö©ÌïòÎäî ÎåÄÏã†Ïóê ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Î™Ö + Impl Î∞©ÏãùÎèÑ ÏßÄÏõêÌïúÎã§.
ÏòàÎ•º Îì§Ïñ¥ ÏúÑ ÏòàÏ†úÏùò MemberRepositoryImpl ÎåÄÏã†Ïóê MemberRepositoryCustomImpl Í∞ôÏù¥ Íµ¨ÌòÑÌï¥ÎèÑ ÎêúÎã§.
ÏµúÏã† ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Íµ¨ÌòÑ ÌÅ¥ÎûòÏä§ ÏòàÏ†ú
@RequiredArgsConstructor public class MemberRepositoryCustomImpl implements MemberRepositoryCustom { private final EntityManager em; @Override public List&lt;Member&gt; findMemberCustom() { return em.createQuery(&#34;select m from Member m&#34;) .getResultList(); } } Í∏∞Ï°¥ Î∞©ÏãùÎ≥¥Îã§ Ïù¥ Î∞©ÏãùÏù¥ ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ïù¥Î¶ÑÍ≥º Íµ¨ÌòÑ ÌÅ¥ÎûòÏä§ Ïù¥Î¶ÑÏù¥ ÎπÑÏä∑ÌïòÎØÄÎ°ú Îçî ÏßÅÍ¥ÄÏ†ÅÏù¥Îã§. Ï∂îÍ∞ÄÎ°ú Ïó¨Îü¨ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º Î∂ÑÎ¶¨Ìï¥ÏÑú Íµ¨ÌòÑÌïòÎäî Í≤ÉÎèÑ Í∞ÄÎä•ÌïòÍ∏∞ ÎïåÎ¨∏Ïóê ÏÉàÎ°≠Í≤å Î≥ÄÍ≤ΩÎêú Ïù¥ Î∞©ÏãùÏùÑ ÏÇ¨Ïö©ÌïòÎäî Í≤ÉÏùÑ Îçî Í∂åÏû•ÌïúÎã§.
2. Auditing  ÏóîÌã∞Ìã∞Î•º ÏÉùÏÑ±, Î≥ÄÍ≤ΩÌï† Îïå Î≥ÄÍ≤ΩÌïú ÏÇ¨ÎûåÍ≥º ÏãúÍ∞ÑÏùÑ Ï∂îÏ†ÅÌïòÍ≥† Ïã∂ÏúºÎ©¥?  Îì±Î°ùÏùº ÏàòÏ†ïÏùº Îì±Î°ùÏûê ÏàòÏ†ïÏûê    ÏàúÏàò JPA ÏÇ¨Ïö© Ïö∞ÏÑ† Îì±Î°ùÏùº, ÏàòÏ†ïÏùº Ï†ÅÏö©
@Getter @MappedSuperclass public class JpaBaseEntity { @Column(updatable = false) private LocalDateTime createdDate; private LocalDateTime updatedDate; @PrePersist public void prePersist() { LocalDateTime now = LocalDateTime.now(); createdDate = now; updatedDate = now; } @PreUpdate public void preUpdate() { updatedDate = LocalDateTime.now(); } } JPA Ï£ºÏöî Ïù¥Î≤§Ìä∏ Ïñ¥ÎÖ∏ÌÖåÏù¥ÏÖò
 @PrePersist, @PostPersist @PreUpdate, @PostUpdate  Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPA ÏÇ¨Ïö© ÏÑ§Ï†ï
@EnableJpaAuditing ‚Üí Ïä§ÌîÑÎßÅ Î∂ÄÌä∏ ÏÑ§Ï†ï ÌÅ¥ÎûòÏä§Ïóê Ï†ÅÏö©Ìï¥ÏïºÌï®
@EntityListeners(AuditingEntityListener.class) ‚Üí ÏóîÌã∞Ìã∞Ïóê Ï†ÅÏö©
ÏÇ¨Ïö© Ïñ¥ÎÖ∏ÌÖåÏù¥ÏÖò
 @CreatedDate @LastModifiedDate @CreatedBy @LastModifiedBy  Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ Auditing Ï†ÅÏö© - Îì±Î°ùÏùº, ÏàòÏ†ïÏùº
@EntityListeners(AuditingEntityListener.class) @MappedSuperclass @Getter public class BaseEntity { @CreatedBy @Column(updatable = false) private String createdBy; @LastModifiedBy private String lastModifiedBy; } 
Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ Auditing Ï†ÅÏö© - Îì±Î°ùÏûê, ÏàòÏ†ïÏûê
@EntityListeners(AuditingEntityListener.class) @MappedSuperclass @Getter public class BaseTimeEntity { @CreatedDate @Column(updatable = false) private LocalDateTime createdDate; @LastModifiedDate private LocalDateTime lastModifiedDate; } 
Îì±Î°ùÏûê, ÏàòÏ†ïÏûêÎ•º Ï≤òÎ¶¨Ìï¥Ï£ºÎäî AuditorAware Ïä§ÌîÑÎßÅ Îπà Îì±Î°ù
@Bean public AuditorAware&lt;String&gt; auditorProvider() { return () -&gt; Optional.of(UUID.randomUUID().toString()); } Ïã§Î¨¥ÏóêÏÑúÎäî ÏÑ∏ÏÖò Ï†ïÎ≥¥ÎÇò, Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞ Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ÏóêÏÑú IDÎ•º Î∞õÏùå]]></description>
</item><item>
    <title>ÏøºÎ¶¨ Î©îÏÜåÎìú</title>
    <link>https://jaeyeonme.github.io/posts/spring-data-jpa-query-method/</link>
    <pubDate>Fri, 31 Dec 2021 09:30:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/spring-data-jpa-query-method/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/spring-data-jpa.png" referrerpolicy="no-referrer">
            </div>1. ÏøºÎ¶¨ Î©îÏÜåÎìú Í∏∞Îä•  Î©îÏÜåÎìú Ïù¥Î¶ÑÏúºÎ°ú ÏøºÎ¶¨ ÏÉùÏÑ± NamedQuery @Query - Î¶¨ÌååÏßÄÌÜ†Î¶¨ Î©îÏÜåÎìúÏóê ÏøºÎ¶¨ Ï†ïÏùò ÌååÎùºÎØ∏ÌÑ∞ Î∞îÏù∏Îî© Î∞òÌôò ÌÉÄÏûÖ ÌéòÏù¥ÏßïÍ≥º Ï†ïÎ†¨ Î≤åÌÅ¨ÏÑ± ÏàòÏ†ï ÏøºÎ¶¨ @EntityGraph  ÏøºÎ¶¨ Î©îÏÜåÎìú Í∏∞Îä• 3Í∞ÄÏßÄ
 Î©îÏÜåÎìú Ïù¥Î¶ÑÏúºÎ°ú ÏøºÎ¶¨ ÏÉùÏÑ± Î©îÏÜåÎìú Ïù¥Î¶ÑÏúºÎ°ú JPA namedQuery Ìò∏Ï∂ú @Query Ïñ¥ÎÖ∏ÌÖåÏù¥ÏÖòÏùÑ ÏÇ¨Ïö©Ìï¥ÏÑú Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Ïóê ÏøºÎ¶¨ ÏßÅÏ†ë Ï†ïÏùò  Î©îÏÜåÎìú Ïù¥Î¶ÑÏúºÎ°ú ÏøºÎ¶¨ ÏÉùÏÑ± Î©îÏÜåÎìú Ïù¥Î¶ÑÏùÑ Î∂ÑÏÑùÌï¥ÏÑú JPQL ÏøºÎ¶¨ Ïã§Ìñâ
Ïù¥Î¶ÑÍ≥º ÎÇòÏù¥Î•º Í∏∞Ï§ÄÏúºÎ°ú ÌöåÏõêÏùÑ Ï°∞ÌöåÌïòÎ†§Î©¥?
ÏàúÏàò JPA Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨
public List&lt;Member&gt; findByUsernameAndAgeGreaterThen(String username, int age) { return em.createQuery(&#34;select m from Member m where m.username = :username and m.age &gt; :age&#34;) .setParameter(&#34;username&#34;, username) .setParameter(&#34;age&#34;, age) .getResultList(); } 
ÏàúÏàò JPA ÌÖåÏä§Ìä∏ ÏΩîÎìú
@Test public void findByUsernameAndAgeGreaterThen() { Member m1 = new Member(&#34;AAA&#34;, 10); Member m2 = new Member(&#34;AAA&#34;, 20); memberJpaRepository.save(m1); memberJpaRepository.save(m2); List&lt;Member&gt; result = memberJpaRepository.findByUsernameAndAgeGreaterThen(&#34;AAA&#34;, 15); assertThat(result.get(0).getUsername()).isEqualTo(&#34;AAA&#34;); assertThat(result.get(0).getAge()).isEqualTo(20); assertThat(result.size()).isEqualTo(1); } 
Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPA
public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age); }  Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÎäî Î©îÏÜåÎìú Ïù¥Î¶ÑÏùÑ Î∂ÑÏÑùÌï¥ÏÑú JPQLÏùÑ ÏÉùÏÑ±ÌïòÍ≥† Ïã§Ìñâ  Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÍ∞Ä Ï†úÍ≥µÌïòÎäî ÏøºÎ¶¨ Î©îÏÜåÎìú Í∏∞Îä•
 Ï°∞Ìöå: find‚Ä¶By ,read‚Ä¶By ,query‚Ä¶By get‚Ä¶By,  https://docs.spring.io/spring-data/jpa/docs/current/reference/html/ #repositories.query-methods.query-creation Ïòà:) findHelloBy Ï≤òÎüº &hellip;Ïóê ÏãùÎ≥ÑÌïòÍ∏∞ ÏúÑÌïú ÎÇ¥Ïö©(ÏÑ§Î™Ö)Ïù¥ Îì§Ïñ¥Í∞ÄÎèÑ ÎêúÎã§.   COUNT: count‚Ä¶By Î∞òÌôòÌÉÄÏûÖ long EXISTS: exists‚Ä¶By Î∞òÌôòÌÉÄÏûÖ boolean ÏÇ≠Ï†ú: delete‚Ä¶By, remove‚Ä¶By Î∞òÌôòÌÉÄÏûÖ long DISTINCT: findDistinct, findMemberDistinctBy LIMIT: findFirst3, findFirst, findTop, findTop3  https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.limit-query-result    Ï∞∏Í≥† Ïù¥ Í∏∞Îä•ÏùÄ ÏóîÌã∞Ìã∞Ïùò ÌïÑÎìúÎ™ÖÏù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Ïóê Ï†ïÏùòÌïú Î©îÏÑúÎìú Ïù¥Î¶ÑÎèÑ Íº≠ Ìï®Íªò Î≥ÄÍ≤ΩÌï¥Ïïº ÌïúÎã§. Í∑∏Î†áÏßÄ ÏïäÏúºÎ©¥ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÑ ÏãúÏûëÌïòÎäî ÏãúÏ†êÏóê Ïò§Î•òÍ∞Ä Î∞úÏÉùÌïúÎã§. Ïù¥Î†áÍ≤å Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Î°úÎî© ÏãúÏ†êÏóê Ïò§Î•òÎ•º Ïù∏ÏßÄÌï† Ïàò ÏûàÎäî Í≤ÉÏù¥ Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÏùò Îß§Ïö∞ ÌÅ∞ Ïû•Ï†êÏù¥Îã§.
2. JPA NamedQuery JPAÏùò NamedQueryÎ•º Ìò∏Ï∂úÌï† Ïàò ÏûàÏùå
@NamedQuery Ïñ¥ÎÖ∏ÌÖåÏù¥ÏÖòÏúºÎ°ú Named ÏøºÎ¶¨ Ï†ïÏùò
@Entity @NamedQuery( name = &#34;Member.findByUsername&#34;, query = &#34;select m from Member m where m.username = :username&#34; ) public class Member { ... } 
JPAÎ•º ÏßÅÏ†ë ÏÇ¨Ïö©Ìï¥ÏÑú Named ÏøºÎ¶¨ Ìò∏Ï∂ú
public class MemberRepository { public List&lt;Member&gt; findByUsername(String username) { ... return em.createNamedQuery(&#34;Member.findByUsername&#34;, Member.class) .setParameter(&#34;username&#34;, username) .getResultList(); } } 
Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÎ°ú NamedQuery ÏÇ¨Ïö©
@Query(name = &#34;Member.findByUsername&#34;) List&lt;Member&gt; findByUsername(@Param(&#34;username&#34;) String username); @Query Î•º ÏÉùÎûµÌïòÍ≥† Î©îÏÑúÎìú Ïù¥Î¶ÑÎßåÏúºÎ°ú Named ÏøºÎ¶¨Î•º Ìò∏Ï∂úÌï† Ïàò ÏûàÎã§.
Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÎ°ú Named ÏøºÎ¶¨ Ìò∏Ï∂ú
public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { // ** Ïó¨Í∏∞ ÏÑ†Ïñ∏Ìïú Member ÎèÑÎ©îÏù∏ ÌÅ¥ÎûòÏä§  List&lt;Member&gt; findByUsername(@Param(&#34;username&#34;) String username); }  Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÎäî ÏÑ†Ïñ∏Ìïú &ldquo;ÎèÑÎ©îÏù∏ ÌÅ¥ÎûòÏä§ + .(Ï†ê) + Î©îÏÑúÎìú Ïù¥Î¶Ñ&rdquo; ÏúºÎ°ú Named ÏøºÎ¶¨Î•º Ï∞æÏïÑÏÑú Ïã§Ìñâ ÎßåÏïΩ Ïã§ÌñâÌï† Named ÏøºÎ¶¨Í∞Ä ÏóÜÏúºÎ©¥ Î©îÏÑúÎìú Ïù¥Î¶ÑÏúºÎ°ú ÏøºÎ¶¨ ÏÉùÏÑ± Ï†ÑÎûµÏùÑ ÏÇ¨Ïö©ÌïúÎã§. ÌïÑÏöîÌïòÎ©¥ Ï†ÑÎûµÏùÑ Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏßÄÎßå Í∂åÏû•ÌïòÏßÄ ÏïäÎäîÎã§.  Ï∞∏Í≥† : https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-lookup-strategies    Ï∞∏Í≥† Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÎ•º ÏÇ¨Ïö©ÌïòÎ©¥ Ïã§Î¨¥ÏóêÏÑú Named QueryÎ•º ÏßÅÏ†ë Îì±Î°ùÌï¥ÏÑú ÏÇ¨Ïö©ÌïòÎäî ÏùºÏùÄ ÎìúÎ¨ºÎã§. ÎåÄÏã† @Query Î•º ÏÇ¨Ïö©Ìï¥ÏÑú Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Î©îÏÜåÎìúÏóê ÏøºÎ¶¨Î•º ÏßÅÏ†ë Ï†ïÏùòÌïúÎã§.
3. @Query, Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ Î©îÏÜåÎìúÏóê ÏøºÎ¶¨ Ï†ïÏùòÌïòÍ∏∞ Î©îÏÑúÎìú JPQL ÏøºÎ¶¨ ÏûëÏÑ± public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { @Query(&#34;select m from Member m where m.username = :username and m.age = :age&#34;) List&lt;Member&gt; findUser(@Param(&#34;username&#34;) String username, @Param(&#34;age&#34;) int age); }  @org.springframework.data.jpa.repository.Query Ïñ¥ÎÖ∏ÌÖåÏù¥ÏÖòÏùÑ ÏÇ¨Ïö© Ïã§ÌñâÌï† Î©îÏÑúÎìúÏóê Ï†ïÏ†Å ÏøºÎ¶¨Î•º ÏßÅÏ†ë ÏûëÏÑ±ÌïòÎØÄÎ°ú Ïù¥Î¶Ñ ÏóÜÎäî Named ÏøºÎ¶¨Îùº Ìï† Ïàò ÏûàÏùå JPA Named ÏøºÎ¶¨Ï≤òÎüº Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Ïã§Ìñâ ÏãúÏ†êÏóê Î¨∏Î≤ï Ïò§Î•òÎ•º Î∞úÍ≤¨Ìï† Ïàò ÏûàÏùå (Îß§Ïö∞ ÌÅ∞ Ïû•Ï†ê!)  Ï∞∏Í≥† Ïã§Î¨¥ÏóêÏÑúÎäî Î©îÏÜåÎìú Ïù¥Î¶ÑÏúºÎ°ú ÏøºÎ¶¨ ÏÉùÏÑ± Í∏∞Îä•ÏùÄ ÌååÎùºÎØ∏ÌÑ∞Í∞Ä Ï¶ùÍ∞ÄÌïòÎ©¥ Î©îÏÑúÎìú Ïù¥Î¶ÑÏù¥ Îß§Ïö∞ ÏßÄÏ†ÄÎ∂ÑÌï¥ÏßÑÎã§.]]></description>
</item><item>
    <title>Í≥µÌÜµ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Í∏∞Îä•</title>
    <link>https://jaeyeonme.github.io/posts/spring-data-jpa-common-interface/</link>
    <pubDate>Fri, 31 Dec 2021 09:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/spring-data-jpa-common-interface/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/spring-data-jpa.png" referrerpolicy="no-referrer">
            </div>1. ÏàúÏàò JPAÍ∏∞Î∞ò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ ÎßåÎì§Í∏∞  Í∏∞Î≥∏ CRUD  Ï†ÄÏû• Î≥ÄÍ≤Ω ‚Üí Î≥ÄÍ≤ΩÍ∞êÏßÄ ÏÇ¨Ïö© ÏÇ≠Ï†ú Ï†ÑÏ≤¥ Ï°∞Ìöå Îã®Í±¥ Ï°∞Ìöå Ïπ¥Ïö¥Ìä∏     Ï∞∏Í≥†: JPAÏóêÏÑú ÏàòÏ†ïÏùÄ Î≥ÄÍ≤ΩÍ∞êÏßÄ Í∏∞Îä•ÏùÑ ÏÇ¨Ïö©ÌïòÎ©¥ ÎêúÎã§. Ìä∏ÎûúÏû≠ÏÖò ÏïàÏóêÏÑú ÏóîÌã∞Ìã∞Î•º Ï°∞ÌöåÌïú Îã§ÏùåÏóê Îç∞Ïù¥ÌÑ∞Î•º Î≥ÄÍ≤ΩÌïòÎ©¥, Ìä∏ÎûúÏû≠ÏÖò Ï¢ÖÎ£å ÏãúÏ†êÏóê Î≥ÄÍ≤ΩÍ∞êÏßÄ Í∏∞Îä•Ïù¥ ÏûëÎèôÌï¥ÏÑú Î≥ÄÍ≤ΩÎêú ÏóîÌã∞Ìã∞Î•º Í∞êÏßÄÌïòÍ≥† UPDATE SQLÏùÑ Ïã§ÌñâÌïúÎã§.
 ÏàúÏàò JPA Í∏∞Î∞ò Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨
@Repository public class MemberJpaRepository { @PersistenceContext private EntityManager em; // Create (Ï†ÄÏû•)  public Member save(Member member) { em.persist(member); return member; } // Delete (ÏÇ≠Ï†ú)  public void delete(Member member) { em.remove(member); } // Read (Ï°∞Ìöå)  public List&lt;Member&gt; findAll() { // JPQL  return em.createQuery(&#34;select m from Member m&#34;, Member.class) .getResultList(); } public Optional&lt;Member&gt; findById(Long id) { Member member = em.find(Member.class, id); return Optional.ofNullable(member); } public long count() { return em.createQuery(&#34;select count(m) from Member m&#34;, Long.class) .getSingleResult(); } public Member find(Long id) { return em.find(Member.class, id); } }  ÌöåÏõê Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨ÏôÄ Í±∞Ïùò ÎèôÏùºÌïòÎã§.  2. Í≥µÌÜµ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏÑ§Ï†ï javaConfig ÏÑ§Ï†ï - Ïä§ÌîÑÎßÅ Î∂ÄÌä∏ ÏÇ¨Ïö©Ïãú ÏÉùÎûµ Í∞ÄÎä• @Configuration @EnableJpaRepositories(basePackages = &#34;jpabook.jpashop.repository&#34;) public class AppConfig {}  Ïä§ÌîÑÎßÅ Î∂ÄÌä∏ ÏÇ¨Ïö©Ïãú @SpringBootApplication ÏúÑÏπòÎ•º ÏßÄÏ†ï(Ìï¥Îãπ Ìå®ÌÇ§ÏßÄÏôÄ ÌïòÏúÑ Ìå®ÌÇ§ÏßÄ Ïù∏Ïãù) ÎßåÏïΩ ÏúÑÏπòÍ∞Ä Îã¨ÎùºÏßÄÎ©¥ @EnableJpaRepositories ÌïÑÏöî  Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÍ∞Ä Íµ¨ÌòÑ ÌÅ¥ÎûòÏä§ ÎåÄÏã† ÏÉùÏÑ±  org.springframework.data.repository.Repository Î•º Íµ¨ÌòÑÌïú ÌÅ¥ÎûòÏä§Îäî Ïä§Ï∫î ÎåÄÏÉÅ  MemberRepository Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Í∞Ä ÎèôÏûëÌïú Ïù¥Ïú† Ïã§Ï†ú Ï∂úÎ†•Ìï¥Î≥¥Í∏∞(Proxy) memberRepository.getClass() ‚Üí class com.sun.proxy.$ProxyXXX   @Repository Ïï†ÎÖ∏ÌÖåÏù¥ÏÖò ÏÉùÎûµ Í∞ÄÎä•  Ïª¥Ìè¨ÎÑåÌä∏ Ïä§Ï∫î Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÍ∞Ä ÏûêÎèôÏúºÎ°ú Ï≤òÎ¶¨ JPA ÏòàÏô∏Î•º Ïä§ÌîÑÎßÅ ÏòàÏô∏Î°ú Î≥ÄÌôòÌïòÎäî Í≥ºÏ†ïÎèÑ ÏûêÎèôÏúºÎ°ú Ï≤òÎ¶¨    3. Í≥µÌÜµ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ï†ÅÏö© ÏàúÏàò JPAÎ°ú Íµ¨ÌòÑÌïú MemberJpaRepository ÎåÄÏã†Ïóê Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPAÍ∞Ä Ï†úÍ≥µÌïòÎäî Í≥µÌÜµ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏÇ¨Ïö©
Ïä§ÌîÑÎßÅ Îç∞Ïù¥ÌÑ∞ JPA Í∏∞Î∞ò Repository public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { }  Generic  T : ÏóîÌã∞Ìã∞ ÌÉÄÏûÖ ID : ÏãùÎ≥ÑÏûê ÌÉÄÏûÖ(PK)    4. Í≥µÌÜµ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Î∂ÑÏÑù  JpaRepository Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ : Í≥µÌÜµ CURD Ï†úÍ≥µ Ï†úÎÑ§Î¶≠ÏùÄ &lt;ÏóîÌã∞Ìã∞ ÌÉÄÏûÖ, ÏãùÎ≥ÑÏûê ÌÉÄÏûÖ&gt; ÏÑ§Ï†ï  JpaRepository Í≥µÌÜµ Í∏∞Îä• Ïù∏ÌÑ∞ÌéòÏù¥Ïä§
public interface JpaRepository&lt;T, ID extends Serializable&gt; extends PagingAndSortingRepository&lt;T, ID&gt; { ... } 
JpaRepository Î•º ÏÇ¨Ïö©ÌïòÎäî Ïù∏ÌÑ∞ÌéòÏù¥Ïä§
public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { } 
Í≥µÌÜµ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Íµ¨ÏÑ± Ï£ºÏùò
 T findOne(ID) ‚Üí Optional&lt;T&gt; findById(ID) Î≥ÄÍ≤Ω  Ï†úÎÑ§Î¶≠ ÌÉÄÏûÖ
 T : ÏóîÌã∞Ìã∞ ID : ÏóîÌã∞Ìã∞Ïùò ÏãùÎ≥ÑÏûê ÌÉÄÏûÖ S : ÏóîÌã∞Ìã∞ÏôÄ Í∑∏ ÏûêÏãù ÌÉÄÏûÖ  Ï£ºÏöî Î©îÏÑúÎìú
 save(S) : ÏÉàÎ°úÏö¥ ÏóîÌã∞Ìã∞Îäî Ï†ÄÏû•ÌïòÍ≥† Ïù¥ÎØ∏ ÏûàÎäî ÏóîÌã∞Ìã∞Îäî Î≥ëÌï©ÌïúÎã§. delete(T) : ÏóîÌã∞Ìã∞ ÌïòÎÇòÎ•¥ ÏÇ≠Ï†úÌïúÎã§. ÎÇ¥Î∂ÄÏóêÏÑú EntityManager.remove() Ìò∏Ï∂ú findById(ID) : ÏóîÌã∞Ìã∞ ÌïòÎÇòÎ•º Ï°∞ÌöåÌïúÎã§. ÎÇ¥Î∂ÄÏóêÏÑú EntityManager.find() Ìò∏Ï∂ú getOne(ID) : ÏóîÌã∞Ìã∞Î•º ÌîÑÎ°ùÏãúÎ°ú Ï°∞ÌöåÌïúÎã§. ÎÇ¥Î∂ÄÏóêÏÑú EntityManager.getReference() Ìò∏Ï∂ú findAll(...) : Î™®Îì† ÏóîÌã∞Ìã∞Î•º Ï°∞ÌöåÌïúÎã§. Ï†ïÎ†¨(Sort)Ïù¥ÎÇò ÌéòÏù¥Ïßï(Pageable) Ï°∞Í±¥ÏùÑ ÌååÎùºÎØ∏ÌÑ∞Î°ú Ï†úÍ≥µÌï† Ïàò ÏûàÎã§.  Ï∞∏Í≥†: JpaRepository Îäî ÎåÄÎ∂ÄÎ∂ÑÏùò Í≥µÌÜµ Î©îÏÑúÎìúÎ•º Ï†úÍ≥µÌïúÎã§.]]></description>
</item><item>
    <title>Í∞ùÏ≤¥ÏßÄÌñ• ÏøºÎ¶¨ Ïñ∏Ïñ¥ - Ï§ëÍ∏â Î¨∏Î≤ï</title>
    <link>https://jaeyeonme.github.io/posts/jpa-object-query-language2/</link>
    <pubDate>Thu, 30 Dec 2021 10:20:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/jpa-object-query-language2/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/jpa.png" referrerpolicy="no-referrer">
            </div>1. Í≤ΩÎ°ú ÌëúÌòÑÏãù  .(Ï†ê)ÏùÑ Ï∞çÏñ¥ Í∞ùÏ≤¥ Í∑∏ÎûòÌîÑÎ•º ÌÉêÏÉâÌïòÎäî Í≤É select m.username -&gt; ÏÉÅÌÉú ÌïÑÎìú from Member m join m.team t -&gt; Îã®Ïùº Í∞í Ïó∞Í¥Ä ÌïÑÎìú join m.orders o -&gt; Ïª¨Î†âÏÖò Í∞í Ïó∞Í¥Ä ÌïÑÎìú where t.name = &#39;ÌåÄA&#39; 
Í≤ΩÎ°ú ÌëúÌòÑÏãù Ïö©Ïñ¥ Ï†ïÎ¶¨
 ÏÉÅÌÉú ÌïÑÎìú(state field): Îã®ÏàúÌûà Í∞íÏùÑ Ï†ÄÏû•ÌïòÍ∏∞ ÏúÑÌïú ÌïÑÎìú(ex: m.usernmae) Ïó∞Í¥Ä ÌïÑÎìú(association field): Ïó∞Í¥ÄÍ¥ÄÍ≥ÑÎ•º ÏúÑÌïú ÌïÑÎìú  Îã®Ïùº Í∞í Ïó∞Í¥Ä ÌïÑÎìú:  @ManyToOne, @OneToOne: ÎåÄÏÉÅÏù¥ ÏóîÌã∞Ìã∞(ex: m.team)  Ïª¨Î†âÏÖò Í∞í Ïó∞Í¥Ä ÌïÑÎìú:  @OneToMany, @ManyToMany, ÎåÄÏÉÅÏù¥ Ïª¨Î†âÏÖò(ex m.orders)   Í≤ΩÎ°ú ÌëúÌòÑÏãù ÌäπÏßï
  ÏÉÅÌÉú ÌïÑÎìú(state field): Í≤ΩÎ°ú ÌÉêÏÉâÏùò ÎÅù, ÌÉêÏÉâx
  Îã®Ïùº Í∞í Ïó∞Í¥Ä Í≤ΩÎ°ú: Î¨µÏãúÏ†Å ÎÇ¥Î∂Ä Ï°∞Ïù∏(inner join)Î∞úÏÉù, ÌÉêÏÉâO
select m.team.name from Member m; //teamÏóêÏÑú Í≤ΩÎ°úÌÉêÏÉâÏù¥ Îçî Í∞ÄÎä•ÌïòÎã§(name)   Ïª¨Î†âÏÖò Í∞í Ïó∞Í¥Ä Í≤ΩÎ°ú: Î¨µÏãúÏ†Å ÎÇ¥Î∂Ä Ï°∞Ïù∏ Î∞úÏÉù, ÌÉêÏÉâX
  FROM Ï†àÏóêÏÑú Î™ÖÏãúÏ†Å Ï°∞Ïù∏ÏùÑ ÌÜµÌï¥ Î≥ÑÏπ≠ÏùÑ ÏñªÏúºÎ©¥ Î≥ÑÏπ≠ÏùÑ ÌÜµÌï¥ ÌÉêÏÉâ Í∞ÄÎä•
select m.username from Team t join t.members m;     Ïã§Î¨¥ÏóêÏÑúÎäî Î™ÖÏãúÏ†Å Ï°∞Ïù∏ÏùÑ ÏÇ¨Ïö©ÌïòÏûê.
Ï°∞Ïù∏ÏùÄ SQL ÌäúÎãùÏóê Ï§ëÏöî Ìè¨Ïù∏Ìä∏
Î¨µÏãúÏ†Å Ï°∞Ïù∏ÏùÄ Ï°∞Ïù∏Ïù¥ ÏùºÏñ¥ÎÇòÎäî ÏÉÅÌô©ÏùÑ ÌïúÎààÏóê ÌååÏïÖÌïòÍ∏∞ Ïñ¥Î†§ÏõÄ
2. JPQL - ÌéòÏπò Ï°∞Ïù∏ (fetchjoin)   SQL Ï°∞Ïù∏ Ï¢ÖÎ•òÎäî ÏïÑÎãàÍ≥† JPAÏóêÏÑú Ï†úÍ≥µÌïòÎäî Í∏∞Îä•Ïù¥Îã§. JPQLÏóêÏÑú ÏÑ±Îä• ÏµúÏ†ÅÌôîÎ•º ÏúÑÌï¥ Ï†úÍ≥µÌïòÎäî Í∏∞Îä•. Ïó∞Í¥ÄÎêú ÏóîÌã∞Ìã∞ÎÇò Ïª¨Î†âÏÖòÏùÑ SQL Ìïú Î≤àÏóê Ìï®Íªò Ï°∞ÌöåÌïòÎäî Í∏∞Îä• join fetch Î™ÖÎ†πÏñ¥ ÏÇ¨Ïö© ÌéòÏπò Ï°∞Ïù∏ :: = [LEFT [OUTER] | INNER ] JOIN FETCH Ï°∞Ïù∏ Í≤ΩÎ°ú  ÏóîÌã∞Ìã∞ ÌéòÏπò Ï°∞Ïù∏
  ÌöåÏõêÏùÑ Ï°∞ÌöåÌïòÎ©¥ÏÑú Ïó∞Í¥ÄÎêú ÌåÄÎèÑ Ìï®Íªò Ï°∞Ìöå(SQL Ìïú Î≤àÏóê)
//JPQL select m from Member m join fetch m.team //SQL select m.* t.* from Member m inner join Team t on m.team_id = t.id;     ÎèÑÏãùÌôî
ÌåÄÏù¥ ÏûàÎäî ÌöåÏõêÏùÑ Ï°∞ÌöåÌïòÍ≥† Ïã∂ÏùÑ Îïå fetch joinÏùÑ ÏÇ¨Ïö©ÌïòÎ©¥ ÎÇ¥Î∂ÄÏ†ÅÏúºÎ°ú inner joinÏùÑ ÏÇ¨Ïö©ÌïúÎã§.
ÌåÄÏù¥ ÏóÜÎäî ÌöåÏõêÏùÄ ÎàÑÎùΩÎêúÎã§.
  ÌéòÏπò Ï°∞Ïù∏ ÏÇ¨Ïö© ÏΩîÎìú
  Í∏∞Ï°¥ Ïó∞Í¥ÄÍ¥ÄÍ≥Ñ Ï°∞Ìöå Î°úÏßÅÏùò Î¨∏Ï†ú
String jpql = &#34;select m from Member m&#34;; List&lt;Member&gt; members = em.createQuery(jpql, Member.class) .getResultList(); for (Member member : members) { System.out.println(&#34;username = &#34; + member.getUsername() + &#34;, &#34; + &#34;teamName = &#34; + member.getTeam().name()); //ÌöåÏõê1, ÌåÄA(SQL) //ÌöåÏõê2, ÌåÄA(1Ï∞® Ï∫êÏãú) //ÌöåÏõê3, ÌåÄB(SQL)  //ÌöåÏõê 100Î™Ö -&gt; N + 1 } ÏµúÏ¥à jpqlÏùÑ ÌÜµÌï¥ MemberÎ•º Ï°∞ÌöåÌï¥ Ïò¨Îïå TeamÏùò Ï†ïÎ≥¥Îäî ProxyÍ∞ùÏ≤¥Î°ú Í∞ÄÏßÄÍ≥† ÏûàÎã§. (Ïã§Ï†úÎ°† ÏóÜÎã§Îäî ÏùòÎØ∏) Í∑∏Î†áÍ∏∞Ïóê Ïã§Ï†úÎ°ú getTeam().getName()ÏùÑ ÌÜµÌï¥ ÌåÄÏùò Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌïòÎ†§Í≥† Ìï† Îïå SQLÏùÑ ÏàòÌñâÌïúÎã§. Ï£ºÏÑù ÎÇ¥Ïö©ÎåÄÎ°ú ÌïúÎ≤à Í∞ÄÏ†∏Ïò® TeamÏùò Ï†ïÎ≥¥Îäî 1Ï∞® Ï∫êÏãúÏóê Ïò¨ÎùºÍ∞Ä ÏûàÍ∏∞ ÎïåÎ¨∏Ïóê Îçî Ï°∞ÌöåÌï† ÌïÑÏöîÎäî ÏóÜÏßÄÎßå, ÌöåÏõêÏùÑ NÎ™Ö Ï°∞ÌöåÌïòÍ≤å ÎêòÏóàÏùÑÎïå ÏµúÎåÄ N + 1 Î≤à Team Ï°∞Ìöå ÏøºÎ¶¨Í∞Ä ÏàòÌñâ Îê† Ïàò ÏûàÎã§.
    ÌéòÏπò Ï°∞Ïù∏ÏùÑ ÌÜµÌïú Ìï¥Í≤∞
String jpql = &#34;select m from Member m join fetch m.team&#34;; List&lt;Member&gt; members = em.createQuery(jpql, Member.class) .getResultList(); for (Member member : members) { //ÌéòÏπò Ï°∞Ïù∏ÏúºÎ°ú ÌöåÏõêÍ≥º ÌåÄÏùÑ Ìï®Íªò Ï°∞ÌöåÌï¥ÏÑú ÏßÄÏó∞ Î°úÎî©X  System.out.println(&#34;username = &#34; + member.getUsername() + &#34;, &#34; + &#34;teamName = &#34; + member.getTeam().name()); } ÌéòÏπòÏ°∞Ïù∏ÏùÄ Ï°∞Ìöå ÎãπÏãúÏóê Ïã§Ï†ú ÏóîÌã∞Ìã∞Í∞Ä Îã¥Í∏¥Îã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏßÄÏó∞Î°úÎî© ÏóÜÏù¥ Î∞îÎ°ú ÏÇ¨Ïö©Ïù¥ Í∞ÄÎä•ÌïòÎã§.
  Ïã§Î¨¥ÏóêÏÑú ÏûêÏ£º ÏÇ¨Ïö©ÎêúÎã§. Ïª¨Î†âÏÖò ÌéòÏπò Ï°∞Ïù∏
 ÏùºÎåÄÎã§ Í¥ÄÍ≥Ñ, Ïª¨Î†âÏÖò ÌéòÏπò Ï°∞Ïù∏  //JPQL select t from Team t join fetch t.members where t.name = &#39;ÌåÄA&#39;; //SQL select t.*, m.* from team t, inner join member m on t.]]></description>
</item><item>
    <title>Í∞ùÏ≤¥ÏßÄÌñ• ÏøºÎ¶¨ Ïñ∏Ïñ¥ - Í∏∞Î≥∏ Î¨∏Î≤ï</title>
    <link>https://jaeyeonme.github.io/posts/jpa-object-query-language1/</link>
    <pubDate>Thu, 30 Dec 2021 10:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/jpa-object-query-language1/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/jpa.png" referrerpolicy="no-referrer">
            </div>1. ÏÜåÍ∞ú  JPAÎäî Îã§ÏñëÌïú ÏøºÎ¶¨ Î∞©Î≤ïÏùÑ ÏßÄÏõê
 JPQL JPA Criteria QueryDSL Native SQL JDBC API ÏßÅÏ†ë ÏÇ¨Ïö©, MyBatis, SpringJdbcTemplate Ìï®Íªò ÏÇ¨Ïö©  JPQL ÏÜåÍ∞ú
 Í∞ÄÏû• Îã®ÏàúÌïú Ï°∞Ìöå Î∞©Î≤ï  EntityManager.find() Í∞ùÏ≤¥ Í∑∏ÎûòÌîÑ ÌÉêÏÉâ (a.getB().getC())   ÎÇòÏù¥Í∞Ä 18ÏÇ¥ Ïù¥ÏÉÅÏù∏ ÌöåÏõêÏùÑ Î™®Îëê Í≤ÄÏÉâÌïòÍ≥† Ïã∂Îã§Î©¥?  JPQL - ÌïÑÏöîÏÑ±
 JPAÎ•º ÏÇ¨Ïö©ÌïòÎ©¥ ÏóîÌã∞Ìã∞ Í∞ùÏ≤¥Î•º Ï§ëÏã¨ÏúºÎ°ú Í∞úÎ∞ú Î¨∏Ï†úÎäî Í≤ÄÏÉâ ÏøºÎ¶¨ Í≤ÄÏÉâÏùÑ Ìï† ÎïåÎèÑ ÌÖåÏù¥Î∏îÏù¥ ÏïÑÎãå ÏóîÌã∞Ìã∞ Í∞ùÏ≤¥Î•º ÎåÄÏÉÅÏúºÎ°ú Í≤ÄÏÉâ Î™®Îì† DB Îç∞Ïù¥ÌÑ∞Î•º Í∞ùÏ≤¥Î°ú Î≥ÄÌôòÌï¥ÏÑú Í≤ÄÏÉâÌïòÎäî Í≤ÉÏùÄ Î∂àÍ∞ÄÎä• Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏù¥ ÌïÑÏöîÌïú Îç∞Ïù¥ÌÑ∞Îßå DBÏóêÏÑú Î∂àÎü¨Ïò§Î†§Î©¥ Í≤∞Íµ≠ Í≤Ä ÏÉâ Ï°∞Í±¥Ïù¥ Ìè¨Ìï®Îêú SQLÏù¥ ÌïÑÏöî  JPQL - ÌäπÏßï
  JPAÎäî SQLÏùÑ Ï∂îÏÉÅÌôîÌïú JPQLÏù¥ÎùºÎäî Í∞ùÏ≤¥ ÏßÄÌñ• ÏøºÎ¶¨Î•º Ï†úÍ≥µ
String sql = &#34;select m from Member.class as m where m.username like &#39;%until%&#39;&#34;; ÏùºÎ∞ò SQLÍ≥º ÎπÑÏä∑ÌïòÏßÄÎßå ÏóîÌã∞Ìã∞Î•º ÎåÄÏÉÅÏúºÎ°ú ÌïúÎã§Îäî Ï†êÏù¥ Îã§Î•¥Îã§.
 SQLÏùÑ Ï∂îÏÉÅÌôîÌï¥ÏÑú ÌäπÏ†ï Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ SQLÏóê ÏùòÏ°¥ÌïòÏßÄ ÏïäÎäîÎã§. ÎèôÏ†Å ÏøºÎ¶¨ ÏÉùÏÑ±Ïù¥ ÏâΩÏßÄ ÏïäÎã§.    Criteria - ÏÜåÍ∞ú
 Î¨∏ÏûêÍ∞Ä ÏïÑÎãå ÏûêÎ∞îÏΩîÎìúÎ°ú JPQLÏùÑ ÏûëÏÑ±Ìï† Ïàò ÏûàÏùå  //Criteria ÏÇ¨Ïö© Ï§ÄÎπÑ CriteriaBuilder cb = em.getCriteriaBuilder(); CriteriaQuery&lt;Member&gt; query = cb.createQuery(Member.class); //Î£®Ìä∏ ÌÅ¥ÎûòÏä§ (Ï°∞ÌöåÎ•º ÏãúÏûëÌï† ÌÅ¥ÎûòÏä§) Root&lt;Member&gt; m = query.from(Member.class); //ÏøºÎ¶¨ ÏÉùÏÑ± CriteriaQuery&lt;Member&gt; cq = query.select(m).where(cb.equal(m.get(&#34;username&#34;), ‚Äúkim‚Äù)); List&lt;Member&gt; resultList = em.createQuery(cq).getResultList()  JPQL ÎπåÎçî Ïó≠Ìï† JPA Í≥µÏãù Í∏∞Îä•  ‚ùåÏã§Î¨¥ÏóêÏÑ† Í±∞Ïùò ÏÇ¨Ïö©ÎêòÏßÄ ÏïäÎäîÎã§.
 ÏøºÎ¶¨Î•º ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Ìï† ÏàòÎäî ÏûàÏßÄÎßå Íµ¨ÌòÑÏù¥ ÎÑàÎ¨¥ Î≥µÏû°ÌïòÍ≥† Ïã§Ïö©ÏÑ±Ïù¥ ÏóÜÎã§. Î¨∏ÏûêÍ∞Ä ÏïÑÎãå ÏûêÎ∞îÏΩîÎìúÎ°ú JPQLÏùÑ ÏûëÏÑ±Ìï† Ïàò ÏûàÏùå JPQL ÎπåÎçî Ïó≠Ìï† JPA Í≥µÏãù Í∏∞Îä• Îã®Ï†ê : ÎÑàÎ¨¥ Î≥µÏû°ÌïòÍ≥† Ïã§Ïö©ÏÑ±Ïù¥ ÏóÜÎã§. Criteria ÎåÄÏã†Ïóê QueryDSL ÏÇ¨Ïö© Í∂åÏû•  QueryDSL ÏÜåÍ∞ú
Ïò§ÌîàÏÜåÏä§ ÎùºÏù¥Î∏åÎü¨Î¶¨
// JPQL // SELECT m from Member m WHERE m.age &gt; 18 JPAFactoryQuery query = new JPAQueryFactory(em); QMember m = QMember.member; List&lt;Member&gt; list = query.selectFrom(m) .where(m.age.gt(18)) .orderBy(m.name.desc()) .fetch();   Î¨∏ÏûêÍ∞Ä ÏïÑÎãå ÏûêÎ∞îÏΩîÎìúÎ°ú JPQLÏùÑ ÏûëÏÑ±Ìï† Ïàò ÏûàÏùå
  JPQL ÎπåÎçî Ïó≠Ìï†
  Ïª¥ÌååÏùº ÏãúÏ†êÏóê Î¨∏Î≤ï Ïò§Î•òÎ•º Ï∞æÏùÑ Ïàò ÏûàÏùå
  ... List&lt;Member&gt; list = query.selectFrom(m) .wheree(m.age.gt(18)) //Ïª¥ÌååÏùº ÏãúÏ†êÏóêÏÑú Ïò§Î•ò Í≤ÄÏ∂ú Í∞ÄÎä•  .orderBy(m.name.desc()) .fetch()  ÎèôÏ†ÅÏøºÎ¶¨ ÏûëÏÑ± Ìé∏Î¶¨Ìï® Îã®ÏàúÌïòÍ≥† ÏâΩÎã§. Ïã§Î¨¥ ÏÇ¨Ïö© Í∂åÏû•  ÎÑ§Ïù¥Ìã∞Î∏å SQL ÏÜåÍ∞ú
  JPAÍ∞Ä Ï†úÍ≥µÌïòÎäî SQLÏùÑ ÏßÅÏ†ë ÏÇ¨Ïö©ÌïòÎäî Í∏∞Îä•
  JPQLÎ°ú Ìï¥Í≤∞Ìï† Ïàò ÏóÜÎäî ÌäπÏ†ï Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Ïóê ÏùòÏ°¥Ï†ÅÏù∏ Í∏∞Îä•
 ex: Ïò§ÎùºÌÅ¥ CONNECT BY, ÌäπÏ†ï DBÎßå ÏÇ¨Ïö©ÌïúÎäî SQL ÌûåÌä∏  String sql =&#34;SELECT ID, AGE, TEAM_ID, NAME FROM MEMBER WHERE NAME = ‚Äòkim‚Äô&#34;; List&lt;Member&gt; resultList = em.createNativeQuery(sql, Member.class) .getResultList();   JDBC ÏßÅÏ†ë ÏÇ¨Ïö©, SpringJdbcTemplate Îì±
  PAÎ•º ÏÇ¨Ïö©ÌïòÎ©¥ÏÑú JDBC Ïª§ÎÑ•ÏÖòÏùÑ ÏßÅÏ†ë ÏÇ¨Ïö©ÌïòÍ±∞ÎÇò, Ïä§ÌîÑÎßÅ JdbcTemplate, ÎßàÏù¥Î∞îÌã∞Ïä§Îì± Ìï®Íºê ÏÇ¨Ïö©Í∞ÄÎä•
  Îã®, ÏòÅÏÜçÏÑ± Ïª®ÌÖçÏä§Ìä∏Î•º Ï†ÅÏ†àÌïú ÏãúÏ†êÏóê Í∞ïÏ†úÎ°ú ÌîåÎü¨Ïãú ÌïÑÏöî
 ex: JPAÎ•º Ïö∞ÌöåÌï¥ÏÑú SQLÏùÑ Ïã§ÌñâÌïòÍ∏∞ ÏßÅÏ†Ñ ÏòÅÏÜçÏÑ± Ïª®ÌÖçÏä§Ìä∏Î•º ÏàòÎèô ÌîåÎü¨Ïãú Ìï¥Ï§òÏïº ÌïúÎã§.  Member member = new Member(); member.setUsername(&#34;catsbi&#34;); conn.createQuery(&#34;select * from Member where username = &#39;catsbi&#39;&#34;); //Í≤∞Í≥º ÏóÜÏùå memberÎäî JdbcÍ∞Ä ÏøºÎ¶¨Î•º ÏàòÌñâÌïòÎäîÏãúÏ†êÏóêÏÑú ÏòÅÏÜçÏÑ± Ïª®ÌÖçÏä§Ìä∏ÏóêÎßå ÏûàÍ≥† dbÏóê ÏïÑÏßÅ Ï†ÄÏû•ÎêòÏßÄ ÏïäÏïòÍ∏∞ ÎïåÎ¨∏Ïóê Ï°∞ÌöåÍ≤∞Í≥ºÍ∞Ä ÏóÜÎã§ Í∑∏Îü¨ÎØÄÎ°ú ÏøºÎ¶¨ ÏàòÌñâ Ï†Ñ ÏàòÎèôÏúºÎ°ú ÌîåÎü¨ÏãúÎ•º Ìï¥Ï§òÏïº ÌïúÎã§.
  2. Í∏∞Î≥∏ Î¨∏Î≤ïÍ≥º ÏøºÎ¶¨ API  JPQL ÏÜåÍ∞ú
 JPQLÏùÄ Í∞ùÏ≤¥ÏßÄÌñ• ÏøºÎ¶¨ Ïñ∏Ïñ¥Îã§. Îî∞ÎùºÏÑú ÌÖåÏù¥Î∏îÏùÑ ÎåÄÏÉÅÏúºÎ°ú ÏøºÎ¶¨ÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãàÎùº ÏóîÌã∞Ìã∞ Í∞ùÏ≤¥Î•º ÎåÄÏÉÅÏúºÎ°ú ÏøºÎ¶¨ÌïúÎã§. JPQLÏùÄ SQLÏùÑ Ï∂îÏÉÅÌôîÌï¥ÏÑú ÌäπÏ†ï Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ SQLÏóê ÏùòÏ°¥ÌïòÏßÄ ÏïäÎäîÎã§.  EX: Ï°∞Ìöå Í∏∞Îä•ÏùÑ ÎßåÎì§ Îïå ÌäπÏ†ï DBÏóê ÏùòÏ°¥ÌïòÎäî SQLÏùÑ Îî∞Î°ú ÏïàÎßåÎì§Ïñ¥ÎèÑ ÎêúÎã§.   JPQLÏùÄ Í≤∞Íµ≠ SQLÎ°ú Î≥ÄÌôòÎêúÎã§.  Í∞ùÏ≤¥/DB Î™®Îç∏]]></description>
</item></channel>
</rss>
