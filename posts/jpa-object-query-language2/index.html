<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ì¤‘ê¸‰ ë¬¸ë²• - ğŸ“š | Dev Blog</title><meta name="Description" content=""><meta property="og:title" content="ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ì¤‘ê¸‰ ë¬¸ë²•" />
<meta property="og:description" content="1. ê²½ë¡œ í‘œí˜„ì‹  .(ì )ì„ ì°ì–´ ê°ì²´ ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•˜ëŠ” ê²ƒ select m.username -&gt; ìƒíƒœ í•„ë“œ from Member m join m.team t -&gt; ë‹¨ì¼ ê°’ ì—°ê´€ í•„ë“œ join m.orders o -&gt; ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ í•„ë“œ where t.name = &#39;íŒ€A&#39; 
ê²½ë¡œ í‘œí˜„ì‹ ìš©ì–´ ì •ë¦¬
 ìƒíƒœ í•„ë“œ(state field): ë‹¨ìˆœíˆ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ í•„ë“œ(ex: m.usernmae) ì—°ê´€ í•„ë“œ(association field): ì—°ê´€ê´€ê³„ë¥¼ ìœ„í•œ í•„ë“œ  ë‹¨ì¼ ê°’ ì—°ê´€ í•„ë“œ:  @ManyToOne, @OneToOne: ëŒ€ìƒì´ ì—”í‹°í‹°(ex: m.team)  ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ í•„ë“œ:  @OneToMany, @ManyToMany, ëŒ€ìƒì´ ì»¬ë ‰ì…˜(ex m.orders)   ê²½ë¡œ í‘œí˜„ì‹ íŠ¹ì§•
  ìƒíƒœ í•„ë“œ(state field): ê²½ë¡œ íƒìƒ‰ì˜ ë, íƒìƒ‰x
  ë‹¨ì¼ ê°’ ì—°ê´€ ê²½ë¡œ: ë¬µì‹œì  ë‚´ë¶€ ì¡°ì¸(inner join)ë°œìƒ, íƒìƒ‰O
select m.team.name from Member m; //teamì—ì„œ ê²½ë¡œíƒìƒ‰ì´ ë” ê°€ëŠ¥í•˜ë‹¤(name)   ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ ê²½ë¡œ: ë¬µì‹œì  ë‚´ë¶€ ì¡°ì¸ ë°œìƒ, íƒìƒ‰X
  FROM ì ˆì—ì„œ ëª…ì‹œì  ì¡°ì¸ì„ í†µí•´ ë³„ì¹­ì„ ì–»ìœ¼ë©´ ë³„ì¹­ì„ í†µí•´ íƒìƒ‰ ê°€ëŠ¥
select m.username from Team t join t.members m;     ì‹¤ë¬´ì—ì„œëŠ” ëª…ì‹œì  ì¡°ì¸ì„ ì‚¬ìš©í•˜ì.
ì¡°ì¸ì€ SQL íŠœë‹ì— ì¤‘ìš” í¬ì¸íŠ¸
ë¬µì‹œì  ì¡°ì¸ì€ ì¡°ì¸ì´ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì„ í•œëˆˆì— íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
2. JPQL - í˜ì¹˜ ì¡°ì¸ (fetchjoin)   SQL ì¡°ì¸ ì¢…ë¥˜ëŠ” ì•„ë‹ˆê³  JPAì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. JPQLì—ì„œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥. ì—°ê´€ëœ ì—”í‹°í‹°ë‚˜ ì»¬ë ‰ì…˜ì„ SQL í•œ ë²ˆì— í•¨ê»˜ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ join fetch ëª…ë ¹ì–´ ì‚¬ìš© í˜ì¹˜ ì¡°ì¸ :: = [LEFT [OUTER] | INNER ] JOIN FETCH ì¡°ì¸ ê²½ë¡œ  ì—”í‹°í‹° í˜ì¹˜ ì¡°ì¸
  íšŒì›ì„ ì¡°íšŒí•˜ë©´ì„œ ì—°ê´€ëœ íŒ€ë„ í•¨ê»˜ ì¡°íšŒ(SQL í•œ ë²ˆì—)
//JPQL select m from Member m join fetch m.team //SQL select m.* t.* from Member m inner join Team t on m.team_id = t.id;     ë„ì‹í™”
íŒ€ì´ ìˆëŠ” íšŒì›ì„ ì¡°íšŒí•˜ê³  ì‹¶ì„ ë•Œ fetch joinì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ inner joinì„ ì‚¬ìš©í•œë‹¤.
íŒ€ì´ ì—†ëŠ” íšŒì›ì€ ëˆ„ë½ëœë‹¤.
  í˜ì¹˜ ì¡°ì¸ ì‚¬ìš© ì½”ë“œ
  ê¸°ì¡´ ì—°ê´€ê´€ê³„ ì¡°íšŒ ë¡œì§ì˜ ë¬¸ì œ
String jpql = &#34;select m from Member m&#34;; List&lt;Member&gt; members = em.createQuery(jpql, Member.class) .getResultList(); for (Member member : members) { System.out.println(&#34;username = &#34; &#43; member.getUsername() &#43; &#34;, &#34; &#43; &#34;teamName = &#34; &#43; member.getTeam().name()); //íšŒì›1, íŒ€A(SQL) //íšŒì›2, íŒ€A(1ì°¨ ìºì‹œ) //íšŒì›3, íŒ€B(SQL)  //íšŒì› 100ëª… -&gt; N &#43; 1 } ìµœì´ˆ jpqlì„ í†µí•´ Memberë¥¼ ì¡°íšŒí•´ ì˜¬ë•Œ Teamì˜ ì •ë³´ëŠ” Proxyê°ì²´ë¡œ ê°€ì§€ê³  ìˆë‹¤. (ì‹¤ì œë¡  ì—†ë‹¤ëŠ” ì˜ë¯¸) ê·¸ë ‡ê¸°ì— ì‹¤ì œë¡œ getTeam().getName()ì„ í†µí•´ íŒ€ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ë ¤ê³  í•  ë•Œ SQLì„ ìˆ˜í–‰í•œë‹¤. ì£¼ì„ ë‚´ìš©ëŒ€ë¡œ í•œë²ˆ ê°€ì ¸ì˜¨ Teamì˜ ì •ë³´ëŠ” 1ì°¨ ìºì‹œì— ì˜¬ë¼ê°€ ìˆê¸° ë•Œë¬¸ì— ë” ì¡°íšŒí•  í•„ìš”ëŠ” ì—†ì§€ë§Œ, íšŒì›ì„ Nëª… ì¡°íšŒí•˜ê²Œ ë˜ì—ˆì„ë•Œ ìµœëŒ€ N &#43; 1 ë²ˆ Team ì¡°íšŒ ì¿¼ë¦¬ê°€ ìˆ˜í–‰ ë  ìˆ˜ ìˆë‹¤.
    í˜ì¹˜ ì¡°ì¸ì„ í†µí•œ í•´ê²°
String jpql = &#34;select m from Member m join fetch m.team&#34;; List&lt;Member&gt; members = em.createQuery(jpql, Member.class) .getResultList(); for (Member member : members) { //í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ íšŒì›ê³¼ íŒ€ì„ í•¨ê»˜ ì¡°íšŒí•´ì„œ ì§€ì—° ë¡œë”©X  System.out.println(&#34;username = &#34; &#43; member.getUsername() &#43; &#34;, &#34; &#43; &#34;teamName = &#34; &#43; member.getTeam().name()); } í˜ì¹˜ì¡°ì¸ì€ ì¡°íšŒ ë‹¹ì‹œì— ì‹¤ì œ ì—”í‹°í‹°ê°€ ë‹´ê¸´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì§€ì—°ë¡œë”© ì—†ì´ ë°”ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
  ì‹¤ë¬´ì—ì„œ ìì£¼ ì‚¬ìš©ëœë‹¤. ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸
 ì¼ëŒ€ë‹¤ ê´€ê³„, ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸  //JPQL select t from Team t join fetch t.members where t.name = &#39;íŒ€A&#39;; //SQL select t.*, m.* from team t, inner join member m on t." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jaeyeonme.github.io/posts/jpa-object-query-language2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-30T10:20:00+00:00" />
<meta property="article:modified_time" content="2021-12-30T10:20:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ì¤‘ê¸‰ ë¬¸ë²•"/>
<meta name="twitter:description" content="1. ê²½ë¡œ í‘œí˜„ì‹  .(ì )ì„ ì°ì–´ ê°ì²´ ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•˜ëŠ” ê²ƒ select m.username -&gt; ìƒíƒœ í•„ë“œ from Member m join m.team t -&gt; ë‹¨ì¼ ê°’ ì—°ê´€ í•„ë“œ join m.orders o -&gt; ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ í•„ë“œ where t.name = &#39;íŒ€A&#39; 
ê²½ë¡œ í‘œí˜„ì‹ ìš©ì–´ ì •ë¦¬
 ìƒíƒœ í•„ë“œ(state field): ë‹¨ìˆœíˆ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ í•„ë“œ(ex: m.usernmae) ì—°ê´€ í•„ë“œ(association field): ì—°ê´€ê´€ê³„ë¥¼ ìœ„í•œ í•„ë“œ  ë‹¨ì¼ ê°’ ì—°ê´€ í•„ë“œ:  @ManyToOne, @OneToOne: ëŒ€ìƒì´ ì—”í‹°í‹°(ex: m.team)  ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ í•„ë“œ:  @OneToMany, @ManyToMany, ëŒ€ìƒì´ ì»¬ë ‰ì…˜(ex m.orders)   ê²½ë¡œ í‘œí˜„ì‹ íŠ¹ì§•
  ìƒíƒœ í•„ë“œ(state field): ê²½ë¡œ íƒìƒ‰ì˜ ë, íƒìƒ‰x
  ë‹¨ì¼ ê°’ ì—°ê´€ ê²½ë¡œ: ë¬µì‹œì  ë‚´ë¶€ ì¡°ì¸(inner join)ë°œìƒ, íƒìƒ‰O
select m.team.name from Member m; //teamì—ì„œ ê²½ë¡œíƒìƒ‰ì´ ë” ê°€ëŠ¥í•˜ë‹¤(name)   ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ ê²½ë¡œ: ë¬µì‹œì  ë‚´ë¶€ ì¡°ì¸ ë°œìƒ, íƒìƒ‰X
  FROM ì ˆì—ì„œ ëª…ì‹œì  ì¡°ì¸ì„ í†µí•´ ë³„ì¹­ì„ ì–»ìœ¼ë©´ ë³„ì¹­ì„ í†µí•´ íƒìƒ‰ ê°€ëŠ¥
select m.username from Team t join t.members m;     ì‹¤ë¬´ì—ì„œëŠ” ëª…ì‹œì  ì¡°ì¸ì„ ì‚¬ìš©í•˜ì.
ì¡°ì¸ì€ SQL íŠœë‹ì— ì¤‘ìš” í¬ì¸íŠ¸
ë¬µì‹œì  ì¡°ì¸ì€ ì¡°ì¸ì´ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì„ í•œëˆˆì— íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
2. JPQL - í˜ì¹˜ ì¡°ì¸ (fetchjoin)   SQL ì¡°ì¸ ì¢…ë¥˜ëŠ” ì•„ë‹ˆê³  JPAì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. JPQLì—ì„œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥. ì—°ê´€ëœ ì—”í‹°í‹°ë‚˜ ì»¬ë ‰ì…˜ì„ SQL í•œ ë²ˆì— í•¨ê»˜ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ join fetch ëª…ë ¹ì–´ ì‚¬ìš© í˜ì¹˜ ì¡°ì¸ :: = [LEFT [OUTER] | INNER ] JOIN FETCH ì¡°ì¸ ê²½ë¡œ  ì—”í‹°í‹° í˜ì¹˜ ì¡°ì¸
  íšŒì›ì„ ì¡°íšŒí•˜ë©´ì„œ ì—°ê´€ëœ íŒ€ë„ í•¨ê»˜ ì¡°íšŒ(SQL í•œ ë²ˆì—)
//JPQL select m from Member m join fetch m.team //SQL select m.* t.* from Member m inner join Team t on m.team_id = t.id;     ë„ì‹í™”
íŒ€ì´ ìˆëŠ” íšŒì›ì„ ì¡°íšŒí•˜ê³  ì‹¶ì„ ë•Œ fetch joinì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ inner joinì„ ì‚¬ìš©í•œë‹¤.
íŒ€ì´ ì—†ëŠ” íšŒì›ì€ ëˆ„ë½ëœë‹¤.
  í˜ì¹˜ ì¡°ì¸ ì‚¬ìš© ì½”ë“œ
  ê¸°ì¡´ ì—°ê´€ê´€ê³„ ì¡°íšŒ ë¡œì§ì˜ ë¬¸ì œ
String jpql = &#34;select m from Member m&#34;; List&lt;Member&gt; members = em.createQuery(jpql, Member.class) .getResultList(); for (Member member : members) { System.out.println(&#34;username = &#34; &#43; member.getUsername() &#43; &#34;, &#34; &#43; &#34;teamName = &#34; &#43; member.getTeam().name()); //íšŒì›1, íŒ€A(SQL) //íšŒì›2, íŒ€A(1ì°¨ ìºì‹œ) //íšŒì›3, íŒ€B(SQL)  //íšŒì› 100ëª… -&gt; N &#43; 1 } ìµœì´ˆ jpqlì„ í†µí•´ Memberë¥¼ ì¡°íšŒí•´ ì˜¬ë•Œ Teamì˜ ì •ë³´ëŠ” Proxyê°ì²´ë¡œ ê°€ì§€ê³  ìˆë‹¤. (ì‹¤ì œë¡  ì—†ë‹¤ëŠ” ì˜ë¯¸) ê·¸ë ‡ê¸°ì— ì‹¤ì œë¡œ getTeam().getName()ì„ í†µí•´ íŒ€ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ë ¤ê³  í•  ë•Œ SQLì„ ìˆ˜í–‰í•œë‹¤. ì£¼ì„ ë‚´ìš©ëŒ€ë¡œ í•œë²ˆ ê°€ì ¸ì˜¨ Teamì˜ ì •ë³´ëŠ” 1ì°¨ ìºì‹œì— ì˜¬ë¼ê°€ ìˆê¸° ë•Œë¬¸ì— ë” ì¡°íšŒí•  í•„ìš”ëŠ” ì—†ì§€ë§Œ, íšŒì›ì„ Nëª… ì¡°íšŒí•˜ê²Œ ë˜ì—ˆì„ë•Œ ìµœëŒ€ N &#43; 1 ë²ˆ Team ì¡°íšŒ ì¿¼ë¦¬ê°€ ìˆ˜í–‰ ë  ìˆ˜ ìˆë‹¤.
    í˜ì¹˜ ì¡°ì¸ì„ í†µí•œ í•´ê²°
String jpql = &#34;select m from Member m join fetch m.team&#34;; List&lt;Member&gt; members = em.createQuery(jpql, Member.class) .getResultList(); for (Member member : members) { //í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ íšŒì›ê³¼ íŒ€ì„ í•¨ê»˜ ì¡°íšŒí•´ì„œ ì§€ì—° ë¡œë”©X  System.out.println(&#34;username = &#34; &#43; member.getUsername() &#43; &#34;, &#34; &#43; &#34;teamName = &#34; &#43; member.getTeam().name()); } í˜ì¹˜ì¡°ì¸ì€ ì¡°íšŒ ë‹¹ì‹œì— ì‹¤ì œ ì—”í‹°í‹°ê°€ ë‹´ê¸´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì§€ì—°ë¡œë”© ì—†ì´ ë°”ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
  ì‹¤ë¬´ì—ì„œ ìì£¼ ì‚¬ìš©ëœë‹¤. ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸
 ì¼ëŒ€ë‹¤ ê´€ê³„, ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸  //JPQL select t from Team t join fetch t.members where t.name = &#39;íŒ€A&#39;; //SQL select t.*, m.* from team t, inner join member m on t."/>
<meta name="application-name" content="ğŸ“š | Dev Blog">
<meta name="apple-mobile-web-app-title" content="ğŸ“š | Dev Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jaeyeonme.github.io/posts/jpa-object-query-language2/" /><link rel="prev" href="https://jaeyeonme.github.io/posts/jpa-object-query-language1/" /><link rel="next" href="https://jaeyeonme.github.io/posts/spring-data-jpa-common-interface/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ì¤‘ê¸‰ ë¬¸ë²•",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jaeyeonme.github.io\/posts\/jpa-object-query-language2\/"
        },"genre": "posts","keywords": "JPA, Hibernate","wordcount":  2156 ,
        "url": "https:\/\/jaeyeonme.github.io\/posts\/jpa-object-query-language2\/","datePublished": "2021-12-30T10:20:00+00:00","dateModified": "2021-12-30T10:20:00+00:00","publisher": {
            "@type": "Organization",
            "name": "Jaeyeon"},"author": {
                "@type": "Person",
                "name": "Jaeyeon"
            },"description": ""
    }
    </script></head>
    <body header-desktop="auto" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ğŸ“š | Dev Blog">ğŸ“š | Dev Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ğŸ“š | Dev Blog">ğŸ“š | Dev Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ì¤‘ê¸‰ ë¬¸ë²•</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-category">included in <a href="/categories/jpa/"><i class="far fa-folder fa-fw"></i>JPA</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-12-30">2021-12-30</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;2156 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;11 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/jpa.png"
        data-srcset="/images/JPA/jpa.png, /images/JPA/jpa.png 1.5x, /images/JPA/jpa.png 2x"
        data-sizes="auto"
        alt="/images/JPA/jpa.png"
        title="/images/JPA/jpa.png" /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-ê²½ë¡œ-í‘œí˜„ì‹">1. ê²½ë¡œ í‘œí˜„ì‹</a>
      <ul>
        <li><a href="#ì ì„-ì°ì–´-ê°ì²´-ê·¸ë˜í”„ë¥¼-íƒìƒ‰í•˜ëŠ”-ê²ƒ">.(ì )ì„ ì°ì–´ ê°ì²´ ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•˜ëŠ” ê²ƒ</a></li>
      </ul>
    </li>
    <li><a href="#2-jpql---í˜ì¹˜-ì¡°ì¸-fetchjoin">2. JPQL - í˜ì¹˜ ì¡°ì¸ (fetchjoin)</a>
      <ul>
        <li><a href="#ì‹¤ë¬´ì—ì„œ-ìì£¼-ì‚¬ìš©ëœë‹¤">ì‹¤ë¬´ì—ì„œ ìì£¼ ì‚¬ìš©ëœë‹¤.</a></li>
        <li><a href="#previous-teamì„-fetch-join-í•´ì„œ-ê°€ì ¸ì™”ì„-ê²½ìš°-ì‚¬ì´ì¦ˆëŠ”-ì–´ë–»ê²Œ-ë‚˜ì˜¬-ê²ƒì¸ê°€">previous: Teamì„ fetch join í•´ì„œ ê°€ì ¸ì™”ì„ ê²½ìš° ì‚¬ì´ì¦ˆëŠ” ì–´ë–»ê²Œ ë‚˜ì˜¬ ê²ƒì¸ê°€</a></li>
        <li><a href="#ë°˜ëŒ€ë¡œ-ë‹¤ëŒ€ì¼n1ì€-ë»¥íŠ€ê¸°-ë˜ì§€-ì•ŠëŠ”ë‹¤">ë°˜ëŒ€ë¡œ ë‹¤ëŒ€ì¼(N:1)ì€ ë»¥íŠ€ê¸° ë˜ì§€ ì•ŠëŠ”ë‹¤.</a></li>
        <li><a href="#í•´ê²°-ë°©ì•ˆ">í•´ê²° ë°©ì•ˆ</a></li>
      </ul>
    </li>
    <li><a href="#3-ë‹¤í˜•ì„±-ì¿¼ë¦¬">3. ë‹¤í˜•ì„± ì¿¼ë¦¬</a></li>
    <li><a href="#4-ì—”í‹°í‹°-ì§ì ‘-ì‚¬ìš©">4. ì—”í‹°í‹° ì§ì ‘ ì‚¬ìš©</a>
      <ul>
        <li><a href="#ê¸°ë³¸-í‚¤-ê°’">ê¸°ë³¸ í‚¤ ê°’</a></li>
        <li><a href="#ì™¸ë˜-í‚¤-ê°’">ì™¸ë˜ í‚¤ ê°’</a></li>
      </ul>
    </li>
    <li><a href="#5-named-ì¿¼ë¦¬">5. Named ì¿¼ë¦¬</a>
      <ul>
        <li><a href="#springdata-jpaë¥¼-ì‚¬ìš©í•˜ë©´-namedqueryë¥¼-ì´ë¯¸-ì‚¬ìš©">SpringData JPAë¥¼ ì‚¬ìš©í•˜ë©´ NamedQueryë¥¼ ì´ë¯¸ ì‚¬ìš©.</a></li>
      </ul>
    </li>
    <li><a href="#6-ë²Œí¬-ì—°ì‚°">6. ë²Œí¬ ì—°ì‚°</a>
      <ul>
        <li><a href="#ì—”í‹°í‹°-ì§ì ‘-ì‚¬ìš©---ì™¸ë˜-í‚¤-ê°’">ì—”í‹°í‹° ì§ì ‘ ì‚¬ìš© - ì™¸ë˜ í‚¤ ê°’</a></li>
      </ul>
    </li>
    <li><a href="#5-jpql---named-ì¿¼ë¦¬">5. JPQL - Named ì¿¼ë¦¬</a>
      <ul>
        <li><a href="#named-ì¿¼ë¦¬---ì •ì -ì¿¼ë¦¬">Named ì¿¼ë¦¬ - ì •ì  ì¿¼ë¦¬</a></li>
        <li><a href="#named-ì¿¼ë¦¬---ì–´ë…¸í…Œì´ì…˜">Named ì¿¼ë¦¬ - ì–´ë…¸í…Œì´ì…˜</a></li>
        <li><a href="#named-ì¿¼ë¦¬---xmlì—-ì •ì˜">Named ì¿¼ë¦¬ - XMLì— ì •ì˜</a></li>
        <li><a href="#named-ì¿¼ë¦¬-í™˜ê²½ì—-ë”°ë¥¸-ì„¤ì •">Named ì¿¼ë¦¬ í™˜ê²½ì— ë”°ë¥¸ ì„¤ì •</a></li>
      </ul>
    </li>
    <li><a href="#6-jpql---ë²Œí¬-ì—°ì‚°">6. JPQL - ë²Œí¬ ì—°ì‚°</a>
      <ul>
        <li><a href="#ë²Œí¬-ì—°ì‚°">ë²Œí¬ ì—°ì‚°</a></li>
        <li><a href="#ë²Œí¬-ì—°ì‚°-ì˜ˆì œ">ë²Œí¬ ì—°ì‚° ì˜ˆì œ</a></li>
        <li><a href="#ë²Œí¬-ì—°ì‚°-ì£¼ì˜">ë²Œí¬ ì—°ì‚° ì£¼ì˜</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="1-ê²½ë¡œ-í‘œí˜„ì‹">1. ê²½ë¡œ í‘œí˜„ì‹</h2>
<hr>
<h3 id="ì ì„-ì°ì–´-ê°ì²´-ê·¸ë˜í”„ë¥¼-íƒìƒ‰í•˜ëŠ”-ê²ƒ">.(ì )ì„ ì°ì–´ ê°ì²´ ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•˜ëŠ” ê²ƒ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">select</span> <span class="n">m</span><span class="o">.</span><span class="na">username</span> <span class="o">-&gt;</span> <span class="n">ìƒíƒœ</span> <span class="n">í•„ë“œ</span> 
	<span class="n">from</span> <span class="n">Member</span> <span class="n">m</span>
	<span class="n">join</span> <span class="n">m</span><span class="o">.</span><span class="na">team</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="n">ë‹¨ì¼</span> <span class="n">ê°’</span> <span class="n">ì—°ê´€</span> <span class="n">í•„ë“œ</span>
	<span class="n">join</span> <span class="n">m</span><span class="o">.</span><span class="na">orders</span> <span class="n">o</span> <span class="o">-&gt;</span> <span class="n">ì»¬ë ‰ì…˜</span> <span class="n">ê°’</span> <span class="n">ì—°ê´€</span> <span class="n">í•„ë“œ</span> 
<span class="n">where</span> <span class="n">t</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">íŒ€A</span><span class="err">&#39;</span>
</code></pre></div><br>
<p><strong>ê²½ë¡œ í‘œí˜„ì‹ ìš©ì–´ ì •ë¦¬</strong></p>
<ul>
<li>ìƒíƒœ í•„ë“œ(state field): ë‹¨ìˆœíˆ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ í•„ë“œ(ex: m.usernmae)</li>
<li>ì—°ê´€ í•„ë“œ(association field): ì—°ê´€ê´€ê³„ë¥¼ ìœ„í•œ í•„ë“œ
<ul>
<li>ë‹¨ì¼ ê°’ ì—°ê´€ í•„ë“œ:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@ManyToOne</span><span class="o">,</span> <span class="nd">@OneToOne</span><span class="o">:</span> <span class="n">ëŒ€ìƒì´</span> <span class="nf">ì—”í‹°í‹°</span><span class="o">(</span><span class="n">ex</span><span class="o">:</span> <span class="n">m</span><span class="o">.</span><span class="na">team</span><span class="o">)</span>
</code></pre></div><ul>
<li>ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ í•„ë“œ:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@OneToMany</span><span class="o">,</span> <span class="nd">@ManyToMany</span><span class="o">,</span> <span class="n">ëŒ€ìƒì´</span> <span class="nf">ì»¬ë ‰ì…˜</span><span class="o">(</span><span class="n">ex</span> <span class="n">m</span><span class="o">.</span><span class="na">orders</span><span class="o">)</span>
</code></pre></div></li>
</ul>
<br>
<br>
<p><strong>ê²½ë¡œ í‘œí˜„ì‹ íŠ¹ì§•</strong></p>
<ul>
<li>
<p>ìƒíƒœ í•„ë“œ(state field): ê²½ë¡œ íƒìƒ‰ì˜ ë, íƒìƒ‰x</p>
</li>
<li>
<p>ë‹¨ì¼ ê°’ ì—°ê´€ ê²½ë¡œ: ë¬µì‹œì  ë‚´ë¶€ ì¡°ì¸(inner join)ë°œìƒ, íƒìƒ‰O</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">select</span> <span class="n">m</span><span class="o">.</span><span class="na">team</span><span class="o">.</span><span class="na">name</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span><span class="o">;</span> <span class="c1">//teamì—ì„œ ê²½ë¡œíƒìƒ‰ì´ ë” ê°€ëŠ¥í•˜ë‹¤(name)
</span></code></pre></div></li>
<li>
<p>ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ ê²½ë¡œ: ë¬µì‹œì  ë‚´ë¶€ ì¡°ì¸ ë°œìƒ, íƒìƒ‰X</p>
<ul>
<li>
<p>FROM ì ˆì—ì„œ ëª…ì‹œì  ì¡°ì¸ì„ í†µí•´ ë³„ì¹­ì„ ì–»ìœ¼ë©´ ë³„ì¹­ì„ í†µí•´ íƒìƒ‰ ê°€ëŠ¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">select</span> <span class="n">m</span><span class="o">.</span><span class="na">username</span> <span class="n">from</span> <span class="n">Team</span> <span class="n">t</span> <span class="n">join</span> <span class="n">t</span><span class="o">.</span><span class="na">members</span> <span class="n">m</span><span class="o">;</span>
</code></pre></div></li>
</ul>
</li>
</ul>
<br>
<br>
<br>
<p><strong>ì‹¤ë¬´ì—ì„œëŠ” ëª…ì‹œì  ì¡°ì¸ì„ ì‚¬ìš©í•˜ì.</strong></p>
<p><strong>ì¡°ì¸ì€ SQL íŠœë‹ì— ì¤‘ìš” í¬ì¸íŠ¸</strong></p>
<p><strong>ë¬µì‹œì  ì¡°ì¸ì€ ì¡°ì¸ì´ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì„ í•œëˆˆì— íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€</strong></p>
<br>
<br>
<br>
<h2 id="2-jpql---í˜ì¹˜-ì¡°ì¸-fetchjoin">2. JPQL - í˜ì¹˜ ì¡°ì¸ (fetchjoin)</h2>
<hr>
<ul>
<li>SQL ì¡°ì¸ ì¢…ë¥˜ëŠ” ì•„ë‹ˆê³  JPAì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.</li>
<li>JPQLì—ì„œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥.</li>
<li>ì—°ê´€ëœ ì—”í‹°í‹°ë‚˜ ì»¬ë ‰ì…˜ì„ SQL í•œ ë²ˆì— í•¨ê»˜ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥</li>
<li>join fetch ëª…ë ¹ì–´ ì‚¬ìš©</li>
<li>í˜ì¹˜ ì¡°ì¸ :: = [LEFT [OUTER] | INNER ] JOIN FETCH ì¡°ì¸ ê²½ë¡œ</li>
</ul>
<br>
<p><strong>ì—”í‹°í‹° í˜ì¹˜ ì¡°ì¸</strong></p>
<ul>
<li>
<p>íšŒì›ì„ ì¡°íšŒí•˜ë©´ì„œ ì—°ê´€ëœ íŒ€ë„ í•¨ê»˜ ì¡°íšŒ(SQL í•œ ë²ˆì—)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//JPQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">m</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="n">join</span> <span class="n">fetch</span> <span class="n">m</span><span class="o">.</span><span class="na">team</span>

<span class="c1">//SQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">m</span><span class="o">.*</span> <span class="n">t</span><span class="o">.*</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="n">inner</span> <span class="n">join</span> <span class="n">Team</span> <span class="n">t</span> <span class="n">on</span> <span class="n">m</span><span class="o">.</span><span class="na">team_id</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="na">id</span><span class="o">;</span>
</code></pre></div></li>
</ul>
<br>
<ul>
<li>
<p>ë„ì‹í™”</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2037.png"
        data-srcset="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2037.png, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2037.png 1.5x, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2037.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2037.png"
        title="image" /></p>
<p>íŒ€ì´ ìˆëŠ” íšŒì›ì„ ì¡°íšŒí•˜ê³  ì‹¶ì„ ë•Œ fetch joinì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ <code>inner join</code>ì„ ì‚¬ìš©í•œë‹¤.</p>
<p>íŒ€ì´ ì—†ëŠ” íšŒì›ì€ ëˆ„ë½ëœë‹¤.</p>
</li>
</ul>
<br>
<br>
<p><strong>í˜ì¹˜ ì¡°ì¸ ì‚¬ìš© ì½”ë“œ</strong></p>
<ul>
<li>
<p>ê¸°ì¡´ ì—°ê´€ê´€ê³„ ì¡°íšŒ ë¡œì§ì˜ ë¬¸ì œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">jpql</span> <span class="o">=</span> <span class="s">&#34;select m from Member m&#34;</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">jpql</span><span class="o">,</span> <span class="n">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> 
                            <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>

<span class="k">for</span> <span class="o">(</span><span class="n">Member</span> <span class="n">member</span> <span class="o">:</span> <span class="n">members</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;username = &#34;</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;, &#34;</span> <span class="o">+</span>
                    <span class="s">&#34;teamName = &#34;</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getTeam</span><span class="o">().</span><span class="na">name</span><span class="o">());</span>

<span class="c1">//íšŒì›1, íŒ€A(SQL)
</span><span class="c1">//íšŒì›2, íŒ€A(1ì°¨ ìºì‹œ)
</span><span class="c1">//íšŒì›3, íŒ€B(SQL)
</span><span class="c1"></span>
<span class="c1">//íšŒì› 100ëª… -&gt; N + 1
</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p>ìµœì´ˆ jpqlì„ í†µí•´ Memberë¥¼ ì¡°íšŒí•´ ì˜¬ë•Œ Teamì˜ ì •ë³´ëŠ” Proxyê°ì²´ë¡œ ê°€ì§€ê³  ìˆë‹¤. (ì‹¤ì œë¡  ì—†ë‹¤ëŠ” ì˜ë¯¸) <br> ê·¸ë ‡ê¸°ì— ì‹¤ì œë¡œ getTeam().getName()ì„ í†µí•´ íŒ€ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ë ¤ê³  í•  ë•Œ SQLì„ ìˆ˜í–‰í•œë‹¤. <br> ì£¼ì„ ë‚´ìš©ëŒ€ë¡œ í•œë²ˆ ê°€ì ¸ì˜¨ Teamì˜ ì •ë³´ëŠ” 1ì°¨ ìºì‹œì— ì˜¬ë¼ê°€ ìˆê¸° ë•Œë¬¸ì— ë” ì¡°íšŒí•  í•„ìš”ëŠ” ì—†ì§€ë§Œ, <br> íšŒì›ì„ Nëª… ì¡°íšŒí•˜ê²Œ ë˜ì—ˆì„ë•Œ ìµœëŒ€ N + 1 ë²ˆ Team ì¡°íšŒ ì¿¼ë¦¬ê°€ ìˆ˜í–‰ ë  ìˆ˜ ìˆë‹¤.</p>
</li>
</ul>
<br>
<ul>
<li>
<p>í˜ì¹˜ ì¡°ì¸ì„ í†µí•œ í•´ê²°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">jpql</span> <span class="o">=</span> <span class="s">&#34;select m from Member m join fetch m.team&#34;</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">jpql</span><span class="o">,</span> <span class="n">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> 
                            <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>

<span class="k">for</span> <span class="o">(</span><span class="n">Member</span> <span class="n">member</span> <span class="o">:</span> <span class="n">members</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ íšŒì›ê³¼ íŒ€ì„ í•¨ê»˜ ì¡°íšŒí•´ì„œ ì§€ì—° ë¡œë”©X
</span><span class="c1"></span>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;username = &#34;</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;, &#34;</span> <span class="o">+</span>
                        <span class="s">&#34;teamName = &#34;</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getTeam</span><span class="o">().</span><span class="na">name</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div><p>í˜ì¹˜ì¡°ì¸ì€ ì¡°íšŒ ë‹¹ì‹œì— ì‹¤ì œ ì—”í‹°í‹°ê°€ ë‹´ê¸´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì§€ì—°ë¡œë”© ì—†ì´ ë°”ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>
</li>
</ul>
<br>
<br>
<h3 id="ì‹¤ë¬´ì—ì„œ-ìì£¼-ì‚¬ìš©ëœë‹¤">ì‹¤ë¬´ì—ì„œ ìì£¼ ì‚¬ìš©ëœë‹¤.</h3>
<br>
<br>
<p><strong>ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸</strong></p>
<ul>
<li>ì¼ëŒ€ë‹¤ ê´€ê³„, ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//JPQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">t</span> <span class="n">from</span> <span class="n">Team</span> <span class="n">t</span> <span class="n">join</span> <span class="n">fetch</span> <span class="n">t</span><span class="o">.</span><span class="na">members</span> <span class="n">where</span> <span class="n">t</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">íŒ€A</span><span class="err">&#39;</span><span class="o">;</span>

<span class="c1">//SQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">t</span><span class="o">.*,</span> <span class="n">m</span><span class="o">.*</span> <span class="n">from</span> <span class="n">team</span> <span class="n">t</span><span class="o">,</span> <span class="n">inner</span> <span class="n">join</span> <span class="n">member</span> <span class="n">m</span> <span class="n">on</span> <span class="n">t</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="na">team_id</span>
    <span class="n">where</span> <span class="n">t</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">íŒ€A</span><span class="err">&#39;</span><span class="o">;</span>
</code></pre></div><p>ì´ë¥¼ ìˆ˜í–‰í•˜ë©´ Teamì€ í•˜ë‚˜ì§€ë§Œ Memberê°€ 1ê°œ ì´ìƒì¼ ìˆ˜ ìˆë‹¤.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2038.png"
        data-srcset="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2038.png, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2038.png 1.5x, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2038.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2038.png"
        title="image" /></p>
<p>íŒ€AëŠ” 1ê°œì´ì§€ë§Œ ê·¸ì— í•´ë‹¹í•˜ëŠ” ë©¤ë²„ëŠ” íšŒì›1ê³¼ íšŒì›2ë¡œ ë‘ê°œì´ê¸° ë•Œë¬¸ì—, ì¡°íšŒ ê²°ê³¼ëŠ” ìœ„ í‘œì²˜ëŸ¼ 2ê°œì˜ rowê°€ ëœë‹¤.</p>
<br>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2039.png"
        data-srcset="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2039.png, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2039.png 1.5x, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2039.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2039.png"
        title="image" /></p>
<p>íŒ€ì€ í•˜ë‚˜ì´ê¸°ì— ê°™ì€ ì£¼ì†Œê°’ì„ ê°€ì§„ ê²°ê³¼ê°€ ë‘ê°œê°€ ë‚˜ì˜¤ê³  íŒ€Aì˜ ì…ì¥ì—ì„œëŠ” íšŒì›1, íšŒì›2ë¥¼ ê°€ì§„ë‹¤.</p>
<br>
<br>
<p><strong>ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸ ì‚¬ìš© ì½”ë“œ</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">jpql</span> <span class="o">=</span> <span class="s">&#34;select t from Team t join fetch t.members where t.name = &#39;íŒ€A&#39;&#34;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Team</span><span class="o">&gt;</span> <span class="n">teams</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">jpql</span><span class="o">,</span> <span class="n">Team</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Team</span> <span class="n">team</span> <span class="o">:</span> <span class="n">teams</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;teamname = &#34;</span> <span class="o">+</span> <span class="n">team</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;, team = &#34;</span> <span class="o">+</span> <span class="n">team</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Member</span> <span class="n">member</span> <span class="o">:</span> <span class="n">team</span><span class="o">.</span><span class="na">getMembers</span><span class="o">())</span> <span class="o">{</span>
        <span class="c1">//í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ íŒ€ê³¼ íšŒì›ì„ í•¨ê»˜ ì¡°íšŒí•´ì„œ ì§€ì—° ë¡œë”© ë°œìƒ ì•ˆí•¨
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;-&gt;username = &#34;</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()+</span> <span class="s">&#34;, member = &#34;</span> <span class="o">+</span> <span class="n">member</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><br>
<br>
<p><strong>í˜ì¹˜ ì¡°ì¸ê³¼ DISTINCT</strong></p>
<br>
<br>
<h3 id="previous-teamì„-fetch-join-í•´ì„œ-ê°€ì ¸ì™”ì„-ê²½ìš°-ì‚¬ì´ì¦ˆëŠ”-ì–´ë–»ê²Œ-ë‚˜ì˜¬-ê²ƒì¸ê°€">previous: Teamì„ fetch join í•´ì„œ ê°€ì ¸ì™”ì„ ê²½ìš° ì‚¬ì´ì¦ˆëŠ” ì–´ë–»ê²Œ ë‚˜ì˜¬ ê²ƒì¸ê°€</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select t from Team t&#34;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">query2</span> <span class="o">=</span> <span class="s">&#34;select t from Team t join fetch t.members&#34;</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Team</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">query</span><span class="o">,</span> <span class="n">Team</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Team</span><span class="o">&gt;</span> <span class="n">result2</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">query2</span><span class="o">,</span> <span class="n">Team</span> <span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;result size::&#34;</span><span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="na">size</span><span class="o">());</span> <span class="c1">//2
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;result2 size::&#34;</span><span class="o">+</span> <span class="n">result2</span><span class="o">.</span><span class="na">size</span><span class="o">());</span><span class="c1">//3
</span></code></pre></div><ul>
<li>
<p>ì¼ëŒ€ë‹¤(1:N) ê´€ê³„ì—ì„œëŠ” join fetch ê²°ê³¼ê°€ ë»¥íŠ€ê¸° ë  ìˆ˜ ìˆë‹¤.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2040.png"
        data-srcset="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2040.png, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2040.png 1.5x, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2040.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2040.png"
        title="image" /></p>
<p>íŒ€AëŠ” í•˜ë‚˜ì§€ë§Œ ROWëŠ” 2ê°œë¡œ ë»¥íŠ€ê¸° ë˜ì—ˆë‹¤</p>
<br>
<br>
</li>
<li>
<p>SQLì˜ DISTINCTëŠ” ì¤‘ë³µëœ ê²°ê³¼ë¥¼ ì œê±°í•˜ëŠ” ëª…ë ¹</p>
</li>
<li>
<p>JPQLì˜ DISTINCT 2ê°€ì§€ ê¸°ëŠ¥ ì œê³µ</p>
<ol>
<li>SQLì— DISTINCTë¥¼ ì¶”ê°€</li>
<li>ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì—”í‹°í‹° ì¤‘ë³µ ì œê±°</li>
</ol>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">select</span> <span class="n">distinct</span> <span class="n">t</span> <span class="n">from</span> <span class="n">Team</span> <span class="n">t</span> <span class="n">join</span> <span class="n">fetch</span> <span class="n">t</span><span class="o">.</span><span class="na">members</span> <span class="n">where</span> <span class="n">t</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">íŒ€A</span><span class="err">&#39;</span><span class="o">;</span>
</code></pre></div><p>ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ SQLì— DISTINCTë¥¼ ì¶”ê°€í•˜ì§€ë§Œ ë°ì´í„°ê°€ ë‹¤ë¥´ë¯€ë¡œ SQLê²°ê³¼ì—ì„œ ì¤‘ë³µì œê±° ì‹¤íŒ¨</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2041.png"
        data-srcset="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2041.png, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2041.png 1.5x, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2041.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2041.png"
        title="image" /></p>
<p>ID(PK)ë„ ë‹¤ë¥´ê³  NAMEë„ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì¤‘ë³µì œê±° ì‹¤íŒ¨</p>
<br>
<ul>
<li>
<p>ì¿¼ë¦¬ë§Œìœ¼ë¡œëŠ” ì¤‘ë³µì œê±°ê°€ ì•ˆë˜ê¸° ë•Œë¬¸ì— JPA ì¶”ê°€ì ìœ¼ë¡œ DISTINCTê°€ ì¶”ê°€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¤‘ë³µ ì œê±°ë¥¼ ì‹œë„í•œë‹¤.</p>
</li>
<li>
<p>ê°™ì€ ì‹ë³„ìë¥¼ ê°€ì§„ Team ì—”í‹°í‹° ì œê±°</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2042.png"
        data-srcset="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2042.png, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2042.png 1.5x, https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2042.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/jaeyeonme/blog@main/static/images/JPA/Untitled%2042.png"
        title="image" /></p>
</li>
</ul>
<br>
<br>
<h3 id="ë°˜ëŒ€ë¡œ-ë‹¤ëŒ€ì¼n1ì€-ë»¥íŠ€ê¸°-ë˜ì§€-ì•ŠëŠ”ë‹¤">ë°˜ëŒ€ë¡œ ë‹¤ëŒ€ì¼(N:1)ì€ ë»¥íŠ€ê¸° ë˜ì§€ ì•ŠëŠ”ë‹¤.</h3>
<br>
<p><strong>í˜ì¹˜ ì¡°ì¸ê³¼ ì¼ë°˜ ì¡°ì¸ì˜ ì°¨ì´</strong></p>
<ul>
<li>ì¼ë°˜ ì¡°ì¸ ì‹¤í–‰ì‹œ ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ í•¨ê»˜ ì¡°íšŒí•˜ì§€ ì•ŠìŒ.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//JPQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">from</span> <span class="n">Team</span> <span class="n">t</span> <span class="n">join</span> <span class="n">t</span><span class="o">.</span><span class="na">members</span> <span class="n">m</span> <span class="n">where</span> <span class="n">t</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">íŒ€A</span><span class="err">&#39;</span><span class="o">;</span>

<span class="c1">//SQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">t</span><span class="o">.*</span> <span class="n">from</span> <span class="n">Team</span> <span class="n">t</span> <span class="n">inner</span> <span class="n">join</span> <span class="n">member</span> <span class="n">m</span> <span class="n">on</span> <span class="n">t</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="na">team_id</span>
    <span class="n">where</span> <span class="n">t</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">íŒ€A</span><span class="err">&#39;</span><span class="o">;</span>
</code></pre></div><p>í•´ë‹¹ ì¿¼ë¦¬ ìˆ˜í–‰ì‹œ ì¼ë°˜ ì¡°ì¸ì€ ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ë¨¼ì € ì¡°íšŒí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í”„ë¡ì‹œ ê°ì²´ ë°˜í™˜.</p>
<p>ì‹¤ì œë¡œ í•´ë‹¹ ì—”í‹°í‹°ë¥¼ ì‚¬ìš©í•  ë•Œ ì‹¤ì œ ê°’ì„ ì¡°íšŒí•œë‹¤.</p>
<p>ë°˜ë©´, í˜ì¹˜ ì¡°ì¸ì€ ì¡°íšŒì‹œ ì—°ê´€ê´€ê³„ë„ ê°™ì´ ì¡°íšŒ(ì¦‰ì‹œ ë¡œë”©)</p>
<p>í˜ì¹˜ ì¡°ì¸ì€ ê°ì²´ ê·¸ë˜í”„ë¥¼ SQL í•œ ë²ˆì— ì¡°íšŒí•˜ëŠ” ê°œë…ì´ë‹¤.</p>
<br>
<br>
<p><strong>í˜ì¹˜ ì¡°ì¸ì˜ íŠ¹ì§•ê³¼ í•œê³„</strong></p>
<ul>
<li>
<p>í˜ì¹˜ ì¡°ì¸ ëŒ€ìƒì—ëŠ” ë³„ì¹­ì„ ì¤„ ìˆ˜ ì—†ë‹¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select t from Team t join fetch t.members as m&#34;</span>
<span class="c1">//as m ì´ë¼ëŠ” ë³„ì¹­(alias)ëŠ” fetch joinì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
</span></code></pre></div><p>í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ, ê°€ê¸‰ì  ì‚¬ìš©ì„ í•˜ì§€ ì•ŠëŠ”ê²Œ ì¢‹ë‹¤</p>
<p>â†’ ex: íŒ€ì„ ì¡°íšŒí•˜ëŠ” ìƒí™©ì—ì„œ ë©¤ë²„ê°€ 5ëª…ì¸ë° 3ëª…ë§Œ ì¡°íšŒí•œ ê²½ìš° 3ëª…ë§Œ ë”°ë¡œ ì¡°ì‘í•˜ëŠ” ê²ƒì€ ëª¹ì‹œ ìœ„í—˜.</p>
  <br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select t from Team t join fetch t.members as m where m.age &gt; 10&#34;</span>
</code></pre></div><ul>
<li>ê¸°ë³¸ì ìœ¼ë¡œ JPAì—ì„œ ì„¤ê³„ì‚¬ìƒì€ ê°ì²´ ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•œë‹¤ëŠ” ê²ƒì€ ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ëª¨ë‘ <br> ê°€ì ¸ì˜¨ë‹¤ëŠ” ê²ƒì„ ê°€ì •í•˜ê³  ë§Œë“¤ì–´ì¡Œë‹¤.</li>
<li>fetch joinì— ë³„ì¹­ì„ ë¶™íˆê³  whereì ˆì„ ë”í•´ í•„í„°í•´ì„œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê²Œ ë˜ë©´ ëª¨ë“ ê±¸ <br> ê°€ì ¸ì˜¨ ê²°ê³¼ì™€ ë¹„êµí•˜ì—¬ ë‹¤ë¥¸ ê°¯ìˆ˜ì— ëŒ€í•´ì„œ ì •í•©ì„±ì„ ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
</ul>
</li>
</ul>
<br>
<ul>
<li>
<p>ë‘˜ ì´ìƒì˜ ì»¬ë ‰ì…˜ì€ í˜ì¹˜ ì¡°ì¸ í•  ìˆ˜ ì—†ë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">tring</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select t from Team t join fetch t.members, t.orders&#34;</span>
<span class="c1">//ë¶ˆê°€ëŠ¥ fetch joinì—ì„œ ì»¬ë ‰ì…˜ì€ 1ê°œë§Œ ì‚¬ìš©í•˜ì.
</span></code></pre></div></li>
</ul>
<br>
<ul>
<li>
<p>ì»¬ë ‰ì…˜ì„ í˜ì¹˜ ì¡°ì¸í•˜ë©´ í˜ì´ì§• APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</p>
<ul>
<li>
<p>ì¼ëŒ€ì¼, ë‹¤ëŒ€ì¼ ê°™ì€ ë‹¨ì¼ ê°’ ì—°ê´€ í•„ë“œë“¤ì€ í˜ì¹˜ ì¡°ì¸í•´ë„ í˜ì´ì§• ê°€ëŠ¥</p>
</li>
<li>
<p>í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” ê²½ê³  ë¡œê·¸ë¥¼ ë‚¨ê¸°ê³  ë©”ëª¨ë¦¬ì—ì„œ í˜ì´ì§•( ë§¤ìš° ìœ„í—˜)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select t from Team t join fetch t.members&#34;</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Team</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">query</span><span class="o">,</span> <span class="n">Team</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
				    <span class="o">.</span><span class="na">setFirstResult</span><span class="o">(</span><span class="n">0</span><span class="o">)</span>
					<span class="o">.</span><span class="na">setMaxResults</span><span class="o">(</span><span class="n">1</span><span class="o">)</span>
					<span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div></li>
<li>
<p>ì‹¤í–‰ê²°ê³¼</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2043.png"
        data-srcset="https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2043.png, https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2043.png 1.5x, https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2043.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2043.png"
        title="image" /></p>
<p>ê²½ê³  ë¡œê·¸ ì¶œë ¥ í›„ ë©”ëª¨ë¦¬ì—ì„œ í˜ì´ì§• í•˜ëŠ”ë° ì¿¼ë¦¬ë¥¼ ë³´ë©´ limit offsetì´ ì—†ë‹¤.</p>
  <br>
</li>
</ul>
</li>
</ul>
<p><strong>ê·¸ëƒ¥ ì“°ì§€ ë§ì!</strong></p>
<br>
<br>
<h3 id="í•´ê²°-ë°©ì•ˆ">í•´ê²° ë°©ì•ˆ</h3>
<ul>
<li>
<p>ì¼ëŒ€ë‹¤ë¥¼ ë‹¤ëŒ€ì¼ë¡œ ë°©í–¥ì„ ì „í™˜í•˜ì—¬ í•´ê²°í•œë‹¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select m from Member m join fetch m.team t&#34;</span><span class="o">;</span>
</code></pre></div></li>
<li>
<p>BatchSize()</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Team</span><span class="o">{</span>
<span class="o">...</span>

<span class="nd">@BatchSize</span><span class="o">(</span><span class="n">size</span> <span class="o">=</span> <span class="n">100</span><span class="o">)</span>
<span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">&#34;team&#34;</span><span class="o">)</span>
<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">members</span><span class="o">;</span>
<span class="o">...</span>
<span class="o">}</span>

<span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select t from Team t&#34;</span><span class="o">;</span>
</code></pre></div><p>ì§€ì—°ë¡œë”© ìƒíƒœì´ì§€ë§Œ, ì¡°íšŒí•  ë•Œ membersë¥¼ BatchSizeì˜ sizeë§Œí¼ ì¡°íšŒí•´ ì˜¨ë‹¤.</p>
<p>BatchSize()ëŠ” ê¸€ë¡œë²Œ ì„¤ì •ìœ¼ë¡œ í•  ìˆ˜ë„ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//persistence.xml
</span><span class="c1"></span><span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;hibernate.default_batch_fetch_size&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;100&#34;</span><span class="o">/&gt;</span>
</code></pre></div></li>
</ul>
<br>
<ul>
<li>ì—°ê´€ëœ ì—”í‹°í‹°ë“¤ì„ SQLí•œ ë²ˆìœ¼ë¡œ ì¡°íšŒ - ì„±ëŠ¥ ìµœì í™”</li>
<li>ì—”í‹°í‹°ì— ì§ì ‘ ì ìš©í•˜ëŠ” ê¸€ë¡œë²Œ ë¡œë”© ì „ëµë³´ë‹¤ ìš°ì„ í•¨
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@OneToMany</span><span class="o">(</span><span class="n">fetch</span> <span class="o">=</span> <span class="n">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">)</span><span class="c1">//ê¸€ë¡œë²Œ ë¡œë”© ì „ëµ
</span></code></pre></div></li>
<li>ì‹¤ë¬´ì—ì„œ ê¸€ë¡œë²Œ ë¡œë”© ì „ëµì€ ëª¨ë‘ ì§€ì—° ë¡œë”©</li>
<li>ìµœì í™”ê°€ í•„ìš”í•œ ê³³ì€ í˜ì¹˜ ì¡°ì¸ ì ìš©</li>
</ul>
<br>
<br>
<p><strong>í˜ì¹˜ ì¡°ì¸ - ì •ë¦¬</strong></p>
<ul>
<li>ëª¨ë“  ê²ƒì„ í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ëŠ” ì—†ë‹¤.</li>
<li>í˜ì¹˜ ì¡°ì¸ì€ ê°ì²´ ê·¸ë˜í”„ë¥¼ ìœ ì§€í•  ë•Œ ì‚¬ìš©í•˜ë©´ íš¨ê³¼ì ì´ë‹¤.</li>
<li>ì—¬ëŸ¬ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì„œ ì—”í‹°í‹°ê°€ ì•„ë‹Œ ì „í˜€ ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ë‚´ì•¼ í•˜ë©´, í˜ì¹˜ ì¡°ì¸ ë³´ë‹¤ëŠ” ì¼ë°˜ ì¡°ì¸ì„ ì‚¬ìš©í•˜ê³  <br> í•„ìš”í•œ ë°ì´í„°ë“¤ë§Œ ì¡°íšŒí•´ì„œ DTOë¡œ ë°˜í™˜í•˜ëŠ” ê²ƒì´ íš¨ê³¼ì </li>
</ul>
<br>
<br>
<br>
<h2 id="3-ë‹¤í˜•ì„±-ì¿¼ë¦¬">3. ë‹¤í˜•ì„± ì¿¼ë¦¬</h2>
<hr>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2044.png"
        data-srcset="https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2044.png, https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2044.png 1.5x, https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2044.png 2x"
        data-sizes="auto"
        alt="https://cdn.jsdelivr.net/gh/jaeyeonme/jaeyeonme.github.io@master/assets/img/JPA/Untitled%2044.png"
        title="image" /></p>
<br>
<br>
<p><strong>TYPE</strong></p>
<ul>
<li>ì¡°íšŒ ëŒ€ìƒì„ íŠ¹ì • ìì‹ìœ¼ë¡œ í•œì •</li>
<li>ex: Item ì¤‘ Book, Movieë¥¼ ì¡°íšŒí•´ë¼</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//JPQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">i</span> <span class="n">from</span> <span class="n">Item</span> <span class="n">i</span> <span class="n">where</span> <span class="nf">type</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="n">IN</span><span class="o">(</span><span class="n">Book</span><span class="o">,</span> <span class="n">Movie</span><span class="o">)</span>

<span class="c1">//SQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">i</span> <span class="n">from</span> <span class="n">Item</span> <span class="n">i</span> <span class="n">where</span> <span class="n">i</span><span class="o">.</span><span class="na">DTYPE</span> <span class="nf">in</span><span class="o">(</span><span class="sc">&#39;B&#39;</span><span class="o">,</span> <span class="sc">&#39;M&#39;</span><span class="o">);</span>
</code></pre></div><br>
<br>
<p><strong>TREAT(JPA2.1)</strong></p>
<ul>
<li>
<p>ìë°”ì˜ íƒ€ì… ìºìŠ¤íŒ…ê³¼ ìœ ì‚¬(í˜•ë³€í™˜)</p>
</li>
<li>
<p>ìƒì† êµ¬ì¡°ì—ì„œ ë¶€ëª¨ íƒ€ì…ì„ íŠ¹ì • ìì‹ íƒ€ì…ìœ¼ë¡œ ë‹¤ë£° ë•Œ ì‚¬ìš©</p>
</li>
<li>
<p>FROM, WHERE, SELECT(í•˜ì´ë²„ë„¤ì´íŠ¸ ì§€ì›)ì‚¬ìš©</p>
</li>
<li>
<p><strong>ex:</strong> ë¶€ëª¨ë‹˜ Itemê³¼ ìì‹ Bookì´ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//JPQL
</span><span class="c1"></span><span class="n">select</span> <span class="n">from</span> <span class="n">Item</span> <span class="n">i</span> <span class="n">where</span> <span class="nf">treat</span><span class="o">(</span><span class="n">i</span> <span class="n">as</span> <span class="n">Book</span><span class="o">).</span><span class="na">author</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">kim</span><span class="err">&#39;</span><span class="o">;</span>

<span class="c1">//SQL[
</span><span class="c1"></span><span class="n">select</span> <span class="n">i</span><span class="o">.*</span> <span class="n">from</span> <span class="n">Item</span> <span class="n">i</span> <span class="n">where</span> <span class="n">i</span><span class="o">.</span><span class="na">DTYPE</span> <span class="o">=</span> <span class="sc">&#39;B&#39;</span> <span class="n">and</span> <span class="n">i</span><span class="o">.</span><span class="na">author</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">kim</span><span class="err">&#39;</span><span class="o">;</span>
</code></pre></div></li>
</ul>
<br>
<br>
<br>
<h2 id="4-ì—”í‹°í‹°-ì§ì ‘-ì‚¬ìš©">4. ì—”í‹°í‹° ì§ì ‘ ì‚¬ìš©</h2>
<hr>
<h3 id="ê¸°ë³¸-í‚¤-ê°’">ê¸°ë³¸ í‚¤ ê°’</h3>
<ul>
<li>
<p>JPQLì—ì„œ ì—”í‹°í‹°ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë©´ SQLì—ì„œ í•´ë‹¹ ì—”í‹°í‹°ì˜ ê¸°ë³¸ í‚¤ ê°’ì„ ì‚¬ìš©</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//JPQL
</span><span class="c1"></span><span class="n">select</span> <span class="nf">count</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">id</span><span class="o">)</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="c1">//ì—”í‹°í‹°ì˜ ì•„ì´ë””ë¥¼ ì‚¬ìš©
</span><span class="c1"></span><span class="n">select</span> <span class="nf">count</span><span class="o">(</span><span class="n">m</span><span class="o">)</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="c1">//ì—”í‹°í‹°ë¥¼ ì§ì ‘ ì‚¬ìš©
</span><span class="c1"></span>
<span class="c1">//SQL(JPQL ë‘˜ ë‹¤ ê°™ì€ ë‹¤ìŒ SQL ì‹¤í–‰)
</span><span class="c1"></span><span class="n">select</span> <span class="nf">count</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">id</span><span class="o">)</span> <span class="n">as</span> <span class="n">cnt</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span>
<span class="n">Java</span>
</code></pre></div></li>
<li>
<p>íŒŒë¼ë¯¸í„°ë¥¼ ì—”í‹°í‹°ë¥¼ ë„˜ê²¨ì£¼ê±°ë‚˜ ì‹ë³„ìë¥¼ ë„˜ê²¨ì£¼ë”ë¼ë„ ì‹¤í–‰ëœ SQLì€ ê°™ë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*ì—”í‹°í‹°ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬*/</span>
<span class="n">String</span> <span class="n">jpql</span> <span class="o">=</span> <span class="s">&#34;select m from Member m where m = :member&#34;</span><span class="o">;</span>
<span class="n">List</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">jpql</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;member&#34;</span><span class="o">,</span> <span class="n">member</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>

<span class="cm">/*ì‹ë³„ìë¥¼ ì§ì ‘ ì „ë‹¬*/</span>
<span class="n">String</span> <span class="n">jpql</span> <span class="o">=</span> <span class="s">&#34;select m from Member m where m.id = :memberId&#34;</span><span class="o">;</span>
<span class="n">List</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">jpql</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;memberId&#34;</span><span class="o">,</span> <span class="n">memberId</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div><p>ìœ„ ë‘ JPQLì˜ ì‹¤í–‰ SQLì€ ì•„ë˜ì™€ ê°™ì´ ë™ì¼í•˜ë‹¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">select</span> <span class="n">m</span><span class="o">.*</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="n">where</span> <span class="n">m</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="o">?</span>
</code></pre></div></li>
</ul>
<br>
<br>
<h3 id="ì™¸ë˜-í‚¤-ê°’">ì™¸ë˜ í‚¤ ê°’</h3>
<ul>
<li>
<p>ê¸°ë³¸í‚¤ì™€ ë¡œì§ì€ ë™ì¼í•˜ë‹¤. ì—”í‹°í‹° or ì™¸ë˜ í‚¤ë¥¼ ì“°ë©´ ì‹¤í–‰ SQLì€ ë™ì¼í•˜ë‹¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">Team</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">1L</span><span class="o">);</span>

<span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select m from Member m where m.team = :team&#34;</span><span class="o">;</span>
<span class="n">List</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">query</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;team&#34;</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>

<span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select m from Member m where m.team.id = :teamId&#34;</span><span class="o">;</span>
<span class="n">List</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">query</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;teamId&#34;</span><span class="o">,</span> <span class="n">teamId</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div><p>ì‹¤í–‰ëœ SQL</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">select</span> <span class="n">m</span><span class="o">.*</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="n">where</span> <span class="n">m</span><span class="o">.</span><span class="na">team_id</span> <span class="o">=</span> <span class="o">?</span>
</code></pre></div></li>
</ul>
<br>
<br>
<br>
<h2 id="5-named-ì¿¼ë¦¬">5. Named ì¿¼ë¦¬</h2>
<hr>
<ul>
<li>
<p>ë¯¸ë¦¬ ì •ì˜í•´ì„œ ì´ë¦„ì„ ë¶€ì—¬í•´ë‘ê³  ì‚¬ìš©í•˜ëŠ” JPQL</p>
</li>
<li>
<p>ì •ì  ì¿¼ë¦¬</p>
</li>
<li>
<p>ì–´ë…¸í…Œì´ì…˜, XMLì— ì •ì˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Entity</span>
<span class="nd">@NamedQuery</span><span class="o">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s">&#34;Member.findByUsername&#34;</span><span class="o">,</span>
    <span class="n">query</span><span class="o">=</span><span class="s">&#34;select m from Member m where m.username = :username&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<span class="o">...</span>
<span class="o">}</span>

<span class="o">...</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">&#34;Member.findByUsername&#34;</span><span class="o">,</span> <span class="n">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">,</span> <span class="s">&#34;íšŒì›1&#34;</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div><ul>
<li>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì— ì´ˆê¸°í™” í›„ ì¬ì‚¬ìš©</p>
<p>â†’ JPAëŠ” ê²°êµ­ SQLë¡œ parsing ë˜ì–´ ì‚¬ìš©ë˜ëŠ”ë° ë¡œë”© ì‹œì ì— ì´ˆê¸°í™”ê°€ ëœë‹¤ë©´ parsing costë¥¼ ì ˆì•½ ê°€ëŠ¥.</p>
</li>
<li>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì— ì¿¼ë¦¬ë¥¼ ê²€</p>
</li>
</ul>
</li>
</ul>
<br>
<br>
<p><strong>XMLì— ì •ì˜</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">//[META_INF?persistence.xml]
</span><span class="c1"></span><span class="o">&lt;</span><span class="n">persistence</span><span class="o">-</span><span class="n">unit</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;jpabook&#34;</span><span class="o">&gt;</span>
		<span class="o">&lt;</span><span class="n">mapping</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span><span class="n">META</span><span class="o">-</span><span class="n">INF</span><span class="o">/</span><span class="n">ormMember</span><span class="o">.</span><span class="na">xml</span><span class="o">&lt;/</span><span class="n">mapping</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span>

<span class="c1">//[META-INF/ormMember.xml]
</span><span class="c1"></span><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&#34;1.0&#34;</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="n">entity</span><span class="o">-</span><span class="n">mappings</span> <span class="n">xmlns</span><span class="o">=</span><span class="s">&#34;htt://xmlns.jcp.org/xml/ns/persistence/orm&#34;</span> <span class="n">version</span><span class="o">=</span><span class="s">&#34;2.1&#34;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">named</span><span class="o">-</span><span class="n">query</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;Member.findByUsername&#34;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">query</span><span class="o">&gt;</span>
                    <span class="o">&lt;![</span><span class="n">CDATA</span><span class="o">[</span> <span class="n">select</span> <span class="n">m</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="n">where</span> <span class="n">m</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="o">:</span><span class="n">username</span><span class="o">]]</span>
            <span class="o">&lt;/</span><span class="n">query</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">named</span><span class="o">-</span><span class="n">query</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">entity</span><span class="o">-</span><span class="n">mappings</span><span class="o">&gt;</span>
</code></pre></div><p>ì‚¬ìš©ë²•ì€ @NamedQueryì˜ queryë¥¼ ì‚¬ìš©ë°©ë²•ê³¼ ê°™ë‹¤.</p>
<ul>
<li>NamedQueryì™€ XMLì— ì •ì˜ëˆ Queryì¤‘ XMLì´ í•­ìƒ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤. <br>
â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ìš´ì˜ í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¸ XMLë¥¼ ë°°í¬í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<br>
<br>
<h3 id="springdata-jpaë¥¼-ì‚¬ìš©í•˜ë©´-namedqueryë¥¼-ì´ë¯¸-ì‚¬ìš©">SpringData JPAë¥¼ ì‚¬ìš©í•˜ë©´ NamedQueryë¥¼ ì´ë¯¸ ì‚¬ìš©.</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MemberRepository</span> <span class="kd">extends</span> <span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">,</span> <span class="n">Long</span><span class="o">&gt;{</span>

<span class="nd">@Query</span><span class="o">(</span><span class="s">&#34;select u from User u where u.username = ?1&#34;</span><span class="o">)</span>
<span class="n">Member</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><p><code>@Repository annotation</code>ì´ ë“±ë¡ëœ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©ë˜ëŠ” <code>@Query annotation</code>ì— ìˆëŠ” <br> JPQL (or native)ë“¤ì´ NamedQueryë¡œì¨ ì»´íŒŒì¼ì‹œì— ë“±ë¡ë˜ëŠ” ê²ƒì´ë‹¤.</p>
<br>
<br>
<br>
<h2 id="6-ë²Œí¬-ì—°ì‚°">6. ë²Œí¬ ì—°ì‚°</h2>
<hr>
<ul>
<li>ì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” SQLì˜ update or delete ë¬¸ì„ ìƒê°í•˜ë©´ ëœë‹¤.
<ul>
<li>ex: ì¬ê³ ê°€ 10ê°œ ë¯¸ë§Œì¸ ëª¨ë“  ìƒí’ˆì˜ ê°€ê²©ì„ 10% ìƒìŠ¹í•˜ë ¤ë©´?</li>
</ul>
</li>
<li>JPAì˜ dirty checkë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ˆë¬´ ë§ì€ SQLì´ ì‹¤í–‰ë˜ì•¼ í•œë‹¤.
<ol>
<li>ì¬ê³ ê°€ 10ê°œ ë¯¸ë§Œì¸ ìƒí’ˆì„ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ</li>
<li>ìƒí’ˆ ì—”í‹°í‹°ì˜ ê°€ê²© 10% ì¦ê°€</li>
<li>íŠ¸ëœì­ì…˜ ì»¤ë°‹ ì‹œì ì— dirty checking.</li>
</ol>
</li>
<li>ë³€ê²½ëœ ë°ì´í„°ê°€ 100ê±´ì´ë©´ 100ê±´ì˜ UPDATE SQL ì‹¤í–‰</li>
</ul>
<br>
<br>
<p><strong>Example</strong></p>
<ul>
<li>
<p>ì¿¼ë¦¬ í•œ ë²ˆìœ¼ë¡œ ì—¬ëŸ¬ í…Œì´ë¸” ì—…ë°ì´íŠ¸(ì—”í‹°í‹°)</p>
</li>
<li>
<p>executeUpdate()ì˜ ê²°ê³¼ëŠ” ì˜í–¥ë°›ì€ ì—”í‹°í‹° ìˆ˜ ë°˜í™˜</p>
</li>
<li>
<p>UPDATE, DELETE ì§€ì›</p>
</li>
<li>
<p>INSERT (insert into &hellip; select, í•˜ì´ë²„ë„¤ì´íŠ¸ ì§€ì›)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;update Product p &#34;</span><span class="o">+</span>
                <span class="s">&#34;set p.price = p.price * 1.1 where p.stockAmount &lt; :stockAmount&#34;</span><span class="o">;</span>

<span class="kt">int</span> <span class="n">resultCount</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">qlString</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;stockAmount&#34;</span><span class="o">,</span> <span class="n">10</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
</code></pre></div></li>
</ul>
<br>
<br>
<p><strong>ë²Œí¬ ì—°ì‚° ì£¼ì˜</strong></p>
<ul>
<li>ë²Œí¬ ì—°ì‚°ì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¬´ì‹œí•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ì§ì ‘ ì¿¼ë¦¬
<ul>
<li>
<p>ë²Œí¬ ì—°ì‚°ì„ ë¨¼ì € ì‹¤í–‰</p>
</li>
<li>
<p>ë²Œí¬ ì—°ì‚° ìˆ˜í–‰ í›„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”</p>
<p>â†’ ì—”í‹°í‹° ì¡°íšŒ í›„ ë²Œí¬ì—°ì‚°ìœ¼ë¡œ ì—”í‹°í‹° ì—…ë°ì´íŠ¸ê°€ ë˜ë²„ë¦¬ë©´ DBì˜ ì—”í‹°í‹°ì™€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ì—”í‹°í‹°ê°€ <br> ì„œë¡œ ë‹¤ë¥¸ ê°’ì´ ë˜ê²Œ ëœë‹¤.</p>
</li>
</ul>
</li>
</ul>
<br>
<br>
<br>
<h3 id="ì—”í‹°í‹°-ì§ì ‘-ì‚¬ìš©---ì™¸ë˜-í‚¤-ê°’">ì—”í‹°í‹° ì§ì ‘ ì‚¬ìš© - ì™¸ë˜ í‚¤ ê°’</h3>
<hr>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">Team</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">1L</span><span class="o">);</span>

<span class="n">String</span> <span class="n">qlString</span> <span class="o">=</span> <span class="err">â€œ</span><span class="n">select</span> <span class="n">m</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="n">where</span> <span class="o">**</span><span class="n">m</span><span class="o">.</span><span class="na">team</span> <span class="o">=</span> <span class="o">:</span><span class="n">team</span><span class="err">â€</span><span class="o">**;</span> 
<span class="n">List</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">qlString</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;team&#34;</span><span class="o">,</span> <span class="o">**</span><span class="n">team</span><span class="o">**)</span> 
                        <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">qlString</span> <span class="o">=</span> <span class="err">â€œ</span><span class="n">select</span> <span class="n">m</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="n">where</span> <span class="o">**</span><span class="n">m</span><span class="o">.</span><span class="na">team</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="o">:</span><span class="n">teamId</span><span class="err">â€</span><span class="o">**;</span> 
<span class="n">List</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">qlString</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;teamId&#34;</span><span class="o">,</span> <span class="o">**</span><span class="n">teamId</span><span class="o">**)</span> 
                        <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div><br>
<br>
<p><strong>ì‹¤í–‰ëœ SQL</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">select</span> <span class="n">m</span><span class="o">.*</span> <span class="n">from</span> <span class="n">Member</span> <span class="n">m</span> <span class="n">where</span> <span class="o">**</span><span class="n">m</span><span class="o">.</span><span class="na">team_id</span><span class="o">=?**</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;select m From Member m where m.team = :team&#34;</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">query</span><span class="o">,</span> <span class="n">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;team&#34;</span><span class="o">,</span> <span class="n">teamA</span><span class="o">)</span>
        <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>

<span class="k">for</span> <span class="o">(</span><span class="n">Member</span> <span class="n">member</span> <span class="o">:</span> <span class="n">members</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;member = &#34;</span> <span class="o">+</span> <span class="n">member</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nl">Hibernate:</span> 
    <span class="cm">/* select
</span><span class="cm">        m 
</span><span class="cm">    From
</span><span class="cm">        Member m 
</span><span class="cm">    where
</span><span class="cm">        m.team = :team */</span> <span class="n">select</span>
            <span class="n">member0_</span><span class="o">.</span><span class="na">id</span> <span class="n">as</span> <span class="n">id1_0_</span><span class="o">,</span>
            <span class="n">member0_</span><span class="o">.</span><span class="na">age</span> <span class="n">as</span> <span class="n">age2_0_</span><span class="o">,</span>
            <span class="n">member0_</span><span class="o">.</span><span class="na">TEAM_ID</span> <span class="n">as</span> <span class="n">team_id5_0_</span><span class="o">,</span>
            <span class="n">member0_</span><span class="o">.</span><span class="na">type</span> <span class="n">as</span> <span class="n">type3_0_</span><span class="o">,</span>
            <span class="n">member0_</span><span class="o">.</span><span class="na">username</span> <span class="n">as</span> <span class="n">username4_0_</span> 
        <span class="n">from</span>
            <span class="n">Member</span> <span class="n">member0_</span> 
        <span class="n">where</span>
            <span class="n">member0_</span><span class="o">.</span><span class="na">TEAM_ID</span><span class="o">=?</span>
<span class="n">member</span> <span class="o">=</span> <span class="n">Member</span><span class="o">{</span><span class="n">id</span><span class="o">=</span><span class="n">3</span><span class="o">,</span> <span class="n">username</span><span class="o">=</span><span class="err">&#39;</span><span class="n">íšŒì›1</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">age</span><span class="o">=</span><span class="n">0</span><span class="o">}</span>
<span class="n">member</span> <span class="o">=</span> <span class="n">Member</span><span class="o">{</span><span class="n">id</span><span class="o">=</span><span class="n">4</span><span class="o">,</span> <span class="n">username</span><span class="o">=</span><span class="err">&#39;</span><span class="n">íšŒì›2</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">age</span><span class="o">=</span><span class="n">0</span><span class="o">}</span>
</code></pre></div><br>
<br>
<br>
<h2 id="5-jpql---named-ì¿¼ë¦¬">5. JPQL - Named ì¿¼ë¦¬</h2>
<h3 id="named-ì¿¼ë¦¬---ì •ì -ì¿¼ë¦¬">Named ì¿¼ë¦¬ - ì •ì  ì¿¼ë¦¬</h3>
<hr>
<ul>
<li>ë¯¸ë¦¬ ì •ì˜í•´ì„œ ì´ë¦„ì„ ë¶€ì—¬í•´ë‘ê³  ì‚¬ìš©í•˜ëŠ” JPQL</li>
<li>ì •ì  ì¿¼ë¦¬</li>
<li>ì–´ë…¸í…Œì´ì…˜, XMLì— ì •ì˜</li>
<li>ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì— ì´ˆê¸°í™” í›„ ì¬ì‚¬ìš©</li>
<li><code>ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì— ì¿¼ë¦¬ë¥¼ ê²€ì¦</code></li>
</ul>
<br>
<br>
<h3 id="named-ì¿¼ë¦¬---ì–´ë…¸í…Œì´ì…˜">Named ì¿¼ë¦¬ - ì–´ë…¸í…Œì´ì…˜</h3>
<hr>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Entity</span>
<span class="nd">@NamedQuery</span><span class="o">(</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;Member.findByUsername&#34;</span><span class="o">,</span>
        <span class="n">query</span><span class="o">=</span><span class="s">&#34;select m from Member m where m.username = :username&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">&#34;Member.findByUsername&#34;</span><span class="o">,</span> <span class="n">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">,</span> <span class="s">&#34;íšŒì›1&#34;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>

<span class="k">for</span> <span class="o">(</span><span class="n">Member</span> <span class="n">member</span> <span class="o">:</span> <span class="n">resultList</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;member = &#34;</span> <span class="o">+</span> <span class="n">member</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nl">Hibernate:</span> 
    <span class="cm">/* insert jpql.Member
</span><span class="cm">        */</span> <span class="n">insert</span> 
        <span class="n">into</span>
            <span class="nf">Member</span>
            <span class="o">(</span><span class="n">age</span><span class="o">,</span> <span class="n">TEAM_ID</span><span class="o">,</span> <span class="n">type</span><span class="o">,</span> <span class="n">username</span><span class="o">,</span> <span class="n">id</span><span class="o">)</span> 
        <span class="n">values</span>
            <span class="o">(?,</span> <span class="o">?,</span> <span class="o">?,</span> <span class="o">?,</span> <span class="o">?)</span>
<span class="nl">Hibernate:</span> 
    <span class="cm">/* Member.findByUsername */</span> <span class="n">select</span>
        <span class="n">member0_</span><span class="o">.</span><span class="na">id</span> <span class="n">as</span> <span class="n">id1_0_</span><span class="o">,</span>
        <span class="n">member0_</span><span class="o">.</span><span class="na">age</span> <span class="n">as</span> <span class="n">age2_0_</span><span class="o">,</span>
        <span class="n">member0_</span><span class="o">.</span><span class="na">TEAM_ID</span> <span class="n">as</span> <span class="n">team_id5_0_</span><span class="o">,</span>
        <span class="n">member0_</span><span class="o">.</span><span class="na">type</span> <span class="n">as</span> <span class="n">type3_0_</span><span class="o">,</span>
        <span class="n">member0_</span><span class="o">.</span><span class="na">username</span> <span class="n">as</span> <span class="n">username4_0_</span> 
    <span class="n">from</span>
        <span class="n">Member</span> <span class="n">member0_</span> 
    <span class="n">where</span>
        <span class="n">member0_</span><span class="o">.</span><span class="na">username</span><span class="o">=?</span>
<span class="n">member</span> <span class="o">=</span> <span class="n">Member</span><span class="o">{</span><span class="n">id</span><span class="o">=</span><span class="n">3</span><span class="o">,</span> <span class="n">username</span><span class="o">=</span><span class="err">&#39;</span><span class="n">íšŒì›1</span><span class="err">&#39;</span><span class="o">,</span> <span class="n">age</span><span class="o">=</span><span class="n">0</span><span class="o">}</span>
</code></pre></div><br>
<br>
<h3 id="named-ì¿¼ë¦¬---xmlì—-ì •ì˜">Named ì¿¼ë¦¬ - XMLì— ì •ì˜</h3>
<hr>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml">[META-INF/persistence.xml]
<span class="nt">&lt;persistence-unit</span> <span class="na">name=</span><span class="s">&#34;jpabook&#34;</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;mapping-file&gt;</span>META-INF/ormMember.xml<span class="nt">&lt;/mapping-file&gt;</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml">[META-INF/ormMember.xml]

<span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="nt">&lt;entity-mappings</span> <span class="na">xmlns=</span><span class="s">&#34;http://xmlns.jcp.org/xml/ns/persistence/orm&#34;</span> <span class="na">version=</span><span class="s">&#34;2.1&#34;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;named-query</span> <span class="na">name=</span><span class="s">&#34;Member.findByUsername&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;query&gt;</span><span class="cp">&lt;![CDATA[ 
</span><span class="cp">                    select m from Member m 
</span><span class="cp">                    where m.username = :username 
</span><span class="cp">            ]]&gt;</span><span class="nt">&lt;/query&gt;</span> 
    <span class="nt">&lt;/named-query&gt;</span>

    <span class="nt">&lt;named-query</span> <span class="na">name=</span><span class="s">&#34;Member.count&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;query&gt;</span>select count(m) from Member m<span class="nt">&lt;/query&gt;</span> 
    <span class="nt">&lt;/named-query&gt;</span>

<span class="nt">&lt;/entity-mappings&gt;</span>
</code></pre></div><br>
<br>
<h3 id="named-ì¿¼ë¦¬-í™˜ê²½ì—-ë”°ë¥¸-ì„¤ì •">Named ì¿¼ë¦¬ í™˜ê²½ì— ë”°ë¥¸ ì„¤ì •</h3>
<hr>
<ul>
<li>XMLì´ í•­ìƒ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.</li>
<li>ì• í”Œë¦¬ì¼€ì´ì…˜ ìš´ì˜ í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¸ XMLì„ ë°°í¬í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<br>
<br>
<br>
<h2 id="6-jpql---ë²Œí¬-ì—°ì‚°">6. JPQL - ë²Œí¬ ì—°ì‚°</h2>
<h3 id="ë²Œí¬-ì—°ì‚°">ë²Œí¬ ì—°ì‚°</h3>
<hr>
<ul>
<li>ì¬ê³ ê°€ 10ê°œ ë¯¸ë§Œì¸ ëª¨ë“  ìƒí’ˆì˜ ê°€ê²©ì„ 10% ìƒìŠ¹í•˜ë ¤ë©´?</li>
<li>JPA ë³€ê²½ ê°ì§€ ê¸°ëŠ¥ìœ¼ë¡œ ì‹¤í–‰í•˜ë ¤ë©´ ë„ˆë¬´ ë§ì€ SQL ì‹¤í–‰
<ol>
<li>ì¬ê³ ê°€ 10ê°œ ë¯¸ë§Œì¸ ìƒí’ˆì„ ë¦¬ìŠ¤íŠ¸ë¡œ ì¡°íšŒí•œë‹¤.</li>
<li>ìƒí’ˆ ì—”í‹°í‹°ì˜ ê°€ê²©ì„ 10% ì¦ê°€í•œë‹¤.</li>
<li>íŠ¸ëœì­ì…˜ ì»¤ë°‹ ì‹œì ì— ë³€ê²½ê°ì§€ê°€ ë™ì‘í•œë‹¤.</li>
</ol>
</li>
<li>ë³€ê²½ëœ ë°ì´í„°ê°€ 100ê±´ì´ë¼ë©´ 100ë²ˆì˜ UPDATE SQL ì‹¤í–‰</li>
</ul>
<br>
<br>
<h3 id="ë²Œí¬-ì—°ì‚°-ì˜ˆì œ">ë²Œí¬ ì—°ì‚° ì˜ˆì œ</h3>
<hr>
<ul>
<li>ì¿¼ë¦¬ í•œ ë²ˆìœ¼ë¡œ ì—¬ëŸ¬ í…Œì´ë¸” ë¡œìš° ë³€ê²½(ì—”í‹°í‹°)</li>
<li><code>executeUpdate()ì˜ ê²°ê³¼ëŠ” ì˜í–¥ë°›ì€ ì—”í‹°í‹° ìˆ˜ ë°˜í™˜</code></li>
<li><code>UPDATE, DELETE ì§€ì›</code></li>
<li><code>INSERT(insert into .. select, í•˜ì´ë²„ë„¤ì´íŠ¸ ì§€ì›)</code></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">// FLUSH ìë™ í˜¸ì¶œ
</span><span class="c1"></span><span class="kt">int</span> <span class="n">resultCount</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">&#34;update Member m set m.age = 20&#34;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;resultCount = &#34;</span> <span class="o">+</span> <span class="n">resultCount</span><span class="o">);</span>
</code></pre></div><br>
<br>
<h3 id="ë²Œí¬-ì—°ì‚°-ì£¼ì˜">ë²Œí¬ ì—°ì‚° ì£¼ì˜</h3>
<hr>
<ul>
<li>ë²Œí¬ ì—°ì‚°ì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¬´ì‹œí•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ì§ì ‘ ì¿¼ë¦¬
<ul>
<li>
<p>ë²Œí¬ ì—°ì‚°ì„ ë¨¼ì € ì‹¤í–‰</p>
</li>
<li>
<p><code>ë²Œí¬ ì—°ì‚° ìˆ˜í–‰ í›„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">// FLUSH ìë™ í˜¸ì¶œ
</span><span class="c1"></span><span class="kt">int</span> <span class="n">resultCount</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">&#34;update Member m set m.age = 20&#34;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>

<span class="n">em</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>

<span class="n">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">member1</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;findMember = &#34;</span> <span class="o">+</span> <span class="n">findMember</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
</code></pre></div></li>
</ul>
</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2021-12-30</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://jaeyeonme.github.io/posts/jpa-object-query-language2/" data-title="ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ì¤‘ê¸‰ ë¬¸ë²•" data-hashtags="JPA,Hibernate"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://jaeyeonme.github.io/posts/jpa-object-query-language2/" data-hashtag="JPA"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://jaeyeonme.github.io/posts/jpa-object-query-language2/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Share on Blogger" data-sharer="blogger" data-url="https://jaeyeonme.github.io/posts/jpa-object-query-language2/" data-title="ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ì¤‘ê¸‰ ë¬¸ë²•" data-description=""><i class="fab fa-blogger fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/jpa/">JPA</a>,&nbsp;<a href="/tags/hibernate/">Hibernate</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/jpa-object-query-language1/" class="prev" rel="prev" title="ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ê¸°ë³¸ ë¬¸ë²•"><i class="fas fa-angle-left fa-fw"></i>ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ê¸°ë³¸ ë¬¸ë²•</a>
            <a href="/posts/spring-data-jpa-common-interface/" class="next" rel="next" title="ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ê¸°ëŠ¥">ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ê¸°ëŠ¥<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><script src="https://utteranc.es/client.js"
                        repo="jaeyeonme/blog_comments"
                        issue-term="pathname"
                        theme="preferred-color-scheme"
                        crossorigin="anonymous"
                        async>
                </script><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://utteranc.es/">Utterances</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.91.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Jaeyeon</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":500},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"","lightTheme":"github-light","repo":"jaeyeonme/blog_comments"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
