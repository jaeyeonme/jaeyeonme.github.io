<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>QueryDSL ê¸°ë³¸ ë¬¸ë²• - ğŸ“š | Dev Blog</title><meta name="Description" content=""><meta property="og:title" content="QueryDSL ê¸°ë³¸ ë¬¸ë²•" />
<meta property="og:description" content="JPQL VS QueryDSL QueryDSL vs JPQL @Test public void startJQPL() { // member1ì„ ì°¾ì•„ë¼  String qlString = &#34;select m from Member m &#34; &#43; &#34;where m.username = :username&#34;; Member findMember = em.createQuery(qlString, Member.class) .setParameter(&#34;username&#34;, &#34;member1&#34;) .getSingleResult(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } @Test public void startQuerydsl() { // member1ì„ ì°¾ì•„ë¼.  JPAQueryFactory queryFactory = new JPAQueryFactory(em); QMember m = new QMember(&#34;m&#34;); Member findMember = queryFactory .select(m) .from(m) .where(m.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  EntityManager ë¡œ JPAQueryFactory ìƒì„± Querydslì€ JPQL ë¹Œë” JPQL : ë¬¸ì(ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜), Querydsl : ì½”ë“œ(ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜) JPQL : íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì§ì ‘, Querydsl : íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ìë™ ì²˜ë¦¬  JPAQueryFactoryë¥¼ í•„ë“œë¡œ @SpringBootTest @Transactional public class QuerydslBasicTest { @Autowired EntityManager em; JPAQueryFactory queryFactory; @BeforeEach public void before() { queryFactory = new JPAQueryFactory(em); // ... 	} @Test public void startQuerydsl() { // member1ì„ ì°¾ì•„ë¼.  QMember m = new QMember(&#34;m&#34;); Member findMember = queryFactory .select(m) .from(m) .where(m.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } }  JPAQueryFactoryë¥¼ í•„ë“œë¡œ ì œê³µí•˜ë©´ ë™ì‹œì„± ë¬¸ì œëŠ” ì–´ë–»ê²Œ ë ê¹Œ? ë™ì‹œì„± ë¬¸ì œëŠ” JPAQueryFactoryë¥¼ ìƒì„±í•  ë•Œ ì œê³µí•˜ëŠ” EntityManager(em)ì— ë‹¬ë ¤ìˆë‹¤. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ê°™ì€ EntityManagerì— ì ‘ê·¼í•´ë„, íŠ¸ëœì­ì…˜ ë§ˆë‹¤ ë³„ë„ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì—, ë™ì‹œì„± ë¬¸ì œëŠ” ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.  ê¸°ë³¸ Q-Type í™œìš© Qí´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²• QMember qMember = new QMember(&#34;m&#34;); //ë³„ì¹­ ì§ì ‘ ì§€ì • QMember qMember = QMember.member; //ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš© 
ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ static importì™€ í•¨ê»˜ ì‚¬ìš© @Test public void startQuerydsl() { Member findMember = queryFactory .select(QMember.member) .from(QMember.member) .where(QMember.member.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } 
ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ ì‹¤í–‰ë˜ëŠ” JPQLì„ ë³¼ ìˆ˜ ìˆë‹¤.
spring.jpa.properties.hibernate.use_sql_comments: true 
ì°¸ê³ : ê°™ì€ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë©´ ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì
ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ ê¸°ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬ @Test public void search() { Member findMember = queryFactory .selectFrom(member) .where(member.username.eq(&#34;member1&#34;) .and(member.age.eq(10))) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  ê²€ìƒ‰ ì¡°ê±´ì€ .and() , .or() ë¥¼ ë©”ì„œë“œ ì²´ì¸ìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤. select ì™€ from ì€ selectFrom ìœ¼ë¡œ í•©ì¹  ìˆ˜ ìˆë‹¤.  JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ ì œê³µ member.username.eq(&#34;member1&#34;) // username = &#39;member1&#39; member.username.ne(&#34;member1&#34;) //username != &#39;member1&#39; member.username.eq(&#34;member1&#34;).not() // username != &#39;member1&#39;  member.username.isNotNull() //ì´ë¦„ì´ is not null  member.age.in(10, 20) // age in (10,20) member.age.notIn(10, 20) // age not in (10, 20) member.age.between(10,30) // between 10, 30  member.age.goe(30) // age &gt;= 30 member.age.gt(30) // age &gt; 30 member.age.loe(30) // age &lt;= 30 member.age.lt(30) // age &lt; 30  member.username.like(&#34;member%&#34;) // like ê²€ìƒ‰ member.username.contains(&#34;member&#34;) // like â€˜%member%â€™ ê²€ìƒ‰ member.username.startsWith(&#34;member&#34;) // like â€˜member%â€™ ê²€ìƒ‰ 
AND ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬ @Test public void searchAndParam() { Member findMember = queryFactory .selectFrom(member) .where( member.username.eq(&#34;member1&#34;), member.age.eq(10)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  where() ì— íŒŒë¼ë¯¸í„°ë¡œ ì¡°ê±´ê²€ìƒ‰ì„ ì¶”ê°€í•˜ë©´ AND ì¡°ê±´ì´ ì¶”ê°€ë¨ ì´ ê²½ìš° null ê°’ì€ ë¬´ì‹œ â†’ ë©”ì„œë“œ ì¶”ì¶œì„ í™œìš©í•´ì„œ ë™ì  ì¿¼ë¦¬ë¥¼ ê¹”ë”í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ â†’ ë’¤ì—ì„œ ì„¤ëª…  ê²°ê³¼ ì¡°íšŒ  fetch() : ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ, ë°ì´í„° ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ fetchOne() : ë‹¨ ê±´ ì¡°íšŒ  ê²°ê³¼ê°€ ì—†ìœ¼ë©´ : null ê²°ê³¼ê°€ ë‘˜ ì´ìƒì´ë©´ : com.querydsl.core.NonUniqueResultException   fetchFirst() : limit(1).fetchOne() fetchResults() : í˜ì´ì§• ì •ë³´ í¬í•¨, total count ì¿¼ë¦¬ ì¶”ê°€ ì‹¤í–‰ fetchCount() : count ì¿¼ë¦¬ë¡œ ë³€ê²½í•´ì„œ count ìˆ˜ ì¡°íšŒ  // List List&lt;Member&gt; fetch = queryFactory .selectFrom(member) ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jaeyeonme.github.io/posts/querydsl-basic-grammer/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-31T12:00:00+00:00" />
<meta property="article:modified_time" content="2021-12-31T12:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="QueryDSL ê¸°ë³¸ ë¬¸ë²•"/>
<meta name="twitter:description" content="JPQL VS QueryDSL QueryDSL vs JPQL @Test public void startJQPL() { // member1ì„ ì°¾ì•„ë¼  String qlString = &#34;select m from Member m &#34; &#43; &#34;where m.username = :username&#34;; Member findMember = em.createQuery(qlString, Member.class) .setParameter(&#34;username&#34;, &#34;member1&#34;) .getSingleResult(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } @Test public void startQuerydsl() { // member1ì„ ì°¾ì•„ë¼.  JPAQueryFactory queryFactory = new JPAQueryFactory(em); QMember m = new QMember(&#34;m&#34;); Member findMember = queryFactory .select(m) .from(m) .where(m.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  EntityManager ë¡œ JPAQueryFactory ìƒì„± Querydslì€ JPQL ë¹Œë” JPQL : ë¬¸ì(ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜), Querydsl : ì½”ë“œ(ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜) JPQL : íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì§ì ‘, Querydsl : íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ìë™ ì²˜ë¦¬  JPAQueryFactoryë¥¼ í•„ë“œë¡œ @SpringBootTest @Transactional public class QuerydslBasicTest { @Autowired EntityManager em; JPAQueryFactory queryFactory; @BeforeEach public void before() { queryFactory = new JPAQueryFactory(em); // ... 	} @Test public void startQuerydsl() { // member1ì„ ì°¾ì•„ë¼.  QMember m = new QMember(&#34;m&#34;); Member findMember = queryFactory .select(m) .from(m) .where(m.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } }  JPAQueryFactoryë¥¼ í•„ë“œë¡œ ì œê³µí•˜ë©´ ë™ì‹œì„± ë¬¸ì œëŠ” ì–´ë–»ê²Œ ë ê¹Œ? ë™ì‹œì„± ë¬¸ì œëŠ” JPAQueryFactoryë¥¼ ìƒì„±í•  ë•Œ ì œê³µí•˜ëŠ” EntityManager(em)ì— ë‹¬ë ¤ìˆë‹¤. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ê°™ì€ EntityManagerì— ì ‘ê·¼í•´ë„, íŠ¸ëœì­ì…˜ ë§ˆë‹¤ ë³„ë„ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì—, ë™ì‹œì„± ë¬¸ì œëŠ” ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.  ê¸°ë³¸ Q-Type í™œìš© Qí´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²• QMember qMember = new QMember(&#34;m&#34;); //ë³„ì¹­ ì§ì ‘ ì§€ì • QMember qMember = QMember.member; //ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš© 
ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ static importì™€ í•¨ê»˜ ì‚¬ìš© @Test public void startQuerydsl() { Member findMember = queryFactory .select(QMember.member) .from(QMember.member) .where(QMember.member.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } 
ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ ì‹¤í–‰ë˜ëŠ” JPQLì„ ë³¼ ìˆ˜ ìˆë‹¤.
spring.jpa.properties.hibernate.use_sql_comments: true 
ì°¸ê³ : ê°™ì€ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë©´ ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì
ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ ê¸°ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬ @Test public void search() { Member findMember = queryFactory .selectFrom(member) .where(member.username.eq(&#34;member1&#34;) .and(member.age.eq(10))) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  ê²€ìƒ‰ ì¡°ê±´ì€ .and() , .or() ë¥¼ ë©”ì„œë“œ ì²´ì¸ìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤. select ì™€ from ì€ selectFrom ìœ¼ë¡œ í•©ì¹  ìˆ˜ ìˆë‹¤.  JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ ì œê³µ member.username.eq(&#34;member1&#34;) // username = &#39;member1&#39; member.username.ne(&#34;member1&#34;) //username != &#39;member1&#39; member.username.eq(&#34;member1&#34;).not() // username != &#39;member1&#39;  member.username.isNotNull() //ì´ë¦„ì´ is not null  member.age.in(10, 20) // age in (10,20) member.age.notIn(10, 20) // age not in (10, 20) member.age.between(10,30) // between 10, 30  member.age.goe(30) // age &gt;= 30 member.age.gt(30) // age &gt; 30 member.age.loe(30) // age &lt;= 30 member.age.lt(30) // age &lt; 30  member.username.like(&#34;member%&#34;) // like ê²€ìƒ‰ member.username.contains(&#34;member&#34;) // like â€˜%member%â€™ ê²€ìƒ‰ member.username.startsWith(&#34;member&#34;) // like â€˜member%â€™ ê²€ìƒ‰ 
AND ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬ @Test public void searchAndParam() { Member findMember = queryFactory .selectFrom(member) .where( member.username.eq(&#34;member1&#34;), member.age.eq(10)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  where() ì— íŒŒë¼ë¯¸í„°ë¡œ ì¡°ê±´ê²€ìƒ‰ì„ ì¶”ê°€í•˜ë©´ AND ì¡°ê±´ì´ ì¶”ê°€ë¨ ì´ ê²½ìš° null ê°’ì€ ë¬´ì‹œ â†’ ë©”ì„œë“œ ì¶”ì¶œì„ í™œìš©í•´ì„œ ë™ì  ì¿¼ë¦¬ë¥¼ ê¹”ë”í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ â†’ ë’¤ì—ì„œ ì„¤ëª…  ê²°ê³¼ ì¡°íšŒ  fetch() : ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ, ë°ì´í„° ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ fetchOne() : ë‹¨ ê±´ ì¡°íšŒ  ê²°ê³¼ê°€ ì—†ìœ¼ë©´ : null ê²°ê³¼ê°€ ë‘˜ ì´ìƒì´ë©´ : com.querydsl.core.NonUniqueResultException   fetchFirst() : limit(1).fetchOne() fetchResults() : í˜ì´ì§• ì •ë³´ í¬í•¨, total count ì¿¼ë¦¬ ì¶”ê°€ ì‹¤í–‰ fetchCount() : count ì¿¼ë¦¬ë¡œ ë³€ê²½í•´ì„œ count ìˆ˜ ì¡°íšŒ  // List List&lt;Member&gt; fetch = queryFactory .selectFrom(member) ."/>
<meta name="application-name" content="ğŸ“š | Dev Blog">
<meta name="apple-mobile-web-app-title" content="ğŸ“š | Dev Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jaeyeonme.github.io/posts/querydsl-basic-grammer/" /><link rel="prev" href="https://jaeyeonme.github.io/posts/spring-data-jpa-extension/" /><link rel="next" href="https://jaeyeonme.github.io/posts/querydsl-intermediate-grammer/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "QueryDSL ê¸°ë³¸ ë¬¸ë²•",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jaeyeonme.github.io\/posts\/querydsl-basic-grammer\/"
        },"genre": "posts","keywords": "QueryDSL","wordcount":  2121 ,
        "url": "https:\/\/jaeyeonme.github.io\/posts\/querydsl-basic-grammer\/","datePublished": "2021-12-31T12:00:00+00:00","dateModified": "2021-12-31T12:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "Jaeyeon"},"author": {
                "@type": "Person",
                "name": "Jaeyeon"
            },"description": ""
    }
    </script></head>
    <body header-desktop="auto" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ğŸ“š | Dev Blog">ğŸ“š | Dev Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ğŸ“š | Dev Blog">ğŸ“š | Dev Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">QueryDSL ê¸°ë³¸ ë¬¸ë²•</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-category">included in <a href="/categories/querydsl/"><i class="far fa-folder fa-fw"></i>QueryDSL</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-12-31">2021-12-31</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;2121 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;10 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/querydsl.png"
        data-srcset="/images/JPA/querydsl.png, /images/JPA/querydsl.png 1.5x, /images/JPA/querydsl.png 2x"
        data-sizes="auto"
        alt="/images/JPA/querydsl.png"
        title="/images/JPA/querydsl.png" /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#jpql-vs-querydsl">JPQL VS QueryDSL</a>
      <ul>
        <li><a href="#querydsl-vs-jpql">QueryDSL vs JPQL</a></li>
        <li><a href="#jpaqueryfactoryë¥¼-í•„ë“œë¡œ">JPAQueryFactoryë¥¼ í•„ë“œë¡œ</a></li>
      </ul>
    </li>
    <li><a href="#ê¸°ë³¸-q-type-í™œìš©">ê¸°ë³¸ Q-Type í™œìš©</a>
      <ul>
        <li><a href="#qí´ë˜ìŠ¤-ì¸ìŠ¤í„´ìŠ¤ë¥¼-ì‚¬ìš©í•˜ëŠ”-2ê°€ì§€-ë°©ë²•">Qí´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²•</a></li>
        <li><a href="#ê¸°ë³¸-ì¸ìŠ¤í„´ìŠ¤ë¥¼-static-importì™€-í•¨ê»˜-ì‚¬ìš©">ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ static importì™€ í•¨ê»˜ ì‚¬ìš©</a></li>
      </ul>
    </li>
    <li><a href="#ê²€ìƒ‰-ì¡°ê±´-ì¿¼ë¦¬">ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬</a>
      <ul>
        <li><a href="#ê¸°ë³¸-ê²€ìƒ‰-ì¿¼ë¦¬">ê¸°ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬</a></li>
        <li><a href="#jpqlì´-ì œê³µí•˜ëŠ”-ëª¨ë“ -ê²€ìƒ‰-ì¡°ê±´-ì œê³µ">JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ ì œê³µ</a></li>
        <li><a href="#and-ì¡°ê±´ì„-íŒŒë¼ë¯¸í„°ë¡œ-ì²˜ë¦¬">AND ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬</a></li>
      </ul>
    </li>
    <li><a href="#ê²°ê³¼-ì¡°íšŒ">ê²°ê³¼ ì¡°íšŒ</a></li>
    <li><a href="#ì •ë ¬">ì •ë ¬</a></li>
    <li><a href="#í˜ì´ì§•">í˜ì´ì§•</a>
      <ul>
        <li><a href="#ì¡°íšŒ-ê±´ìˆ˜-ì œí•œ">ì¡°íšŒ ê±´ìˆ˜ ì œí•œ</a></li>
        <li><a href="#ì „ì²´-ì¡°íšŒ-ìˆ˜ê°€-í•„ìš”í•˜ë©´">ì „ì²´ ì¡°íšŒ ìˆ˜ê°€ í•„ìš”í•˜ë©´?</a></li>
      </ul>
    </li>
    <li><a href="#ì§‘í•©">ì§‘í•©</a>
      <ul>
        <li><a href="#groupby-ì‚¬ìš©">GroupBy ì‚¬ìš©</a></li>
        <li><a href="#groupby-having-ì˜ˆì‹œ">groupBy(), having() ì˜ˆì‹œ</a></li>
      </ul>
    </li>
    <li><a href="#ì¡°ì¸---ê¸°ë³¸-ì¡°ì¸">ì¡°ì¸ - ê¸°ë³¸ ì¡°ì¸</a>
      <ul>
        <li><a href="#ê¸°ë³¸-ì¡°ì¸">ê¸°ë³¸ ì¡°ì¸</a></li>
        <li><a href="#ì„¸íƒ€-ì¡°ì¸">ì„¸íƒ€ ì¡°ì¸</a></li>
      </ul>
    </li>
    <li><a href="#ì¡°ì¸---onì ˆ">ì¡°ì¸ - onì ˆ</a>
      <ul>
        <li><a href="#1-ì¡°ì¸-ëŒ€ìƒ-í•„í„°ë§">1. ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§</a></li>
        <li><a href="#2-ì—°ê´€ê´€ê³„-ì—†ëŠ”-ì—”í‹°í‹°-ì™¸ë¶€-ì¡°ì¸">2. ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸</a></li>
      </ul>
    </li>
    <li><a href="#ì¡°ì¸---í˜ì¹˜-ì¡°ì¸">ì¡°ì¸ - í˜ì¹˜ ì¡°ì¸</a>
      <ul>
        <li><a href="#before--í˜ì¹˜-ì¡°ì¸-ë¯¸ì ìš©">Before :: í˜ì¹˜ ì¡°ì¸ ë¯¸ì ìš©</a></li>
        <li><a href="#after--í˜ì¹˜-ì¡°ì¸-ì ìš©">After :: í˜ì¹˜ ì¡°ì¸ ì ìš©</a></li>
      </ul>
    </li>
    <li><a href="#ì„œë¸Œ-ì¿¼ë¦¬">ì„œë¸Œ ì¿¼ë¦¬</a>
      <ul>
        <li><a href="#ì„œë¸Œ-ì¿¼ë¦¬-eq-ì‚¬ìš©">ì„œë¸Œ ì¿¼ë¦¬ eq ì‚¬ìš©</a></li>
        <li><a href="#ì„œë¸Œ-ì¿¼ë¦¬-goe-ì‚¬ìš©">ì„œë¸Œ ì¿¼ë¦¬ goe ì‚¬ìš©</a></li>
        <li><a href="#ì„œë¸Œì¿¼ë¦¬-ì—¬ëŸ¬-ê±´-ì²˜ë¦¬-in-ì‚¬ìš©">ì„œë¸Œì¿¼ë¦¬ ì—¬ëŸ¬ ê±´ ì²˜ë¦¬ in ì‚¬ìš©</a></li>
        <li><a href="#select-ì ˆì—-subquery">select ì ˆì— subquery</a></li>
        <li><a href="#static-import-í™œìš©">static import í™œìš©</a></li>
      </ul>
    </li>
    <li><a href="#case-ë¬¸">Case ë¬¸</a>
      <ul>
        <li><a href="#ë‹¨ìˆœí•œ-ì¡°ê±´">ë‹¨ìˆœí•œ ì¡°ê±´</a></li>
        <li><a href="#ë³µì¡í•œ-ì¡°ê±´">ë³µì¡í•œ ì¡°ê±´</a></li>
        <li><a href="#orderbyì—ì„œ-caseë¬¸-í•¨ê»˜-ì‚¬ìš©í•˜ê¸°-ì˜ˆì œ">orderByì—ì„œ Caseë¬¸ í•¨ê»˜ ì‚¬ìš©í•˜ê¸° ì˜ˆì œ</a></li>
      </ul>
    </li>
    <li><a href="#ìƒìˆ˜-ë¬¸ì-ë”í•˜ê¸°">ìƒìˆ˜, ë¬¸ì ë”í•˜ê¸°</a>
      <ul>
        <li><a href="#ë¬¸ì-ë”í•˜ê¸°-concat">ë¬¸ì ë”í•˜ê¸° concat</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="jpql-vs-querydsl">JPQL VS QueryDSL</h2>
<h3 id="querydsl-vs-jpql">QueryDSL vs JPQL</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">startJQPL</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// member1ì„ ì°¾ì•„ë¼
</span><span class="c1"></span>    <span class="n">String</span> <span class="n">qlString</span> <span class="o">=</span>
            <span class="s">&#34;select m from Member m &#34;</span> <span class="o">+</span>
            <span class="s">&#34;where m.username = :username&#34;</span><span class="o">;</span>

    <span class="n">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">qlString</span><span class="o">,</span> <span class="n">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">,</span> <span class="s">&#34;member1&#34;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">getSingleResult</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">findMember</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">startQuerydsl</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// member1ì„ ì°¾ì•„ë¼.
</span><span class="c1"></span>    <span class="n">JPAQueryFactory</span> <span class="n">queryFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JPAQueryFactory</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>
    <span class="n">QMember</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMember</span><span class="o">(</span><span class="s">&#34;m&#34;</span><span class="o">);</span>

    <span class="n">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">m</span><span class="o">)</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">m</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">))</span> <span class="c1">// íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬
</span><span class="c1"></span>            <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">findMember</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">);</span>
<span class="o">}</span>

</code></pre></div><ul>
<li><code>EntityManager</code> ë¡œ <code>JPAQueryFactory</code> ìƒì„±</li>
<li>Querydslì€ JPQL ë¹Œë”</li>
<li><code>JPQL</code> : ë¬¸ì(ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜), Querydsl : ì½”ë“œ(ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜)</li>
<li><code>JPQL</code> : íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì§ì ‘, Querydsl : íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ìë™ ì²˜ë¦¬</li>
</ul>
<br>
<br>
<h3 id="jpaqueryfactoryë¥¼-í•„ë“œë¡œ">JPAQueryFactoryë¥¼ í•„ë“œë¡œ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@SpringBootTest</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuerydslBasicTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span> <span class="n">EntityManager</span> <span class="n">em</span><span class="o">;</span>
    <span class="n">JPAQueryFactory</span> <span class="n">queryFactory</span><span class="o">;</span>

    <span class="nd">@BeforeEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">queryFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JPAQueryFactory</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>
        <span class="c1">// ...
</span><span class="c1"></span>		<span class="o">}</span>

		<span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startQuerydsl</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// member1ì„ ì°¾ì•„ë¼.
</span><span class="c1"></span>        <span class="n">QMember</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMember</span><span class="o">(</span><span class="s">&#34;m&#34;</span><span class="o">);</span>

        <span class="n">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">queryFactory</span>
                <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">m</span><span class="o">)</span>
                <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">m</span><span class="o">)</span>
                <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">))</span> <span class="c1">// íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬
</span><span class="c1"></span>                <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>

        <span class="n">assertThat</span><span class="o">(</span><span class="n">findMember</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><ul>
<li>JPAQueryFactoryë¥¼ í•„ë“œë¡œ ì œê³µí•˜ë©´ ë™ì‹œì„± ë¬¸ì œëŠ” ì–´ë–»ê²Œ ë ê¹Œ? ë™ì‹œì„± ë¬¸ì œëŠ” JPAQueryFactoryë¥¼ ìƒì„±í•  ë•Œ <br> ì œê³µí•˜ëŠ” EntityManager(em)ì— ë‹¬ë ¤ìˆë‹¤. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ê°™ì€ <br> EntityManagerì— ì ‘ê·¼í•´ë„, íŠ¸ëœì­ì…˜ ë§ˆë‹¤ ë³„ë„ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì—, <br> ë™ì‹œì„± ë¬¸ì œëŠ” ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.</li>
</ul>
<br>
<br>
<br>
<h2 id="ê¸°ë³¸-q-type-í™œìš©">ê¸°ë³¸ Q-Type í™œìš©</h2>
<h3 id="qí´ë˜ìŠ¤-ì¸ìŠ¤í„´ìŠ¤ë¥¼-ì‚¬ìš©í•˜ëŠ”-2ê°€ì§€-ë°©ë²•">Qí´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²•</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">QMember</span> <span class="n">qMember</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMember</span><span class="o">(</span><span class="s">&#34;m&#34;</span><span class="o">);</span> <span class="c1">//ë³„ì¹­ ì§ì ‘ ì§€ì • 
</span><span class="c1"></span><span class="n">QMember</span> <span class="n">qMember</span> <span class="o">=</span> <span class="n">QMember</span><span class="o">.</span><span class="na">member</span><span class="o">;</span>   <span class="c1">//ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©
</span></code></pre></div><br>
<br>
<h3 id="ê¸°ë³¸-ì¸ìŠ¤í„´ìŠ¤ë¥¼-static-importì™€-í•¨ê»˜-ì‚¬ìš©">ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ static importì™€ í•¨ê»˜ ì‚¬ìš©</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">startQuerydsl</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">QMember</span><span class="o">.</span><span class="na">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">QMember</span><span class="o">.</span><span class="na">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">QMember</span><span class="o">.</span><span class="na">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">))</span> <span class="c1">// íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬
</span><span class="c1"></span>            <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">findMember</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><br>
<p>ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ ì‹¤í–‰ë˜ëŠ” JPQLì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">properties</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">use_sql_comments</span><span class="o">:</span> <span class="kc">true</span>
</code></pre></div><br>
<p><strong>ì°¸ê³ </strong>: ê°™ì€ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë©´ ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì</p>
<br>
<br>
<br>
<h2 id="ê²€ìƒ‰-ì¡°ê±´-ì¿¼ë¦¬">ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬</h2>
<h3 id="ê¸°ë³¸-ê²€ìƒ‰-ì¿¼ë¦¬">ê¸°ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">search</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">and</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">10</span><span class="o">)))</span>
            <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">findMember</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><ul>
<li>ê²€ìƒ‰ ì¡°ê±´ì€ <code>.and()</code> , <code>.or()</code> ë¥¼ ë©”ì„œë“œ ì²´ì¸ìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤.</li>
<li><code>select</code> ì™€ <code>from</code> ì€ <code>selectFrom</code> ìœ¼ë¡œ í•©ì¹  ìˆ˜ ìˆë‹¤.</li>
</ul>
<br>
<br>
<h3 id="jpqlì´-ì œê³µí•˜ëŠ”-ëª¨ë“ -ê²€ìƒ‰-ì¡°ê±´-ì œê³µ">JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ ì œê³µ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">)</span> <span class="c1">// username = &#39;member1&#39; 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">ne</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">)</span> <span class="c1">//username != &#39;member1&#39; 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">).</span><span class="na">not</span><span class="o">()</span> <span class="c1">// username != &#39;member1&#39;
</span><span class="c1"></span>
<span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">isNotNull</span><span class="o">()</span>   <span class="c1">//ì´ë¦„ì´ is not null
</span><span class="c1"></span>
<span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="n">10</span><span class="o">,</span> <span class="n">20</span><span class="o">)</span>         <span class="c1">// age in (10,20) 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">notIn</span><span class="o">(</span><span class="n">10</span><span class="o">,</span> <span class="n">20</span><span class="o">)</span>      <span class="c1">// age not in (10, 20) 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">10</span><span class="o">,</span><span class="n">30</span><span class="o">)</span>     <span class="c1">// between 10, 30
</span><span class="c1"></span>
<span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">goe</span><span class="o">(</span><span class="n">30</span><span class="o">)</span>            <span class="c1">// age &gt;= 30 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">gt</span><span class="o">(</span><span class="n">30</span><span class="o">)</span>             <span class="c1">// age &gt; 30 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">loe</span><span class="o">(</span><span class="n">30</span><span class="o">)</span>            <span class="c1">// age &lt;= 30 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">lt</span><span class="o">(</span><span class="n">30</span><span class="o">)</span>             <span class="c1">// age &lt; 30
</span><span class="c1"></span>
<span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">like</span><span class="o">(</span><span class="s">&#34;member%&#34;</span><span class="o">)</span>       <span class="c1">// like ê²€ìƒ‰ 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;member&#34;</span><span class="o">)</span>    <span class="c1">// like â€˜%member%â€™ ê²€ìƒ‰ 
</span><span class="c1"></span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&#34;member&#34;</span><span class="o">)</span>  <span class="c1">// like â€˜member%â€™ ê²€ìƒ‰ 
</span></code></pre></div><br>
<h3 id="and-ì¡°ê±´ì„-íŒŒë¼ë¯¸í„°ë¡œ-ì²˜ë¦¬">AND ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">searchAndParam</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">),</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">10</span><span class="o">))</span>
            <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">findMember</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><ul>
<li><code>where()</code> ì— íŒŒë¼ë¯¸í„°ë¡œ ì¡°ê±´ê²€ìƒ‰ì„ ì¶”ê°€í•˜ë©´ <code>AND</code> ì¡°ê±´ì´ ì¶”ê°€ë¨</li>
<li>ì´ ê²½ìš° <code>null</code> ê°’ì€ ë¬´ì‹œ â†’ ë©”ì„œë“œ ì¶”ì¶œì„ í™œìš©í•´ì„œ ë™ì  ì¿¼ë¦¬ë¥¼ ê¹”ë”í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ â†’ ë’¤ì—ì„œ ì„¤ëª…</li>
</ul>
<br>
<br>
<br>
<h2 id="ê²°ê³¼-ì¡°íšŒ">ê²°ê³¼ ì¡°íšŒ</h2>
<ul>
<li><code>fetch()</code> : ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ, ë°ì´í„° ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜</li>
<li><code>fetchOne()</code> : ë‹¨ ê±´ ì¡°íšŒ
<ul>
<li>ê²°ê³¼ê°€ ì—†ìœ¼ë©´ : <code>null</code></li>
<li>ê²°ê³¼ê°€ ë‘˜ ì´ìƒì´ë©´ : <code>com.querydsl.core.NonUniqueResultException</code></li>
</ul>
</li>
<li><code>fetchFirst()</code> : <code>limit(1).fetchOne()</code></li>
<li><code>fetchResults()</code> : í˜ì´ì§• ì •ë³´ í¬í•¨, total count ì¿¼ë¦¬ ì¶”ê°€ ì‹¤í–‰</li>
<li><code>fetchCount()</code> : count ì¿¼ë¦¬ë¡œ ë³€ê²½í•´ì„œ count ìˆ˜ ì¡°íšŒ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">// List
</span><span class="c1"></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">fetch</span> <span class="o">=</span> <span class="n">queryFactory</span>
        <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
        <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

<span class="c1">// ë‹¨ ê±´
</span><span class="c1"></span><span class="n">Member</span> <span class="n">fetchOne</span> <span class="o">=</span> <span class="n">queryFactory</span>
        <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">QMember</span><span class="o">.</span><span class="na">member</span><span class="o">)</span>
        <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>

<span class="c1">// ì²˜ìŒ í•œ ê±´ ì¡°íšŒ
</span><span class="c1"></span><span class="n">Member</span> <span class="n">fetchFirst</span> <span class="o">=</span> <span class="n">queryFactory</span>
        <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">QMember</span><span class="o">.</span><span class="na">member</span><span class="o">)</span>
        <span class="o">.</span><span class="na">fetchFirst</span><span class="o">();</span>

<span class="c1">// í˜ì´ì§•ì—ì„œ ì‚¬ìš©
</span><span class="c1"></span><span class="n">QueryResults</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">queryFactory</span>
        <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
        <span class="o">.</span><span class="na">fetchResults</span><span class="o">();</span>

<span class="n">results</span><span class="o">.</span><span class="na">getTotal</span><span class="o">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">content</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="na">getResults</span><span class="o">();</span>

<span class="c1">// count ì¿¼ë¦¬ë¡œ ë³€ê²½
</span><span class="c1"></span><span class="kt">long</span> <span class="n">total</span> <span class="o">=</span> <span class="n">queryFactory</span>
        <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
        <span class="o">.</span><span class="na">fetchCount</span><span class="o">();</span>
</code></pre></div><br>
<br>
<br>
<h2 id="ì •ë ¬">ì •ë ¬</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * íšŒì› ì •ë ¬ ìˆœì„œ
</span><span class="cm"> * 1. íšŒì› ë‚˜ì´ ë‚´ë¦¼ì°¨ìˆœ (desc)
</span><span class="cm"> * 2. íšŒì› ì´ë¦„ ì˜¤ë¦„ì°¨ìˆœ (asc)
</span><span class="cm"> * ë‹¨ 2ì—ì„œ íšŒì› ì´ë¦„ì´ ì—†ìœ¼ë©´ ë§ˆì§€ë§‰ì— ì¶œë ¥ (nulls last)
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">sort</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">100</span><span class="o">));</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&#34;member5&#34;</span><span class="o">,</span> <span class="n">100</span><span class="o">));</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&#34;member6&#34;</span><span class="o">,</span> <span class="n">100</span><span class="o">));</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">100</span><span class="o">))</span>
            <span class="o">.</span><span class="na">orderBy</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">desc</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">asc</span><span class="o">().</span><span class="na">nullsLast</span><span class="o">())</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">Member</span> <span class="n">member5</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
    <span class="n">Member</span> <span class="n">member6</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
    <span class="n">Member</span> <span class="n">memberNull</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">member5</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;member5&#34;</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">member6</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;member6&#34;</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">memberNull</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()).</span><span class="na">isNull</span><span class="o">();</span>

<span class="o">}</span>
</code></pre></div><ul>
<li><code>desc()</code> , <code>asc()</code> : ì¼ë°˜ ì •ë ¬</li>
<li><code>nullsLast()</code> , <code>nullsFirst()</code> : null ë°ì´í„° ìˆœì„œ ë¶€ì—¬</li>
</ul>
<br>
<br>
<br>
<h2 id="í˜ì´ì§•">í˜ì´ì§•</h2>
<h3 id="ì¡°íšŒ-ê±´ìˆ˜-ì œí•œ">ì¡°íšŒ ê±´ìˆ˜ ì œí•œ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">paging1</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">orderBy</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">desc</span><span class="o">())</span>
            <span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="n">1</span><span class="o">)</span>  <span class="c1">// 0ë¶€í„° ì‹œì‘(zero index)
</span><span class="c1"></span>            <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">2</span><span class="o">)</span>   <span class="c1">// ìµœëŒ€ 2ê±´ ì¡°íšŒ
</span><span class="c1"></span>            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><ul>
<li>í˜ì´ì§•í•  ë•ŒëŠ” orderByë¥¼ ë„£ì–´ì„œ ì •ë ¬ì„ í•´ì¤˜ì•¼ ì˜ ë™ì‘í•œë‹¤. <br> offset(1).limit(2)ëŠ” index(0)ì„ ìƒëµí•˜ê³  ë‘ ê°œë¥¼ ì„ íƒí•œë‹¤ëŠ” ëœ»
â†’ <code>[0][1][2][3]</code></li>
</ul>
<br>
<br>
<h3 id="ì „ì²´-ì¡°íšŒ-ìˆ˜ê°€-í•„ìš”í•˜ë©´">ì „ì²´ ì¡°íšŒ ìˆ˜ê°€ í•„ìš”í•˜ë©´?</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">paging2</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">QueryResults</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">queryResults</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">orderBy</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">desc</span><span class="o">())</span>
            <span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="n">1</span><span class="o">)</span>
            <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">2</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetchResults</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">queryResults</span><span class="o">.</span><span class="na">getTotal</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">4</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">queryResults</span><span class="o">.</span><span class="na">getLimit</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">queryResults</span><span class="o">.</span><span class="na">getOffset</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">queryResults</span><span class="o">.</span><span class="na">getResults</span><span class="o">().</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div><br>
<p><strong>ì£¼ì˜: count ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ë‹ˆ ì„±ëŠ¥ìƒ ì£¼ì˜!</strong></p>
<br>
<p><strong>ì°¸ê³ </strong> <br> ì‹¤ë¬´ì—ì„œ í˜ì´ì§• ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ë•Œ, ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ëŠ” ì—¬ëŸ¬ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼ í•˜ì§€ë§Œ, <br> count ì¿¼ë¦¬ëŠ” ì¡°ì¸ì´ í•„ìš” ì—†ëŠ” ê²½ìš°ë„ ìˆë‹¤. ê·¸ëŸ°ë° ì´ë ‡ê²Œ ìë™í™”ëœ count ì¿¼ë¦¬ëŠ” ì›ë³¸ ì¿¼ë¦¬ì™€ ê°™ì´ ëª¨ë‘ ì¡°ì¸ì„ <br> í•´ë²„ë¦¬ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì´ ì•ˆë‚˜ì˜¬ ìˆ˜ ìˆë‹¤. <br> count ì¿¼ë¦¬ì— ì¡°ì¸ì´ í•„ìš”ì—†ëŠ” ì„±ëŠ¥ ìµœì í™”ê°€ í•„ìš”í•˜ë‹¤ë©´, count ì „ìš© ì¿¼ë¦¬ë¥¼ ë³„ë„ë¡œ ì‘ì„±í•´ì•¼ í•œë‹¤.</p>
<br>
<br>
<br>
<h2 id="ì§‘í•©">ì§‘í•©</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * JPQL
</span><span class="cm"> * select
</span><span class="cm"> *    COUNT(m),    // íšŒì›ìˆ˜
</span><span class="cm"> *    SUM(m.age),  // ë‚˜ì´ í•©
</span><span class="cm"> *    AVG(m.age),  // í‰ê·  ë‚˜ì´
</span><span class="cm"> *    MAX(m.age),  // ìµœëŒ€ ë‚˜ì´
</span><span class="cm"> *    MIN(m.age)   // ìµœì†Œ ë‚˜ì´
</span><span class="cm"> * from Member m
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">aggregation</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">count</span><span class="o">(),</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">sum</span><span class="o">(),</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">(),</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">max</span><span class="o">(),</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">min</span><span class="o">()</span>
            <span class="o">)</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">Tuple</span> <span class="n">tuple</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">count</span><span class="o">())).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">4</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">sum</span><span class="o">())).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">25</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">max</span><span class="o">())).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">40</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">min</span><span class="o">())).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div><ul>
<li>JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ì§‘í•© í•©ìˆ˜ë¥¼ ì œê³µí•œë‹¤.</li>
<li>tupleì€ í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ë°˜í™˜ì—ì„œ ì„¤ëª…í•œë‹¤.</li>
</ul>
<br>
<br>
<h3 id="groupby-ì‚¬ìš©">GroupBy ì‚¬ìš©</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * íŒ€ì˜ ì´ë¦„ê³¼ ê° íŒ€ì˜ í‰ê·  ì—°ë ¹ì„ êµ¬í•´ë¼.
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">group</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
            <span class="o">.</span><span class="na">groupBy</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">Tuple</span> <span class="n">teamA</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
    <span class="n">Tuple</span> <span class="n">teamB</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">teamA</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;teamA&#34;</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">teamA</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">15</span><span class="o">);</span>  <span class="c1">// (10 + 20) / 2
</span><span class="c1"></span>    <span class="n">assertThat</span><span class="o">(</span><span class="n">teamB</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;teamB&#34;</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">teamB</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">35</span><span class="o">);</span>  <span class="c1">// (30 + 40) / 2
</span><span class="c1"></span>    
<span class="o">}</span>
</code></pre></div><p><code>groupBy</code> , ê·¸ë£¹í™”ëœ ê²°ê³¼ë¥¼ ì œí•œí•˜ë ¤ë©´ <code>having</code></p>
<br>
<br>
<h3 id="groupby-having-ì˜ˆì‹œ">groupBy(), having() ì˜ˆì‹œ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="o">.</span><span class="na">groupBy</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">price</span><span class="o">)</span>
<span class="o">.</span><span class="na">having</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">price</span><span class="o">.</span><span class="na">gt</span><span class="o">(</span><span class="n">1000</span><span class="o">))</span>
</code></pre></div><br>
<br>
<br>
<h2 id="ì¡°ì¸---ê¸°ë³¸-ì¡°ì¸">ì¡°ì¸ - ê¸°ë³¸ ì¡°ì¸</h2>
<h3 id="ê¸°ë³¸-ì¡°ì¸">ê¸°ë³¸ ì¡°ì¸</h3>
<p>ì¡°ì¸ì˜ ê¸°ë³¸ ë¬¸ë²•ì€ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ì¡°ì¸ ëŒ€ìƒì„ ì§€ì •í•˜ê³ , <br> ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë³„ì¹­(alias)ìœ¼ë¡œ ì‚¬ìš©í•  Q íƒ€ì…ì„ ì§€ì •í•˜ë©´ ëœë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">join</span><span class="o">(</span><span class="n">ì¡°ì¸</span> <span class="n">ëŒ€ìƒ</span><span class="o">,</span> <span class="n">ë³„ì¹­ìœ¼ë¡œ</span> <span class="n">ì‚¬ìš©í• </span> <span class="n">Qíƒ€ì…</span><span class="o">)</span>
</code></pre></div><br>
<p><strong>ê¸°ë³¸ ì¡°ì¸</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * íŒ€ Aì— ì†Œì†ëœ ëª¨ë“  íšŒì›
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">join</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;teamA&#34;</span><span class="o">))</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">)</span>
            <span class="o">.</span><span class="na">extracting</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">containsExactly</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">,</span> <span class="s">&#34;member2&#34;</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><ul>
<li><code>join()</code>, <code>innerJoin()</code> : ë‚´ë¶€ ì¡°ì¸(inner join)</li>
<li><code>leftJoin()</code> : left ì™¸ë¶€ ì¡°ì¸(left outer join)</li>
<li><code>rightJoin()</code> : right ì™¸ë¶€ ì¡°ì¸(right outer join)</li>
<li>JPQLì˜ <code>on</code> ê³¼ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ <code>fetch</code> ì¡°ì¸ ì œê³µ â†’ ë‹¤ìŒ on ì ˆì—ì„œ ì„¤ëª…</li>
</ul>
<br>
<br>
<h3 id="ì„¸íƒ€-ì¡°ì¸">ì„¸íƒ€ ì¡°ì¸</h3>
<p>ì—°ê´€ê´€ê³„ê°€ ì—†ëŠ” í•„ë“œë¡œ ì¡°ì¸</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * ì„¸íƒ€ ì¡°ì¸
</span><span class="cm"> * íšŒì›ì˜ ì´ë¦„ì´ íŒ€ ì´ë¦„ê³¼ ê°™ì€ íšŒì› ì¡°íšŒ
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">theta_join</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&#34;teamA&#34;</span><span class="o">));</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&#34;teamB&#34;</span><span class="o">));</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&#34;teamC&#34;</span><span class="o">));</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">))</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">)</span>
            <span class="o">.</span><span class="na">extracting</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">containsExactly</span><span class="o">(</span><span class="s">&#34;teamA&#34;</span><span class="o">,</span> <span class="s">&#34;teamB&#34;</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><ul>
<li>from ì ˆì— ì—¬ëŸ¬ ì—”í‹°í‹°ë¥¼ ì„ íƒí•´ì„œ ì„¸íƒ€ ì¡°ì¸</li>
<li>ì™¸ë¶€ ì¡°ì¸ ë¶ˆê°€ëŠ¥ â†’ ë‹¤ìŒì— ì„¤ëª…í•œ ì¡°ì¸ onì„ ì‚¬ìš©í•˜ë©´ ì™¸ë¶€ ì¡°ì¸ê°€ëŠ¥</li>
</ul>
<br>
<br>
<h2 id="ì¡°ì¸---onì ˆ">ì¡°ì¸ - onì ˆ</h2>
<ul>
<li>ONì ˆì„ í™œìš©í•œ ì¡°ì¸(JPA 2.1ë¶€í„° ì§€ì›)
<ol>
<li>ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§</li>
<li>ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸</li>
</ol>
</li>
</ul>
<br>
<br>
<h3 id="1-ì¡°ì¸-ëŒ€ìƒ-í•„í„°ë§">1. ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§</h3>
<p>ì˜ˆ) íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸í•˜ë©´ì„œ, íŒ€ ì´ë¦„ì´ teamAì¸ íŒ€ë§Œ ì¡°ì¸, íšŒì›ì€ ëª¨ë‘ ì¡°íšŒ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * ì˜ˆ) íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸í•˜ë©´ì„œ, íŒ€ ì´ë¦„ì´ teamAì¸ íŒ€ë§Œ ì¡°ì¸, íšŒì›ì€ ëª¨ë‘ ì¡°íšŒ
</span><span class="cm"> * JPQL: select m, t from Member m left join m.team t on t.name = &#39;teamA&#39;;
</span><span class="cm"> *
</span><span class="cm"> * @throws Exception
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">join_on_filtering</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">leftjoin</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">).</span><span class="na">on</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;teamA&#34;</span><span class="o">))</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Tuple</span> <span class="n">tuple</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;tuple = &#34;</span> <span class="o">+</span> <span class="n">tuple</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/* ì‹¤í–‰ ê²°ê³¼ */</span>
<span class="cm">/*
</span><span class="cm">tuple = [Member(id=3, username=member1, age=10), Team(id=1, name=teamA)]
</span><span class="cm">tuple = [Member(id=4, username=member2, age=20), Team(id=1, name=teamA)]
</span><span class="cm">tuple = [Member(id=5, username=member3, age=30), null]
</span><span class="cm">tuple = [Member(id=6, username=member4, age=40), null]
</span><span class="cm">*/</span>
</code></pre></div><ul>
<li>
<p><code>on</code> ì ˆì„ ì‚¬ìš©í•˜ì—¬ ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§ í•  ë•Œ ë‚´ë¶€ì¡°ì¸(inner Join)ì„ ì‚¬ìš©í•˜ë©´ whereì ˆì—ì„œ í•„í„°ë§ í•˜ëŠ” ê²ƒê³¼ ê¸°ëŠ¥ì´ ë™ì¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="o">.</span><span class="na">leftjoin</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">).</span><span class="na">on</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;teamA&#34;</span><span class="o">))</span> <span class="o">-&gt;</span> <span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">).</span><span class="na">on</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;teamA&#34;</span><span class="o">))</span>
</code></pre></div></li>
</ul>
<br>
<br>
<h3 id="2-ì—°ê´€ê´€ê³„-ì—†ëŠ”-ì—”í‹°í‹°-ì™¸ë¶€-ì¡°ì¸">2. ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸</h3>
<p>ì˜ˆ) íšŒì›ì˜ ì´ë¦„ê³¼ íŒ€ì˜ ì´ë¦„ì´ ê°™ì€ ëŒ€ìƒ <strong>ì™¸ë¶€ ì¡°ì¸</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * 2. ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸
</span><span class="cm"> * ì˜ˆ) íšŒì›ì˜ ì´ë¦„ê³¼ íŒ€ì˜ ì´ë¦„ì´ ê°™ì€ ëŒ€ìƒ ì™¸ë¶€ ì¡°ì¸
</span><span class="cm"> * JPQL : SELECT m, t FROM Member m LEFT JOIN Team t on m.username = t.name
</span><span class="cm"> * SQL  : SELECT m.*, t.* FROM Member m LEFT JOIN Team t ON m.username = t.username
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">join_on_no_relation</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&#34;teamA&#34;</span><span class="o">));</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&#34;teamB&#34;</span><span class="o">));</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&#34;teamC&#34;</span><span class="o">));</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">leftJoin</span><span class="o">(</span><span class="n">team</span><span class="o">).</span><span class="na">on</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">))</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">Tuple</span> <span class="n">tuple</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;tuple = &#34;</span> <span class="o">+</span> <span class="n">tuple</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/* ì‹¤í–‰ ê²°ê³¼ */</span>
<span class="cm">/*
</span><span class="cm">t=[Member(id=3, username=member1, age=10), null]
</span><span class="cm">t=[Member(id=4, username=member2, age=20), null]
</span><span class="cm">t=[Member(id=5, username=member3, age=30), null]
</span><span class="cm">t=[Member(id=6, username=member4, age=40), null]
</span><span class="cm">t=[Member(id=7, username=teamA, age=0), Team(id=1, name=teamA)]
</span><span class="cm">t=[Member(id=8, username=teamB, age=0), Team(id=2, name=teamB)]
</span><span class="cm">*/</span>
</code></pre></div><ul>
<li>í•˜ì´ë²„ë„¤ì´íŠ¸ 5.1 ë¶€í„° <code>on</code> ì„ ì‚¬ìš©í•´ì„œ ë°”ë¡œ ì„œë¡œ ê´€ê³„ê°€ ì—†ëŠ” í•„ë“œë¡œ ì™¸ë¶€ ì¡°ì¸í•˜ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆë‹¤. <br> ë¬¼ë¡  ë‚´ë¶€ ì¡°ì¸ë„ ê°€ëŠ¥í•˜ë‹¤.</li>
<li><strong>ì£¼ì˜!</strong> ë¬¸ë²•ì„ ì˜ ë´ì•¼ í•œë‹¤. <strong>leftJoin()</strong> ë¶€ë¶„ì— ì¼ë°˜ ì¡°ì¸ê³¼ ë‹¤ë¥´ê²Œ ì—”í‹°í‹° í•˜ë‚˜ë§Œ ë“¤ì–´ê°„ë‹¤.
<ul>
<li>ì¼ë°˜ì¡°ì¸ : <code>leftJoin(member.Team, team)</code></li>
<li>on ì¡°ì¸ : <code>from(member).leftJoin(team).on(xxx)</code></li>
</ul>
</li>
</ul>
<br>
<br>
<br>
<h2 id="ì¡°ì¸---í˜ì¹˜-ì¡°ì¸">ì¡°ì¸ - í˜ì¹˜ ì¡°ì¸</h2>
<p><strong>í˜ì¹˜ ì¡°ì¸ì€ SQL ìì²´ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹ˆê³  JPAì—ì„œ SQLì¡°ì¸ì„ í™œìš©í•´ì„œ ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ <br> SQL í•œ ë²ˆì— ì¡°íšŒí•´ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì´ë‹¤.<br> <br>
ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì—”í‹°í‹° ì—°ê´€ê´€ê³„ì—ì„œ ëª¨ë“  ë¡œë”©ì „ëµì„ <code>ì§€ì—°ë¡œë”© (fetch = fetchType.LAZA)</code>ìœ¼ë¡œ ì„¤ì •í•˜ëŠ”ë°, <br> í˜ì¹˜ì¡°ì¸ì„ ì‚¬ìš©í•˜ë©´,
getter í˜¸ì¶œì‹œë§ˆë‹¤ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.</strong></p>
<br>
<br>
<h3 id="before--í˜ì¹˜-ì¡°ì¸-ë¯¸ì ìš©">Before :: í˜ì¹˜ ì¡°ì¸ ë¯¸ì ìš©</h3>
<p>ì§€ì—°ë¡œë”©ìœ¼ë¡œ Member, Team SQL ì¿¼ë¦¬ ê°ê° ì‹¤í–‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@PersistenceUnit</span>
<span class="n">EntityManagerFactory</span> <span class="n">emf</span><span class="o">;</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">fetchJoinNo</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">em</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
    <span class="n">em</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>

    <span class="n">Member</span> <span class="n">member1</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">))</span>
            <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="n">loaded</span> <span class="o">=</span> <span class="n">emf</span><span class="o">.</span><span class="na">getPersistenceUnitUtil</span><span class="o">().</span><span class="na">isLoaded</span><span class="o">(</span><span class="n">member1</span><span class="o">.</span><span class="na">getTeam</span><span class="o">());</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">loaded</span><span class="o">).</span><span class="na">as</span><span class="o">(</span><span class="s">&#34;í˜ì¹˜ ì¡°ì¸ ë¯¸ì ìš©&#34;</span><span class="o">).</span><span class="na">isFalse</span><span class="o">();</span>
<span class="o">}</span>

<span class="cm">/* ìˆ˜í–‰ ì¿¼ë¦¬ */</span>
<span class="cm">/*
</span><span class="cm">        select member1
</span><span class="cm">        from Member member1
</span><span class="cm">        where member1.username = &#39;member1&#39;
</span><span class="cm">*/</span>
</code></pre></div><ul>
<li>Member Entityë§Œ ì¡°íšŒë˜ì—ˆë¿ ì—°ê´€ê´€ê³„ê²Œ ìˆëŠ” Team EntityëŠ” ì¡°íšŒë˜ì§€ ì•Šì•˜ë‹¤. <br>
â†’ ê·¸ë ‡ê¸° ë•Œë¬¸ì— <code>assertThat(loaded).as(&quot;í˜ì¹˜ ì¡°ì¸ ë¯¸ì ìš©&quot;).isFalse();</code> ì€ í†µê³¼ ëœë‹¤.</li>
</ul>
<br>
<br>
<h3 id="after--í˜ì¹˜-ì¡°ì¸-ì ìš©">After :: í˜ì¹˜ ì¡°ì¸ ì ìš©</h3>
<p>ì¦‰ì‹œë¡œë”©ìœ¼ë¡œ Member, Team SQL ì¿¼ë¦¬ ì¡°ì¸ìœ¼ë¡œ í•œë²ˆì— ì¡°íšŒ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">fetchJoinUse</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">em</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
    <span class="n">em</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>

    <span class="n">Member</span> <span class="n">member1</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">).</span><span class="na">fetchJoin</span><span class="o">()</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">))</span>
            <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="n">loaded</span> <span class="o">=</span> <span class="n">emf</span><span class="o">.</span><span class="na">getPersistenceUnitUtil</span><span class="o">().</span><span class="na">isLoaded</span><span class="o">(</span><span class="n">member1</span><span class="o">.</span><span class="na">getTeam</span><span class="o">());</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">loaded</span><span class="o">).</span><span class="na">as</span><span class="o">(</span><span class="s">&#34;í˜ì¹˜ ì¡°ì¸ ì ìš©&#34;</span><span class="o">).</span><span class="na">isTrue</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div><ul>
<li><code>join(member.team, team)</code> ì˜†ì„ë³´ë©´ <code>.fetchJoin()</code> ì„ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. <br>
ì´ë ‡ê²Œ <code>fetchJoin()</code> ì„ í˜¸ì¶œí•´ì£¼ë©´ ì—°ê´€ê´€ê³„ì— ìˆëŠ” Team Entityë„ í•¨ê»˜ ì¡°íšŒí•˜ê¸° ë•Œë¬¸ì— <br> <code>loaded</code> ê°€ trueê°€ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<br>
<br>
<h2 id="ì„œë¸Œ-ì¿¼ë¦¬">ì„œë¸Œ ì¿¼ë¦¬</h2>
<p><code>com.querydsl.jpa.JPAExpressions</code> ì‚¬ìš©í•˜ì—¬ ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>
<br>
<br>
<h3 id="ì„œë¸Œ-ì¿¼ë¦¬-eq-ì‚¬ìš©">ì„œë¸Œ ì¿¼ë¦¬ eq ì‚¬ìš©</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * ë‚˜ì´ê°€ ê°€ì¥ ë§ì€ íšŒì› ì¡°íšŒ
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">subQuery</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">QMember</span> <span class="n">memberSub</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMember</span><span class="o">(</span><span class="s">&#34;memberSub&#34;</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span>
                    <span class="n">select</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">max</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">memberSub</span><span class="o">)</span>
            <span class="o">))</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">extracting</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">containsExactly</span><span class="o">(</span><span class="n">40</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><br>
<br>
<h3 id="ì„œë¸Œ-ì¿¼ë¦¬-goe-ì‚¬ìš©">ì„œë¸Œ ì¿¼ë¦¬ goe ì‚¬ìš©</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * ë‚˜ì´ê°€ í‰ê·  ì´ìƒì¸ íšŒì›
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">subQueryGoe</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">QMember</span> <span class="n">memberSub</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMember</span><span class="o">(</span><span class="s">&#34;memberSub&#34;</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">goe</span><span class="o">(</span>
                    <span class="n">select</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">memberSub</span><span class="o">)</span>
            <span class="o">))</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">extracting</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">containsExactly</span><span class="o">(</span><span class="n">30</span><span class="o">,</span> <span class="n">40</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><br>
<br>
<h3 id="ì„œë¸Œì¿¼ë¦¬-ì—¬ëŸ¬-ê±´-ì²˜ë¦¬-in-ì‚¬ìš©">ì„œë¸Œì¿¼ë¦¬ ì—¬ëŸ¬ ê±´ ì²˜ë¦¬ in ì‚¬ìš©</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * ì„œë¸Œì¿¼ë¦¬ ì—¬ëŸ¬ ê±´ ì²˜ë¦¬, in ì‚¬ìš©
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">subQueryIn</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">QMember</span> <span class="n">memberSub</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMember</span><span class="o">(</span><span class="s">&#34;memberSub&#34;</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">in</span><span class="o">(</span>
                    <span class="n">select</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">)</span>
                            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">memberSub</span><span class="o">)</span>
                            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">gt</span><span class="o">(</span><span class="n">10</span><span class="o">))</span>
            <span class="o">))</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">extracting</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">)</span>
            <span class="o">.</span><span class="na">containsExactly</span><span class="o">(</span><span class="n">20</span><span class="o">,</span> <span class="n">30</span><span class="o">,</span> <span class="n">40</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><br>
<br>
<h3 id="select-ì ˆì—-subquery">select ì ˆì— subquery</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">selectSubquery</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">QMember</span> <span class="n">memberSub</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QMember</span><span class="o">(</span><span class="s">&#34;memberSub&#34;</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">,</span>
                    <span class="n">select</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">memberSub</span><span class="o">))</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">Tuple</span> <span class="n">tuple</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;tuple = &#34;</span> <span class="o">+</span> <span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;age = &#34;</span> <span class="o">+</span> <span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">JPAExpressions</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())</span>
                                                    <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">memberSub</span><span class="o">)));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><br>
<br>
<h3 id="static-import-í™œìš©">static import í™œìš©</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">import static</span> <span class="nn">com.querydsl.jpa.JPAExpressions.select</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
                        <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span> 
                        <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">select</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">max</span><span class="o">())</span> 
                        <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">memberSub</span><span class="o">)</span> <span class="o">))</span> 
                        <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div><br>
<p><strong>from ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ í•œê³„</strong></p>
<p>JPA JPQL ì„œë¸Œì¿¼ë¦¬ì˜ í•œê³„ì ìœ¼ë¡œ from ì ˆì˜ ì„œë¸Œì¿¼ë¦¬(ì¸ë¼ì¸ ë·°)ëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¹ì—°íˆ Querydsl ë„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ select ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ëŠ” ì§€ì›í•œë‹¤. Querydslë„ í•˜ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ select ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì§€ì›í•œë‹¤.</p>
<br>
<p><strong>from ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ í•´ê²°ë°©ì•ˆ</strong></p>
<ol>
<li>ì„œë¸Œì¿¼ë¦¬ â†’ <code>JOIN</code>ìœ¼ë¡œ ë³€ê²½í•œë‹¤. (ê°€ëŠ¥í•œ ìƒí™©ë„ ìˆê³ , ë¶ˆê°€ëŠ¥í•œ ìƒí™©ë„ ìˆë‹¤.)</li>
<li>ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¿¼ë¦¬ë¥¼ 2ë²ˆ ë¶„ë¦¬í•´ì„œ ì‹¤í–‰í•œë‹¤.</li>
<li><code>nativeSQL</code>ì„ ì‚¬ìš©í•œë‹¤.</li>
</ol>
<br>
<br>
<br>
<h2 id="case-ë¬¸">Case ë¬¸</h2>
<p><strong>select, ì¡°ê±´ì ˆ(where), order byì—ì„œ ì‚¬ìš© ê°€ëŠ¥</strong></p>
<br>
<h3 id="ë‹¨ìˆœí•œ-ì¡°ê±´">ë‹¨ìˆœí•œ ì¡°ê±´</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">basicCase</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span>
                    <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">10</span><span class="o">).</span><span class="na">then</span><span class="o">(</span><span class="s">&#34;ì—´ì‚´&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">20</span><span class="o">).</span><span class="na">then</span><span class="o">(</span><span class="s">&#34;ìŠ¤ë¬´ì‚´&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">otherwise</span><span class="o">(</span><span class="s">&#34;ê¸°íƒ€&#34;</span><span class="o">)</span>
            <span class="o">)</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;s = &#34;</span> <span class="o">+</span> <span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*ì‹¤í–‰ê²°ê³¼*/</span>
<span class="cm">/*
</span><span class="cm">ì—´ì‚´
</span><span class="cm">ìŠ¤ë¬´ì‚´
</span><span class="cm">ê¸°íƒ€
</span><span class="cm">ê¸°íƒ€
</span><span class="cm">*/</span>
</code></pre></div><ul>
<li>ageê°€ 10ì‚´ì´ë©´ â€˜ì—´ì‚´â€™, 20ì´ë©´ â€˜ìŠ¤ë¬´ì‚´â€™ ê·¸ ë°–ì—ëŠ” â€˜ê¸°íƒ€â€™ë¡œ ì¶œë ¥</li>
</ul>
<br>
<br>
<h3 id="ë³µì¡í•œ-ì¡°ê±´">ë³µì¡í•œ ì¡°ê±´</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">complexCase</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="k">new</span> <span class="n">CaseBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">0</span><span class="o">,</span> <span class="n">20</span><span class="o">)).</span><span class="na">then</span><span class="o">(</span><span class="s">&#34;0~20ì‚´&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">21</span><span class="o">,</span> <span class="n">30</span><span class="o">)).</span><span class="na">then</span><span class="o">(</span><span class="s">&#34;21~30ì‚´&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">otherwise</span><span class="o">(</span><span class="s">&#34;ê¸°íƒ€&#34;</span><span class="o">))</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;s = &#34;</span> <span class="o">+</span> <span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><ul>
<li>CaseBuilder()ë¥¼ í†µí•´ì„œ ë™ì‘</li>
<li>basicí•œ caseì™€ëŠ” ë‹¤ë¥´ê²Œ <code>when</code> ì ˆì•ˆì— ì¡°ê±´ì´ ë“¤ì–´ê°„ë‹¤.</li>
</ul>
<br>
<br>
<h3 id="orderbyì—ì„œ-caseë¬¸-í•¨ê»˜-ì‚¬ìš©í•˜ê¸°-ì˜ˆì œ">orderByì—ì„œ Caseë¬¸ í•¨ê»˜ ì‚¬ìš©í•˜ê¸° ì˜ˆì œ</h3>
<p>ì˜ˆë¥¼ ë“¤ì–´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì„ì˜ì˜ ìˆœì„œë¡œ íšŒì›ì„ ì¶œë ¥í•˜ê³  ì‹¶ë‹¤ë©´?</p>
<ol>
<li>0 ~ 30ì‚´ì´ ì•„ë‹Œ íšŒì›ì„ ê°€ì¥ ë¨¼ì € ì¶œë ¥</li>
<li>0 ~ 20ì‚´ íšŒì› ì¶œë ¥</li>
<li>21 ~ 30ì‚´ íšŒì› ì¶œë ¥</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * orderByì—ì„œ Caseë¬¸ í•¨ê»˜ ì‚¬ìš©í•˜ê¸°
</span><span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">orderByCase</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">NumberExpression</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">rankPath</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CaseBuilder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">0</span><span class="o">,</span> <span class="n">20</span><span class="o">)).</span><span class="na">then</span><span class="o">(</span><span class="n">2</span><span class="o">)</span>
            <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">21</span><span class="o">,</span> <span class="n">30</span><span class="o">)).</span><span class="na">then</span><span class="o">(</span><span class="n">1</span><span class="o">)</span>
            <span class="o">.</span><span class="na">otherwise</span><span class="o">(</span><span class="n">3</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">,</span> <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">,</span> <span class="n">rankPath</span><span class="o">)</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">orderBy</span><span class="o">(</span><span class="n">rankPath</span><span class="o">.</span><span class="na">desc</span><span class="o">())</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">Tuple</span> <span class="n">tuple</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">);</span>
        <span class="n">Integer</span> <span class="n">age</span> <span class="o">=</span> <span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">);</span>
        <span class="n">Integer</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">rankPath</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;username = &#34;</span> <span class="o">+</span> <span class="n">username</span> <span class="o">+</span> <span class="s">&#34; age = &#34;</span> <span class="o">+</span> <span class="n">age</span> <span class="o">+</span> <span class="s">&#34; rank = &#34;</span> <span class="o">+</span> <span class="n">rank</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>QueryDSLì€ ìë°” ì½”ë“œë¡œ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— <code>rankPath</code> ì²˜ëŸ¼ ë³µì¡í•œ ì¡°ê±´ì„ ë³€ìˆ˜ë¡œ ì„ ì–¸í•´ì„œ <br> <code>select</code> ì ˆ, <code>orderBy</code> ì ˆì—ì„œ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">username</span> <span class="o">=</span> <span class="n">member4</span> <span class="n">age</span> <span class="o">=</span> <span class="n">40</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">3</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">member1</span> <span class="n">age</span> <span class="o">=</span> <span class="n">10</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">2</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">member2</span> <span class="n">age</span> <span class="o">=</span> <span class="n">20</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">2</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">member3</span> <span class="n">age</span> <span class="o">=</span> <span class="n">30</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">1</span>
</code></pre></div><br>
<br>
<br>
<h2 id="ìƒìˆ˜-ë¬¸ì-ë”í•˜ê¸°">ìƒìˆ˜, ë¬¸ì ë”í•˜ê¸°</h2>
<p>ìƒìˆ˜ê°€ í•„ìš”í•˜ë©´ <code>Expressions.constant(xxx)</code> ì‚¬ìš©</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">constant</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">,</span> <span class="n">Expressions</span><span class="o">.</span><span class="na">constant</span><span class="o">(</span><span class="s">&#34;A&#34;</span><span class="o">))</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">Tuple</span> <span class="n">tuple</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;tuple = &#34;</span> <span class="o">+</span> <span class="n">tuple</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><br>
<p><strong>ì°¸ê³ </strong> <br> ìœ„ì™€ ê°™ì´ ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë©´ SQLì— constant ê°’ì„ ë„˜ê¸°ì§€ ì•ŠëŠ”ë‹¤. <br> ìƒìˆ˜ë¥¼ ë”í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ìµœì í™”ê°€ ì–´ë ¤ìš°ë©´ SQLì— constant ê°’ì„ ë„˜ê¸´ë‹¤.</p>
<br>
<br>
<h3 id="ë¬¸ì-ë”í•˜ê¸°-concat">ë¬¸ì ë”í•˜ê¸° concat</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">concat</span><span class="o">()</span> <span class="o">{</span>

    <span class="c1">// {username}_{age}
</span><span class="c1"></span>    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">concat</span><span class="o">(</span><span class="s">&#34;_&#34;</span><span class="o">).</span><span class="na">concat</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">stringValue</span><span class="o">()))</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;member1&#34;</span><span class="o">))</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;s = &#34;</span> <span class="o">+</span> <span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*ì‹¤í–‰ê²°ê³¼*/</span>
<span class="cm">/*
</span><span class="cm">s = member1_10
</span><span class="cm">*/</span>
</code></pre></div><br>
<p><strong>ì°¸ê³ </strong> <br> <code>member.age.stringValue()</code> ë¶€ë¶„ì´ ì¤‘ìš”í•œë°, ë¬¸ìê°€ ì•„ë‹Œ ë‹¤ë¥¸ íƒ€ì…ë“¤ì€ <code>stringValue()</code> ë¡œ ë¬¸ìë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤. <br> ì´ ë°©ë²•ì€ ENUMì„ ì²˜ë¦¬í•  ë–„ë„ ìì£¼ ì‚¬ìš©í•œë‹¤.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2021-12-31</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://jaeyeonme.github.io/posts/querydsl-basic-grammer/" data-title="QueryDSL ê¸°ë³¸ ë¬¸ë²•" data-hashtags="QueryDSL"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://jaeyeonme.github.io/posts/querydsl-basic-grammer/" data-hashtag="QueryDSL"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://jaeyeonme.github.io/posts/querydsl-basic-grammer/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Share on Blogger" data-sharer="blogger" data-url="https://jaeyeonme.github.io/posts/querydsl-basic-grammer/" data-title="QueryDSL ê¸°ë³¸ ë¬¸ë²•" data-description=""><i class="fab fa-blogger fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/querydsl/">QueryDSL</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/spring-data-jpa-extension/" class="prev" rel="prev" title="í™•ì¥ ê¸°ëŠ¥"><i class="fas fa-angle-left fa-fw"></i>í™•ì¥ ê¸°ëŠ¥</a>
            <a href="/posts/querydsl-intermediate-grammer/" class="next" rel="next" title="QueryDSL ì¤‘ê¸‰ ë¬¸ë²•">QueryDSL ì¤‘ê¸‰ ë¬¸ë²•<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><script src="https://utteranc.es/client.js"
                        repo="jaeyeonme/blog_comments"
                        issue-term="pathname"
                        theme="preferred-color-scheme"
                        crossorigin="anonymous"
                        async>
                </script><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://utteranc.es/">Utterances</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.91.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Jaeyeon</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":500},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"","lightTheme":"github-light","repo":"jaeyeonme/blog_comments"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
