<!DOCTYPE html>
<html lang="en">
    <head>
	<meta name="generator" content="Hugo 0.91.2" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>ğŸ“š | Dev Blog</title><meta name="Description" content=""><meta property="og:title" content="ğŸ“š | Dev Blog" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://jaeyeonme.github.io/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ğŸ“š | Dev Blog"/>
<meta name="twitter:description" content=""/>
<meta name="application-name" content="ğŸ“š | Dev Blog">
<meta name="apple-mobile-web-app-title" content="ğŸ“š | Dev Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jaeyeonme.github.io/" /><link rel="alternate" href="/index.xml" type="application/rss+xml" title="ğŸ“š | Dev Blog">
    <link rel="feed" href="/index.xml" type="application/rss+xml" title="ğŸ“š | Dev Blog"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https:\/\/jaeyeonme.github.io\/","inLanguage": "en","author": {
                "@type": "Person",
                "name": "Jaeeon"
            },"name": "ğŸ“š | Dev Blog"
    }
    </script></head>
    <body header-desktop="auto" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ğŸ“š | Dev Blog">ğŸ“š | Dev Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ğŸ“š | Dev Blog">ğŸ“š | Dev Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="page home" posts><div class="home-profile"><div class="home-avatar"><a href="/posts/" title="Posts"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/profile.png"
        data-srcset="/images/profile.png, /images/profile.png 1.5x, /images/profile.png 2x"
        data-sizes="auto"
        alt="/images/profile.png"
        title="/images/profile.png" /></a></div><h2 class="home-subtitle"><div id="id-1" class="typeit"></div></h2><div class="links"><a href="https://github.com/jaeyeonme" title="GitHub" target="_blank" rel="noopener noreffer me"><i class="fab fa-github-alt fa-fw"></i></a><a href="mailto:cjyeon1022@gmail.com" title="Email" rel=" me"><i class="far fa-envelope fa-fw"></i></a><a href="/index.xml" title="RSS" target="_blank" rel="noopener noreffer me"><i class="fas fa-rss fa-fw"></i></a></div></div>
<article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/jpa-persistence-management-works/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/jpa.png"
        data-srcset="/images/JPA/jpa.png, /images/JPA/jpa.png 1.5x, /images/JPA/jpa.png 2x"
        data-sizes="auto"
        alt="/images/JPA/jpa.png"
        title="/images/JPA/jpa.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/jpa-persistence-management-works/">ì˜ì†ì„±ê´€ë¦¬ - ë‚´ë¶€ ë™ì‘ ë°©ì‹</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-29">2021-12-29</time></span>&nbsp;<span class="post-category">included in <a href="/categories/jpa/"><i class="far fa-folder fa-fw"></i>JPA</a></span></div><div class="content">1. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸  ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™í•˜ëŠ” ì‹œì ì— EntityManagerFactory ë¥¼ ìƒì„±í•˜ì—¬ ê°€ì§€ê³  ìˆìœ¼ë©°, ì‚¬ìš©ìì˜ ìš”ì²­ì´ ìˆì„ ë•Œ EntityManagerë¥¼ ìƒì„±í•˜ì—¬ ì»¤ë„¥ì…˜ í’€(Connection Pool)ì„ ì‚¬ìš©í•´ì„œ DBë¥¼ í•¸ë“¤ë§ í•˜ê²Œ ëœë‹¤.  ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë€?   ì—”í‹°í‹°ë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” í™˜ê²½
  EntityManager.persist(entity);
â†’ DBì— ì €ì¥í•œë‹¤ê¸° ë³´ë‹¤ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í†µí•´ ì—”í‹°í‹°ë¥¼ ì˜ì†í™” í•œë‹¤ëŠ” ì˜ë¯¸
 ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì—”í‹°í‹°ë¥¼ ì €ì¥í•œë‹¤ëŠ” ë§    ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ë…¼ë¦¬ì ì¸ ê°œë…
  ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.
  ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ í†µí•´ì„œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼
 J2SE í™˜ê²½    ì—”í‹°í‹°ì˜ ìƒëª… ì£¼ê¸°  ë¹„ì˜ì†(new / transient): ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì „í˜€ ê´€ê³„ê°€ ì—†ëŠ” ìƒˆë¡œìš´ ìƒíƒœ ì˜ì†(managed): ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ê´€ë¦¬ë˜ëŠ” ìƒíƒœ ì¤€ì˜ì†(detached): ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë˜ì—ˆë‹¤ê°€ ë¶„ë¦¬ëœ ìƒíƒœ ì‚­ì œ(removed): ì‚­ì œëœ ìƒíƒœ  ë¹„ì˜ì† : JPAì— ê´€ê³„ì—†ì´ ê°ì²´ ìƒì„±ë§Œ ëœ ìƒíƒœ
// ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†) Member member = new Member(); member.setId(&#34;member1&#34;); member.setUsername(&#34;íšŒì›1&#34;); 
ì˜ì† // ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†) Member member = new Member(); member.setId(&#34;member1&#34;); member.setUsername(&#34;íšŒì›1&#34;); EntityManager em = emf.createEntityManager(); em.getTransaction().begin(); // ê°ì²´ë¥¼ ì €ì¥í•œ ìƒíƒœ(ì˜ì†) em.persist(member); 
ì¤€ì˜ì†, ì‚­ì œ // íšŒì› ì—”í‹°í‹°ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë¶„ë¦¬, ì¤€ì˜ì† ìƒíƒœ em.detach(member); // ê°ì²´ë¥¼ ì‚­ì œí•œ ìƒíƒœ(ì‚­ì œ) em.remove(member);  ì¤€ì˜ì†: ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‚­ì œí•˜ëŠ” ê²ƒ ì‚­ì œëŠ” ì‹¤ì œë¡œ DBì—ì„œ í•´ë‹¹ ROWë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒ  2. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ì´ì  1. 1ì°¨ ìºì‹œ Member member = new Member(); member.setId(&#34;member1&#34;); member.setUsername(&#34;íšŒì›1&#34;); //1ì°¨ ìºì‹œì— ì €ì¥ë¨ em.persist(member); //1ì°¨ ìºì‹œì—ì„œ ì¡°íšŒ Member findMember = em.find(Member.class, &#34;member1&#34;);  ì¡°íšŒ ì‹œ ì˜ì† ì»¨í…ìŠ¤íŠ¸ì•ˆì—ì„œ 1ì°¨ ìºì‹œë¥¼ ì¡°íšŒ í›„ í•´ë‹¹ ì—”í‹°í‹°ê°€ ìˆì„ ê²½ìš° ìºì‹œë¥¼ ì¡°íšŒ í•´ ì˜¨ë‹¤. ì¡°íšŒ ì‹œ ì˜ì† ì»¨í…ìŠ¤íŠ¸ ì•ˆì—ì„œ 1ì°¨ ìºì‹œë¥¼ ì¡°íšŒ í›„ í•´ë‹¹ ì—”í‹°í‹°ê°€ ì—†ì„ ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒí•´ ì˜¨ë‹¤. ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ ë‚´ë¶€ì—ì„œ ë§Œë“¤ê³  ì¢…ë£Œë˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì¢…ë£Œë  ê²½ìš° 1ì°¨ìºì‹œëŠ” ë‹¤ ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì— í° ë„ì›€ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë³µì¡í•´ ì§ˆ ìˆ˜ë¡ íš¨ê³¼ëŠ” ì»¤ì§„ë‹¤.)  2. ë™ì¼ì„±(identity) ë³´ì¥ Member findMember = em.find(Member.class, 100L); Member findMember2 = em.find(Member.class, 100L); System.out.println(findMember == findMember2); // true : 1ì°¨ ìºì‹œë¡œ ë°˜ë³µ ê°€ëŠ¥í•œ ì½ê¸°(REPEATABLE READ) ë“±ê¸‰ì˜ íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€ì„ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì•„ë‹Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì°¨ì›ì—ì„œ ì œê³µ
 ì°¸ê³ : íŠ¸ëœì­ì…˜ì˜ ê²©ë¦¬ìˆ˜ì¤€ì´ ê¶ê¸ˆí•˜ë©´ íŠ¸ëœì­ì…˜ì´ ë³´ì¥í•´ì•¼ í•˜ëŠ” ACIDë¥¼ ê¸°ì–µí•˜ì.
 3. ì—”í‹°í‹° ë“±ë¡ - íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ì§€ì§€ì—° Member member = new Member(150L, &#34;A&#34;); Member member2 = new Member(160L, &#34;B&#34;); em.persist(member); em.persist(member2); // ì—”í‹°í‹° ë“±ë¡ì€ ì•„ì§ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. (ì“°ì§€ ì§€ì—°)  System.out.println(&#34;=========&#34;); tx.commit(); // ì—í‹°í‹° ë“±ë¡ì€ ì´ ë–„ ë™ì‹œì— ìˆ˜í–‰ëœë‹¤. 
memberAì™€ memberrBëŠ” ë‘˜ ë‹¤ ì“°ê¸°ì§€ì—° SQLì €ì¥ì†Œì— ì €ì¥ë˜ì–´ìˆê³  ì‹¤ì œ DBì— ì ìš©ì€ ì•ˆëœ ìƒíƒœ
commit() ì‹œì ì— ì“°ê¸°ì§€ì—° SQLì— ì €ì¥ëœ ì¿¼ë¦¬ë“¤ì„ ë‹¤ ì‹¤í–‰ì‹œì¼œì„œ DBì— ì ìš©í•œë‹¤.
ì“°ê¸° ì§€ì—°ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
-&gt; ë²„í¼ë§ ê¸°ëŠ¥ì´ ì œê³µ
&lt;property name=&#34;hibernate.jdbc.batch_size&#34; value=&#34;10&#34;/&gt; -&gt; 10ê°œì”© ìŒ“ì¼ë•Œë§ˆë‹¤ ì ìš©í•˜ê²Œ í•˜ëŠ” ê¸°ëŠ¥
-&gt; ì¿¼ë¦¬ë¥¼ ì—¬ëŸ¬ë²ˆ ë‚ ë¦¬ì§€ ì•Šê³  ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.
4. ì—”í‹°í‹° ìˆ˜ì • - ë³€ê²½ê°ì§€(Dirty Checking) transaction.begin(); //ì—”í‹°í‹° ì¡°íšŒ Member findMember = em.find(Member.class, &#34;memberA&#34;); //ì˜ì† ì—”í‹°í‹° ë°ì´í„° ìˆ˜ì • findMember.setUsername(&#34;hi&#34;); findMember.setAge(10); transaction.commit(); â†’ 1ì°¨ ìºì‹œì•ˆì—ëŠ” @Id, Entity , ìŠ¤ëƒ…ìƒ· ì´ ìˆë‹¤. ì—¬ê¸°ì„œ ìŠ¤ëƒ…ìƒ· ì€ ìµœì´ˆë¡œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸(1ì°¨ìºì‹œ)ì— ë“¤ì–´ì˜¤ëŠ”ìˆœê°„ ìŠ¤ëƒ…ìƒ·ì„ ì°ì–´ì„œ ì €ì¥í•´ë‘”ë‹¤.
â†’ JPAëŠ” íŠ¸ëœì­ì…˜ì´ ì»¤ë°‹(commit)ë˜ëŠ” ìˆœê°„ ì—”í‹°í‹°ì™€ ìŠ¤ëƒ…ìƒ·ì„ ëª¨ë‘ ë¹„êµí•œë‹¤.
â†’ ë³€ê²½ëœ ê²ƒì´ ìˆì„ ê²½ìš° ì“°ê¸°ì§€ì—° SQL ì €ì¥ì†Œ ì— ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ë¥¼ ì €ì¥í•˜ê³  ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.
5. ì—”í‹°í‹° ì‚­ì œ //ì‚­ì œ ëŒ€ìƒ ì—”í‹°í‹° ì¡°íšŒ Member member = em.find(Member.class, &#34;memberA&#34;); em.remove(member);//ì—”í‹°í‹° ì‚­ì œ 
3. í”ŒëŸ¬ì‹œ(flush) : ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜(sync)
  í”ŒëŸ¬ì‹œ ë°œìƒ
 ë³€ê²½ ê°ì§€ ìˆ˜ì •ëœ ì—”í‹°í‹° ì“°ê¸°ì§€ì—° SQL ì €ì¥ì†Œì— ë“±ë¡ ì“°ê¸° ì§€ì—° SQLì €ì¥ì†Œì˜ ì¿¼ë¦¬ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ì†¡(ë“±ë¡, ìˆ˜ì •, ì‚­ì œ ì¿¼ë¦¬)    ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í”ŒëŸ¬ì‹œ í•˜ëŠ” ë°©ë²•</div><div class="post-footer">
        <a href="/posts/jpa-persistence-management-works/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/jpa/">JPA</a>,&nbsp;<a href="/tags/hibernate/">Hibernate</a></div></div>
</article></div></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.91.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Jaeeon</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@7.0.4/dist/typeit.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":500},"data":{"id-1":"Life of record"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"typeit":{"cursorChar":"|","cursorSpeed":500,"data":{"id-1":["id-1"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
