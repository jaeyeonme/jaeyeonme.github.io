<!DOCTYPE html>
<html lang="en">
    <head>
	<meta name="generator" content="Hugo 0.91.2" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>ğŸ“š | Dev Blog</title><meta name="Description" content=""><meta property="og:title" content="ğŸ“š | Dev Blog" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://jaeyeonme.github.io/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ğŸ“š | Dev Blog"/>
<meta name="twitter:description" content=""/>
<meta name="application-name" content="ğŸ“š | Dev Blog">
<meta name="apple-mobile-web-app-title" content="ğŸ“š | Dev Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jaeyeonme.github.io/" /><link rel="alternate" href="/index.xml" type="application/rss+xml" title="ğŸ“š | Dev Blog">
    <link rel="feed" href="/index.xml" type="application/rss+xml" title="ğŸ“š | Dev Blog"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https:\/\/jaeyeonme.github.io\/","inLanguage": "en","author": {
                "@type": "Person",
                "name": "Jaeyeon"
            },"name": "ğŸ“š | Dev Blog"
    }
    </script></head>
    <body header-desktop="auto" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ğŸ“š | Dev Blog">ğŸ“š | Dev Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ğŸ“š | Dev Blog">ğŸ“š | Dev Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="page home" posts><div class="home-profile"><div class="home-avatar"><a href="/posts/" title="Posts"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/profile.png"
        data-srcset="/images/profile.png, /images/profile.png 1.5x, /images/profile.png 2x"
        data-sizes="auto"
        alt="/images/profile.png"
        title="/images/profile.png" /></a></div><h2 class="home-subtitle"><div id="id-1" class="typeit"></div></h2><div class="links"><a href="https://github.com/jaeyeonme" title="GitHub" target="_blank" rel="noopener noreffer me"><i class="fab fa-github-alt fa-fw"></i></a><a href="mailto:cjyeon1022@gmail.com" title="Email" rel=" me"><i class="far fa-envelope fa-fw"></i></a><a href="/index.xml" title="RSS" target="_blank" rel="noopener noreffer me"><i class="fas fa-rss fa-fw"></i></a></div></div>
<article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/spring-data-jpa-with-querydsl/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/querydsl.png"
        data-srcset="/images/JPA/querydsl.png, /images/JPA/querydsl.png 1.5x, /images/JPA/querydsl.png 2x"
        data-sizes="auto"
        alt="/images/JPA/querydsl.png"
        title="/images/JPA/querydsl.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/spring-data-jpa-with-querydsl/">Spring Data JPAê°€ ì œê³µí•˜ëŠ” QueryDSL</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2022-01-01">2022-01-01</time></span>&nbsp;<span class="post-category">included in <a href="/categories/querydsl/"><i class="far fa-folder fa-fw"></i>QueryDSL</a></span></div><div class="content">1. ì¸í„°í˜ì´ìŠ¤ ì§€ì› - QuerydslPredicateExecutor  ê³µì‹ URL : https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl  QuerydslPredicateExecutor ì¸í„°í˜ì´ìŠ¤
public interface QuerydslPredicateExecutor&lt;T&gt; { Optional&lt;T&gt; findById(Predicate predicate); Iterable&lt;T&gt; findAll(Predicate predicate); long count(Predicate predicate); boolean exists(Predicate predicate); // â€¦ more functionality omitted.  } 
ë¦¬í¬ì§€í† ë¦¬ì— ì ìš©
interface MemberRepository extends JpaRepository&lt;User, Long&gt;, QuerydslPredicateExecutor&lt;User&gt; { } Iterable result = memberRepository.findAll( member.age.between(10, 40) .and(member.username.eq(&#34;member1&#34;)) ); 
í•œê³„ì 
 ì¡°ì¸X (ë¬µì‹œì  ì¡°ì¸ì€ ê°€ëŠ¥í•˜ì§€ë§Œ left joinì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤) í´ë¼ì´ì–¸íŠ¸ê°€ Querydslì— ì˜ì¡´í•´ì•¼ í•œë‹¤. ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ê°€ Querydsl ì´ë¼ëŠ” êµ¬í˜„ ê¸°ìˆ ì— ì˜ì¡´í•´ì•¼ í•œë‹¤. ë³µì¡í•œ ì‹¤ë¬´í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” í•œê³„ê°€ ëª…í™•í•˜ë‹¤.  ì°¸ê³ : QuerydslPredicateExecutor ëŠ” Pageable, Sortë¥¼ ëª¨ë‘ ì§€ì›í•˜ê³  ì •ìƒ ë™ì‘í•œë‹¤.
2. Querydsl Web ì§€ì›  ê³µì‹ URL : https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.web.type-safe  í•œê³„ì 
 ë‹¨ìˆœí•œ ì¡°ê±´ë§Œ ê°€ëŠ¥ ì¡°ê±´ì„ ì»¤ìŠ¤í…€í•˜ëŠ” ê¸°ëŠ¥ì´ ë³µì¡í•˜ê³  ëª…ì‹œì ì´ì§€ ì•ŠìŒ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ Querydslì— ì˜ì¡´ ë³µì¡í•œ ì‹¤ë¬´í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” í•œê³„ê°€ ëª…í™•  3. ë¦¬í¬ì§€í† ë¦¬ ì§€ì› - QuerydslRepositorySupport QuerydslRepositorySupport
ì¥ì 
 getQuerydsl().applyPagination() ìŠ¤í”„ë§ ë°ì´í„°ê°€ ì œê³µí•˜ëŠ” í˜ì´ì§•ì„ Querydslë¡œ í¸ë¦¬í•˜ê²Œ ë³€í™˜ ê°€ëŠ¥(ë‹¨! SortëŠ” ì˜¤ë¥˜ë°œìƒ) from() ìœ¼ë¡œ ì‹œì‘ ê°€ëŠ¥(ìµœê·¼ì—ëŠ” QueryFactoryë¥¼ ì‚¬ìš©í•´ì„œ select() ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì´ ë” ëª…ì‹œì ) EntityManager ì œê³µ  í•œê³„
 Querydsl 3.x ë²„ì „ì„ ëŒ€ìƒìœ¼ë¡œ ë§Œë“¬ Querydsl 4.x ì— ë‚˜ì˜¨ JPAQueryFactoryë¡œ ì‹œì‘í•  ìˆ˜ ì—†ìŒ  selectë¡œ ì‹œì‘í•  ìˆ˜ ì—†ìŒ (fromìœ¼ë¡œ ì‹œì‘í•´ì•¼ í•¨)   QueryFactory ë¥¼ ì œê³µí•˜ì§€ ì•ŠìŒ ìŠ¤í”„ë§ ë°ì´í„° Sort ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ì§€ ì•ŠìŒ  4. Querydsl ì§€ì› í´ë˜ìŠ¤ ì§ì ‘ ë§Œë“¤ê¸° ìŠ¤í”„ë§ ë°ì´í„°ê°€ ì œê³µí•˜ëŠ” QuerydslRepositorySupport ê°€ ì§€ë‹Œ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ì§ì ‘ QueryDSL ì§€ì› í´ë˜ìŠ¤ë¥´ ë§Œë“¤ì–´ë³´ì.
ì¥ì 
 ìŠ¤í”„ë§ ë°ì´í„°ê°€ ì œê³µí•˜ëŠ” í˜ì´ì§•ì„ í¸ë¦¬í•˜ê²Œ ë³€í™˜ í˜ì´ì§•ê³¼ ì¹´ìš´íŠ¸ ì¿¼ë¦¬ ë¶„ë¦¬ ê°€ëŠ¥ ìŠ¤í”„ë§ ë°ì´í„° Sort ì§€ì› select() , selectFrom() ìœ¼ë¡œ ì‹œì‘ ê°€ëŠ¥ EntityManager , QueryFactory ì œê³µ  Querydsl4RepositorySupport /** * Querydsl 4.x ë²„ì „ì— ë§ì¶˜ Querydsl ì§€ì› ë¼ì´ë¸ŒëŸ¬ë¦¬ * * @author Yonghan Kim * org.springframework.data.jpa.repository.support.QuerydslRepositorySupport */ @Repository public abstract class Querydsl4RepositorySupport { private final Class domainClass; private Querydsl querydsl; private EntityManager entityManager; private JPAQueryFactory queryFactory; public Querydsl4RepositorySupport(Class&lt;?&gt; domainClass) { Assert.notNull(domainClass, &#34;Domain class must not be null!&#34;); this.domainClass = domainClass; } @Autowired public void setEntityManager(EntityManager entityManager) { Assert.notNull(entityManager, &#34;EntityManager must not be null!&#34;); JpaEntityInformation entityInformation = JpaEntityInformationSupport.getEntityInformation(domainClass, entityManager); SimpleEntityPathResolver resolver = SimpleEntityPathResolver.INSTANCE; EntityPath path = resolver.createPath(entityInformation.getJavaType()); this.entityManager = entityManager; this.querydsl = new Querydsl(entityManager, new PathBuilder&lt;&gt;(path.getType(), path.getMetadata())); this.queryFactory = new JPAQueryFactory(entityManager); } @PostConstruct public void validate() { Assert.notNull(entityManager, &#34;EntityManager must not be null!&#34;); Assert.notNull(querydsl, &#34;Querydsl must not be null!&#34;); Assert.notNull(queryFactory, &#34;QueryFactory must not be null!&#34;); } protected JPAQueryFactory getQueryFactory() { return queryFactory; } protected Querydsl getQuerydsl() { return querydsl; } protected EntityManager getEntityManager() { return entityManager; } protected &lt;T&gt; JPAQuery&lt;T&gt; select(Expression&lt;T&gt; expr) { return getQueryFactory().select(expr); } protected &lt;T&gt; JPAQuery&lt;T&gt; selectFrom(EntityPath&lt;T&gt; from) { return getQueryFactory().selectFrom(from); } protected &lt;T&gt; Page&lt;T&gt; applyPagination(Pageable pageable, Function&lt;JPAQueryFactory, JPAQuery&gt; contentQuery) { JPAQuery jpaQuery = contentQuery.apply(getQueryFactory()); List&lt;T&gt; content = getQuerydsl().applyPagination(pageable, jpaQuery).fetch(); return PageableExecutionUtils.getPage(content, pageable, jpaQuery::fetchCount); } protected &lt;T&gt; Page&lt;T&gt; applyPagination(Pageable pageable, Function&lt;JPAQueryFactory, JPAQuery&gt; contentQuery, Function&lt;JPAQueryFactory, JPAQuery&gt; countQuery) { JPAQuery jpaContentQuery = contentQuery.apply(getQueryFactory()); List&lt;T&gt; content = getQuerydsl().applyPagination(pageable, jpaContentQuery).fetch(); JPAQuery countResult = countQuery.apply(getQueryFactory()); return PageableExecutionUtils.getPage(content, pageable, countResult::fetchCount); } } 
Querydsl4RepositorySupport ì‚¬ìš© ì½”ë“œ @Repository public class MemberTestRepository extends Querydsl4RepositorySupport { public MemberTestRepository() { super(Member.class); } public List&lt;Member&gt; basicSelect() { return select(member) .from(member) .fetch(); } public List&lt;Member&gt; basicSelectFrom() { return selectFrom(member) .fetch(); } public Page&lt;Member&gt; searchPageByApplyPage(MemberSearchCondition condition, Pageable pageable) { JPAQuery&lt;Member&gt; query = selectFrom(member) .leftJoin(member.team, team) .where(usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ); List&lt;Member&gt; content = getQuerydsl().</div><div class="post-footer">
        <a href="/posts/spring-data-jpa-with-querydsl/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/querydsl/">QueryDSL</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/spring-data-jpa-and-querydsl/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/querydsl.png"
        data-srcset="/images/JPA/querydsl.png, /images/JPA/querydsl.png 1.5x, /images/JPA/querydsl.png 2x"
        data-sizes="auto"
        alt="/images/JPA/querydsl.png"
        title="/images/JPA/querydsl.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/spring-data-jpa-and-querydsl/">Spring Data JPAì™€ QueryDSL</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2022-01-01">2022-01-01</time></span>&nbsp;<span class="post-category">included in <a href="/categories/querydsl/"><i class="far fa-folder fa-fw"></i>QueryDSL</a></span></div><div class="content">ìŠ¤í”„ë§ ë°ì´í„° JPA ë¦¬í¬ì§€í† ë¦¬ë¡œ ë³€ê²½ ìŠ¤í”„ë§ ë°ì´í„° JPA - MemberRepository ìƒì„± package study.querydsl.repository; import org.springframework.data.jpa.repository.JpaRepository; import study.querydsl.entity.Member; import java.util.List; public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { // select m from m where m.username = ?;  List&lt;Member&gt; findByUsername(String username); } 
ìŠ¤í”„ë§ ë°ì´í„° JPA í…ŒìŠ¤íŠ¸ @Test public void basicTest() throws Exception { Member member = new Member(&#34;member1&#34;, 10); memberRepository.save(member); Member findMember = memberRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result1 = memberRepository.findAll(); assertThat(result1).containsExactly(member); List&lt;Member&gt; result2 = memberRepository.findByUsername(&#34;member1&#34;); assertThat(result2).containsExactly(member); }  QueryDSL ì „ìš© ê¸°ëŠ¥ì¸ íšŒì› searchë¥¼ ì‘ì„±í•  ìˆ˜ì—†ë‹¤. â†’ ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ í•„ìš”  ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ ì‚¬ìš©ë²•
 ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ì‘ì„± ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ìŠ¤í”„ë§ ë°ì´í„° ë¦¬í¬ì§€í† ë¦¬ì— ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ìƒì†  ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ êµ¬ì„± 1. ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ì‘ì„± public interface MemberRepositoryCustom { List&lt;Member&gt; findMemberCustom(); } 
2. ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ public class MemberRepositoryImpl implements MemberRepositoryCustom{ @Override public List&lt;Member&gt; findMemberCustom() { return null; } private final JPAQueryFactory queryFactory; public MemberRepositoryImpl(JPAQueryFactory queryFactory) { this.queryFactory = queryFactory; } @Override public List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition) { return queryFactory .select(new QMemberTeamDto( member.id.as(&#34;memberId&#34;), member.username, member.age, team.id.as(&#34;teamId&#34;), team.name.as(&#34;teamName&#34;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .fetch(); } private BooleanExpression usernameEq(String username) { return isEmpty(username)?null:member.username.eq(username); } private BooleanExpression teamNameEq(String teamName) { return hasText(teamName) ? team.name.eq(teamName):null; } private BooleanExpression ageGoe(Integer ageGoe) { return ageGoe!= null ? member.age.goe(ageGoe):null; } private BooleanExpression ageLoe(Integer ageLoe) { return ageLoe!= null ? member.age.loe(ageLoe):null; } } 
3. ìŠ¤í”„ë§ ë°ì´í„° ë¦¬í¬ì§€í† ë¦¬ì— ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ìƒì† public interface MemberRepository extends JpaRepository&lt;Member, Long&gt;, MemberRepositoryCustom { // select m from Member m where m.username = ?;  List&lt;Member&gt; findByUsername(String username); } 
ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± @Test public void searchTest() { Team teamA = new Team(&#34;teamA&#34;); Team teamB = new Team(&#34;teamB&#34;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&#34;member1&#34;, 10, teamA); Member member2 = new Member(&#34;member2&#34;, 20, teamA); Member member3 = new Member(&#34;member3&#34;, 30, teamB); Member member4 = new Member(&#34;member4&#34;, 40, teamB); em.persist(member1); em.persist(member2); em.persist(member3); em.persist(member4); MemberSearchCondition condition = new MemberSearchCondition(); condition.setAgeGoe(35); condition.setAgeLoe(40); condition.setTeamName(&#34;teamB&#34;); List&lt;MemberTeamDto&gt; result = memberRepository.search(condition); assertThat(result).extracting(&#34;username&#34;).containsExactly(&#34;member4&#34;); } 
ìŠ¤í”„ë§ ë°ì´í„° í˜ì´ì§• í™œìš© 1 - Querydsl í˜ì´ì§• ì—°ë™  ìŠ¤í”„ë§ ë°ì´í„°ì˜ Page, Pageableì„ í™œìš©í•´ë³´ì. ì „ì²´ ì¹´ìš´íŠ¸ë¥¼ í•œë²ˆì— ì¡°íšŒí•˜ëŠ” ë‹¨ìˆœí•œ ë°©ë²• ë°ì´í„° ë‚´ìš©ê³¼ ì „ì²´ ì¹´ìš´íŠ¸ë¥¼ ë³„ë„ë¡œ ì¡°íšŒí•˜ëŠ” ë°©ë²•  ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ì— í˜ì´ì§• 2ê°€ì§€ ì¶”ê°€ public interface MemberRepositoryCustom { List&lt;MemberTeamDto&gt; search(MemberSearchCondition condition); Page&lt;MemberTeamDto&gt; searchPageSimple(MemberSearchCondition condition, Pageable pageable); Page&lt;MemberTeamDto&gt; searchPageComplex(MemberSearchCondition condition, Pageable pageable); } 
ì „ì²´ ì¹´ìš´íŠ¸ë¥¼ í•œë²ˆì— ì¡°íšŒí•˜ëŠ” ë‹¨ìˆœí•œ ë°©ë²• - searchPageSimple() @Override public Page&lt;MemberTeamDto&gt; searchPageSimple(MemberSearchCondition condition, Pageable pageable) { QueryResults&lt;MemberTeamDto&gt; results = queryFactory .select(new QMemberTeamDto( member.id.as(&#34;memberId&#34;), member.username, member.age, team.id.as(&#34;teamId&#34;), team.name.as(&#34;teamName&#34;) )) .from(member) .leftJoin(member.team, team) .where( usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) .offset(pageable.getOffset()) // ëª‡ë²ˆì§¸ë¶€í„° ì‹œì‘í•  ê²ƒì¸ê°€  .limit(pageable.getPageSize()) // ëª‡ê°œë¥¼ ê°€ì ¸ì˜¬ ê²ƒì¸ê°€  .fetchResults(); List&lt;MemberTeamDto&gt; content = results.getResults(); long totalCount = results.getTotal(); return new PageImpl&lt;&gt;(content, pageable, totalCount); }  Querydslì´ ì œê³µí•˜ëŠ” fetchResults() ë¥¼ ì‚¬ìš©í•˜ë©´ ë‚´ìš©ê³¼ ì „ì²´ ì¹´ìš´íŠ¸ë¥¼ í•œë²ˆì— ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. (ì‹¤ì œ ì¿¼ë¦¬ëŠ” 2ë²ˆ í˜¸ì¶œ) fetchResult() ëŠ” ì¿¼ë¦¬ ì¹´ìš´íŠ¸ ì¿¼ë¦¬ ì‹¤í–‰ì‹œ í•„ìš”ì—†ëŠ” order by ëŠ” ì œê±°í•œë‹¤.  í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± @Test public void searchPageSimple() throws Exception { Team teamA = new Team(&#34;teamA&#34;); Team teamB = new Team(&#34;teamB&#34;); em.persist(teamA); em.persist(teamB); Member member1 = new Member(&#34;member1&#34;, 10, teamA); Member member2 = new Member(&#34;member2&#34;, 20, teamA); Member member3 = new Member(&#34;member3&#34;, 30, teamB); Member member4 = new Member(&#34;member4&#34;, 40, teamB); em.</div><div class="post-footer">
        <a href="/posts/spring-data-jpa-and-querydsl/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/querydsl/">QueryDSL</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/jpa-and-querydsl/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/querydsl.png"
        data-srcset="/images/JPA/querydsl.png, /images/JPA/querydsl.png 1.5x, /images/JPA/querydsl.png 2x"
        data-sizes="auto"
        alt="/images/JPA/querydsl.png"
        title="/images/JPA/querydsl.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/jpa-and-querydsl/">JPAì™€ QueryDSL</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-31">2021-12-31</time></span>&nbsp;<span class="post-category">included in <a href="/categories/querydsl/"><i class="far fa-folder fa-fw"></i>QueryDSL</a></span></div><div class="content">ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ì™€ Querydsl ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ @Repository public class MemberJpaRepository { private final EntityManager em; private final JPAQueryFactory queryFactory; public MemberJpaRepository(EntityManager em) { this.em = em; this.queryFactory = new JPAQueryFactory(em); } public void save(Member member) { em.persist(member); } public Optional&lt;Member&gt; findById(Long id) { Member findMember = em.find(Member.class, id); return Optional.ofNullable(findMember); } public List&lt;Member&gt; findAll() { return em.createQuery(&#34;select m from Member m&#34;, Member.class) .getResultList(); } public List&lt;Member&gt; findAll_Querydsl() { return queryFactory .selectFrom(member) .fetch(); } public List&lt;Member&gt; findByUsername(String username) { return em.createQuery(&#34;select m from Member m where m.username = :username&#34;, Member.class) .setParameter(&#34;username&#34;, username) .getResultList(); } public List&lt;Member&gt; findByUsername_Querydsl(String username) { return queryFactory .selectFrom(member) .where(member.username.eq(username)) .fetch(); } } 
ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ @SpringBootTest @Transactional class MemberJpaRepositoryTest { @Autowired EntityManager em; @Autowired MemberJpaRepository memberJpaRepository; @Test public void basicTest() { Member member = new Member(&#34;member1&#34;, 10); memberJpaRepository.save(member); Member findMember = memberJpaRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result1 = memberJpaRepository.findAll_Querydsl(); assertThat(result1).containsExactly(member); List&lt;Member&gt; result2 = memberJpaRepository.findByUsername_Querydsl(&#34;member1&#34;); assertThat(result2).containsExactly(member); } 
ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬ - Querydsl ì¶”ê°€ public List&lt;Member&gt; findAll() { return em.createQuery(&#34;select m from Member m&#34;, Member.class).getResultList(); } public List&lt;Member&gt; findAll_Querydsl() { return queryFactory .selectFrom(member) .fetch(); } public List&lt;Member&gt; findByUsername(String username) { return em.createQuery(&#34;select m from Member m where m.username = :username&#34;, Member.class) .setParameter(&#34;username&#34;, username) .getResultList(); } public List&lt;Member&gt; findByUsername_Querydsl(String username) { return queryFactory .selectFrom(member) .where(member.username.eq(username)) .fetch(); } 
Querydsl í…ŒìŠ¤íŠ¸ ì¶”ê°€ @Test public void basicQuerydslTest() throws Exception{ Member member = new Member(&#34;member1&#34;, 10); memberJpaRepository.save(member); Member findMember = memberJpaRepository.findById(member.getId()).get(); assertThat(findMember).isEqualTo(member); List&lt;Member&gt; result1 = memberJpaRepository.findAll_Querydsl(); assertThat(result1).containsExactly(member); List&lt;Member&gt; result2 = memberJpaRepository.findByUsername_Querydsl(&#34;member1&#34;); assertThat(result2).containsExactly(member); } 
JPAQueryFactory ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡ ë‹¤ìŒê³¼ ê°™ì´ JPAQueryFactory ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì„œ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•´ë„ ëœë‹¤.
@Bean JPAQueryFactory jpaQueryFactory(EntityManager em) { return new JPAQueryFactory(em); } 
ì°¸ê³  ë™ì‹œì„± ë¬¸ì œëŠ” ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ì—¬ê¸°ì„œ ìŠ¤í”„ë§ì´ ì£¼ì…í•´ì£¼ëŠ” ì—”í‹°í‹°ë§¤ë‹ˆì €(em)ëŠ” ì‹¤ì œ ë™ì‘ ì‹œì ì— ì§„ì§œ ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ì°¾ì•„ì£¼ëŠ” í”„ë¡ì‹œìš© ê°€ì§œ ì—”í‹°í‹° ë§¤ë‹ˆì €ì´ë‹¤. ì´ ê°€ì ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” ì‹¤ì œ ì‚¬ìš© ì‹œì ì— íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ì‹¤ì œ ì—”í‹°í‹° ë§¤ë‹ˆì €(ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸)ë¥¼ í• ë‹¹í•´ì¤€ë‹¤.
ë™ì  ì¿¼ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ì¡°íšŒ - Builder ì‚¬ìš© MemberTeamDto - ì¡°íšŒ ìµœì í™”ìš© DTO ì¶”ê°€ @Data public class MemberTeamDto { private Long memberId; private String username; private int age; private Long teamId; private String teamName; @QueryProjection public MemberTeamDto(Long memberId, String username, int age, Long teamId, String teamName) { this.memberId = memberId; this.username = username; this.age = age; this.teamId = teamId; this.teamName = teamName; } }  @QueryProjection ì„ ì¶”ê°€í–ˆë‹¤. QMemberTeamDto ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ./gradlew compileQuerydsl ì„ í•œë²ˆ ì‹¤í–‰í•˜ì.  ì°¸ê³  @QueryProjection ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ DTOê°€ Querydslì„ ì˜ì¡´í•˜ê²Œ ëœë‹¤. ì´ëŸ° ì˜ì¡´ì´ ì‹«ìœ¼ë©´, í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì„ ì œê±°í•˜ê³ , Proejction.bean(), fields(), constructor() ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
íšŒì› ê²€ìƒ‰ ì¡°ê±´ (MemberSearchCondition) package study.querydsl.dto; import lombok.Data; @Data public class MemberSearchCondition { // íšŒì›ëª…, íŒ€ëª…, ë‚˜ì´(ageGoe, ageLoe)  private String username; private String teamName; private Integer ageGoe; private Integer ageLoe; }  ì´ë¦„ì´ ë„ˆë¬´ ê¸¸ë©´ MemberCond ë“±ìœ¼ë¡œ ì¤„ì—¬ ì‚¬ìš©í•´ë„ ëœë‹¤.  Builderë¥¼ ì‚¬ìš©í•œ ì˜ˆì œ - searchByBuilder ë©”ì„œë“œ ì‘ì„± public List&lt;MemberTeamDto&gt; searchByBuilder(MemberSearchCondition condition) { BooleanBuilder builder = new BooleanBuilder(); if (hasText(condition.getUsername())) { builder.and(member.username.eq(condition.getUsername())); } if (hasText(condition.getTeamName())) { builder.and(team.name.eq(condition.getTeamName())); } if (condition.getAgeGoe() != null) { builder.and(member.age.goe(condition.getAgeGoe())); } if (condition.getAgeLoe() != null) { builder.and(member.age.loe(condition.getAgeLoe())); } return queryFactory .select(new QMemberTeamDto( member.id.as(&#34;memberId&#34;), member.username, member.age, team.id.as(&#34;teamId&#34;), team.name.as(&#34;teamName&#34;) )) .from(member) .leftJoin(member.team, team) .where(builder) .fetch(); }</div><div class="post-footer">
        <a href="/posts/jpa-and-querydsl/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/querydsl/">QueryDSL</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/querydsl-intermediate-grammer/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/querydsl.png"
        data-srcset="/images/JPA/querydsl.png, /images/JPA/querydsl.png 1.5x, /images/JPA/querydsl.png 2x"
        data-sizes="auto"
        alt="/images/JPA/querydsl.png"
        title="/images/JPA/querydsl.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/querydsl-intermediate-grammer/">QueryDSL ì¤‘ê¸‰ ë¬¸ë²•</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-31">2021-12-31</time></span>&nbsp;<span class="post-category">included in <a href="/categories/querydsl/"><i class="far fa-folder fa-fw"></i>QueryDSL</a></span></div><div class="content">í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ - ê¸°ë³¸ í”„ë¡œì ì…˜ : select ëŒ€ìƒ ì§€ì •
í”„ë¡œì ì…˜ ëŒ€ìƒì´ í•˜ë‚˜
List&lt;String&gt; result = queryFactory .select(member.username) .from(member) .fetch();  í”„ë¡œì ì…˜ ëŒ€ìƒì´ í•˜ë‚˜ë©´ íƒ€ì…ì„ ëª…í™•í•˜ê²Œ ì§€ì •í•  ìˆ˜ ìˆìŒ(List&lt;String&gt;) í”„ë¡œì ì…˜ ëŒ€ìƒì´ ë‘˜ ì´ìƒì´ë©´ íŠœí”Œì´ë‚˜ DTOë¡œ ì¡°íšŒ  íŠœí”Œ ì¡°íšŒ í”„ë¡œì ì…˜ ëŒ€ìƒì´ ë‘˜ ì´ìƒì¼ ë•Œ ì‚¬ìš©
com.querydsl.core.Tuple
List&lt;Tuple&gt; result = queryFactory .select(member.username, member.age) .from(member) .fetch(); for (Tuple tuple : result) { String username = tuple.get(member.username); Integer age = tuple.get(member.age); System.out.println(&#34;username = &#34; + username); System.out.println(&#34;age = &#34; + age); }  Tuple ì€ ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µì•ˆì—ì„œ ì“°ëŠ” ì •ë„ëŠ” ê´œì°®ì§€ë§Œ ê·¸ ë°–ì˜ ê³„ì¸µì—ì„œëŠ” DTOë¡œ ë³€í™˜í•´ì„œ ì“°ëŠ” ê²ƒì´ ì¢‹ë‹¤. â†’ Tuple ë„ ê²°êµ­ Querydslì— ì¢…ì†ì ì´ê¸° ë–„ë¬¸  í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ - DTO ì¡°íšŒ ìˆœìˆ˜ JPAì—ì„œ DTO ì¡°íšŒ ìœ„ì—ì„œ select ì ˆì—ì„œ ëŒ€ìƒì„ ì§€ì •(í”„ë¡œì ì…˜)í•´ì„œ ê°€ì ¸ì˜¤ê³  ì‹¶ì„ë•Œ ê·¸ ëŒ€ìƒì´ ë‘˜ ì´ìƒì´ë©´ Tupleë¡œ ê°€ì ¸ì™”ì—ˆë‹¤. í•˜ì§€ë§Œ, ê·¸ ì™¸ ê³„ì¸µìœ¼ë¡œ ê°€ì ¸ê°ˆ ë•ŒëŠ” DTOë¡œ ê°€ì ¸ê°€ëŠ”ê²Œ ì¢‹ë‹¤. ìš°ì„  ìˆœìˆ˜ JPAë¥¼ ì´ìš©í•´ì„œ DTOë¡œ ì¡°íšŒí•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì.
MemberDto
@Data @NoArgsConstructor public class MemberDto { private String username; private int age; public MemberDto(String username, int age) { this.username = username; this.age = age; } } 
ìˆœìˆ˜ JPAì—ì„œ DTO ì¡°íšŒ ì½”ë“œ
@Test public void findDtoByJPQL() { List&lt;MemberDto&gt; result = em.createQuery(&#34;select new study.querydsl.dto.MemberDto(m.username, m.age) from Member m&#34;, MemberDto.class) .getResultList(); for (MemberDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } }  ìˆœìˆ˜ JPAì—ì„œ DTOë¥¼ ì¡°íšŒí•  ë•ŒëŠ” new ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨ DTOì˜ packageì´ë¦„ì„ ë‹¤ ì ì–´ì¤˜ì•¼í•´ì„œ ì§€ì €ë¶„í•¨ ìƒì„±ì ë°©ì‹ë§Œ ì§€ì›í•¨  QueryDSL ë¹ˆ ìƒì„± (Bean Population) ê²°ê³¼ë¥¼ DTOë°˜í™˜í•  ë–„ ì‚¬ìš©í•˜ë©° 3ê°€ì§€ ë°©ë²•ì´ ì¡´ì¬í•œë‹¤.
 í”„ë¡œí¼í‹° ì ‘ê·¼ í•„ë“œ ì§ì ‘ ì ‘ê·¼ ìƒì„±ì ì‚¬ìš©  í”„ë¡œí¼í‹° ì ‘ê·¼ - Setter
@Test public void findDtoBySetter() { List&lt;MemberDto&gt; result = queryFactory .select(Projections.bean(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } }  Projections.bean(ì£¼ì…ëŒ€ìƒí´ë˜ìŠ¤, í”„ë¡œí¼í‹°1, í”„ë¡œí¼í‹°2&hellip;)ë°©ì‹ìœ¼ë¡œ í”„ë¡œí¼í‹°ì— ê°’ì„ ì£¼ì…  í•„ë“œ ì§ì ‘ ì ‘ê·¼
@Test public void findDtoByField() { List&lt;MemberDto&gt; result = queryFactory .select(Projections.fields(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } }  Getter, Setterê°€ ì—†ì–´ë„ í•„ë“œì— ë°”ë¡œ ê°’ì„ ì£¼ì… Projections.fields(ì£¼ì…ëŒ€ìƒí´ë˜ìŠ¤, í•„ë“œ1, í•„ë“œ2&hellip;)  í•„ë“œ ì§ì ‘ ì ‘ê·¼ - ë³„ì¹­ì´ ë‹¤ë¥¼ ë•Œ
@Test public void findUserDtoByField() throws Exception { QMember memberSub = new QMember(&#34;memberSub&#34;); List&lt;UserDto&gt; result = queryFactory .select(Projections.fields(UserDto.class, member.username.as(&#34;name&#34;), ExpressionUtils.as(JPAExpressions .select(memberSub.age.max()) .from(memberSub), &#34;age&#34;) )) .from(member) .fetch(); for (UserDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } }  í•„ë“œë‚˜ í”„ë¡œí¼í‹°ëª… ì ‘ê·¼ ìƒì„±ë°©ì‹ì—ì„œ ì´ë¦„ì´ ë‹¤ë¥¼ ë•Œ í•´ê²°ë°©ì•ˆì„ as(name)ì„ ì´ìš©í•´ì„œ í•´ê²°í•œë‹¤. ExpressionUtils.as(source,alias) : í•„ë“œë‚˜ ì„œë¸Œ ì¿¼ë¦¬ì— ë³„ì¹­ ì ìš© username.as(&quot;memberName&quot;) : í•„ë“œì— ë³„ì¹­ ì ìš©  ìƒì„±ì ì ìš©
@Test public void findDtoByConstructor() { List&lt;MemberDto&gt; result = queryFactory .select(Projections.constructor(MemberDto.class, member.username, member.age)) .from(member) .fetch(); for (MemberDto memberDto : result) { System.out.println(&#34;memberDto = &#34; + memberDto); } } 
í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ - @QueryProjection í”„ë¡œì ì…˜ê²°ê³¼ë¥¼ ë°˜í™˜í•  DTOì— @QueryProjection ì„ ìƒì„±ìì— ë¶™í˜€ì¤€ ë’¤ gradle â†’ tasks â†’ other â†’ compileQuerydsl ì„ í†µí•´ DTOë„ Qíƒ€ì…ìœ¼ë¡œ ìƒì„±í•´ ì¤€ë‹¤.
ìƒì„±ì + @QueryProjection @Data @NoArgsConstructor public class MemberDto { private String username; private int age; @QueryProjection public MemberDto(String username, int age) { this.username = username; this.age = age; } }  ./gradlew compileQuerydsl QMemberDto ìƒì„± í™•ì¸  @QueryProjection í™œìš© @Test public void findDtoByQueryProjection() throws Exception{ List&lt;MemberDto&gt; result = queryFactory .</div><div class="post-footer">
        <a href="/posts/querydsl-intermediate-grammer/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/querydsl/">QueryDSL</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/querydsl-basic-grammer/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/querydsl.png"
        data-srcset="/images/JPA/querydsl.png, /images/JPA/querydsl.png 1.5x, /images/JPA/querydsl.png 2x"
        data-sizes="auto"
        alt="/images/JPA/querydsl.png"
        title="/images/JPA/querydsl.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/querydsl-basic-grammer/">QueryDSL ê¸°ë³¸ ë¬¸ë²•</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-31">2021-12-31</time></span>&nbsp;<span class="post-category">included in <a href="/categories/querydsl/"><i class="far fa-folder fa-fw"></i>QueryDSL</a></span></div><div class="content">JPQL VS QueryDSL QueryDSL vs JPQL @Test public void startJQPL() { // member1ì„ ì°¾ì•„ë¼  String qlString = &#34;select m from Member m &#34; + &#34;where m.username = :username&#34;; Member findMember = em.createQuery(qlString, Member.class) .setParameter(&#34;username&#34;, &#34;member1&#34;) .getSingleResult(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } @Test public void startQuerydsl() { // member1ì„ ì°¾ì•„ë¼.  JPAQueryFactory queryFactory = new JPAQueryFactory(em); QMember m = new QMember(&#34;m&#34;); Member findMember = queryFactory .select(m) .from(m) .where(m.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  EntityManager ë¡œ JPAQueryFactory ìƒì„± Querydslì€ JPQL ë¹Œë” JPQL : ë¬¸ì(ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜), Querydsl : ì½”ë“œ(ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜) JPQL : íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì§ì ‘, Querydsl : íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ìë™ ì²˜ë¦¬  JPAQueryFactoryë¥¼ í•„ë“œë¡œ @SpringBootTest @Transactional public class QuerydslBasicTest { @Autowired EntityManager em; JPAQueryFactory queryFactory; @BeforeEach public void before() { queryFactory = new JPAQueryFactory(em); // ... 	} @Test public void startQuerydsl() { // member1ì„ ì°¾ì•„ë¼.  QMember m = new QMember(&#34;m&#34;); Member findMember = queryFactory .select(m) .from(m) .where(m.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } }  JPAQueryFactoryë¥¼ í•„ë“œë¡œ ì œê³µí•˜ë©´ ë™ì‹œì„± ë¬¸ì œëŠ” ì–´ë–»ê²Œ ë ê¹Œ? ë™ì‹œì„± ë¬¸ì œëŠ” JPAQueryFactoryë¥¼ ìƒì„±í•  ë•Œ ì œê³µí•˜ëŠ” EntityManager(em)ì— ë‹¬ë ¤ìˆë‹¤. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ê°™ì€ EntityManagerì— ì ‘ê·¼í•´ë„, íŠ¸ëœì­ì…˜ ë§ˆë‹¤ ë³„ë„ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì—, ë™ì‹œì„± ë¬¸ì œëŠ” ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.  ê¸°ë³¸ Q-Type í™œìš© Qí´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²• QMember qMember = new QMember(&#34;m&#34;); //ë³„ì¹­ ì§ì ‘ ì§€ì • QMember qMember = QMember.member; //ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš© 
ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ static importì™€ í•¨ê»˜ ì‚¬ìš© @Test public void startQuerydsl() { Member findMember = queryFactory .select(QMember.member) .from(QMember.member) .where(QMember.member.username.eq(&#34;member1&#34;)) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬  .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); } 
ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ ì‹¤í–‰ë˜ëŠ” JPQLì„ ë³¼ ìˆ˜ ìˆë‹¤.
spring.jpa.properties.hibernate.use_sql_comments: true 
ì°¸ê³ : ê°™ì€ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë©´ ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì
ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ ê¸°ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬ @Test public void search() { Member findMember = queryFactory .selectFrom(member) .where(member.username.eq(&#34;member1&#34;) .and(member.age.eq(10))) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  ê²€ìƒ‰ ì¡°ê±´ì€ .and() , .or() ë¥¼ ë©”ì„œë“œ ì²´ì¸ìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤. select ì™€ from ì€ selectFrom ìœ¼ë¡œ í•©ì¹  ìˆ˜ ìˆë‹¤.  JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ ì œê³µ member.username.eq(&#34;member1&#34;) // username = &#39;member1&#39; member.username.ne(&#34;member1&#34;) //username != &#39;member1&#39; member.username.eq(&#34;member1&#34;).not() // username != &#39;member1&#39;  member.username.isNotNull() //ì´ë¦„ì´ is not null  member.age.in(10, 20) // age in (10,20) member.age.notIn(10, 20) // age not in (10, 20) member.age.between(10,30) // between 10, 30  member.age.goe(30) // age &gt;= 30 member.age.gt(30) // age &gt; 30 member.age.loe(30) // age &lt;= 30 member.age.lt(30) // age &lt; 30  member.username.like(&#34;member%&#34;) // like ê²€ìƒ‰ member.username.contains(&#34;member&#34;) // like â€˜%member%â€™ ê²€ìƒ‰ member.username.startsWith(&#34;member&#34;) // like â€˜member%â€™ ê²€ìƒ‰ 
AND ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬ @Test public void searchAndParam() { Member findMember = queryFactory .selectFrom(member) .where( member.username.eq(&#34;member1&#34;), member.age.eq(10)) .fetchOne(); assertThat(findMember.getUsername()).isEqualTo(&#34;member1&#34;); }  where() ì— íŒŒë¼ë¯¸í„°ë¡œ ì¡°ê±´ê²€ìƒ‰ì„ ì¶”ê°€í•˜ë©´ AND ì¡°ê±´ì´ ì¶”ê°€ë¨ ì´ ê²½ìš° null ê°’ì€ ë¬´ì‹œ â†’ ë©”ì„œë“œ ì¶”ì¶œì„ í™œìš©í•´ì„œ ë™ì  ì¿¼ë¦¬ë¥¼ ê¹”ë”í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ â†’ ë’¤ì—ì„œ ì„¤ëª…  ê²°ê³¼ ì¡°íšŒ  fetch() : ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ, ë°ì´í„° ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ fetchOne() : ë‹¨ ê±´ ì¡°íšŒ  ê²°ê³¼ê°€ ì—†ìœ¼ë©´ : null ê²°ê³¼ê°€ ë‘˜ ì´ìƒì´ë©´ : com.querydsl.core.NonUniqueResultException   fetchFirst() : limit(1).fetchOne() fetchResults() : í˜ì´ì§• ì •ë³´ í¬í•¨, total count ì¿¼ë¦¬ ì¶”ê°€ ì‹¤í–‰ fetchCount() : count ì¿¼ë¦¬ë¡œ ë³€ê²½í•´ì„œ count ìˆ˜ ì¡°íšŒ  // List List&lt;Member&gt; fetch = queryFactory .selectFrom(member) .</div><div class="post-footer">
        <a href="/posts/querydsl-basic-grammer/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/querydsl/">QueryDSL</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/spring-data-jpa-extension/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/spring-data-jpa.png"
        data-srcset="/images/JPA/spring-data-jpa.png, /images/JPA/spring-data-jpa.png 1.5x, /images/JPA/spring-data-jpa.png 2x"
        data-sizes="auto"
        alt="/images/JPA/spring-data-jpa.png"
        title="/images/JPA/spring-data-jpa.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/spring-data-jpa-extension/">í™•ì¥ ê¸°ëŠ¥</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-31">2021-12-31</time></span>&nbsp;<span class="post-category">included in <a href="/categories/spring-data-jpa/"><i class="far fa-folder fa-fw"></i>Spring Data JPA</a></span></div><div class="content">1. ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ êµ¬í˜„ ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ êµ¬í˜„  ìŠ¤í”„ë§ ë°ì´í„° JPA ë¦¬í¬ì§€í† ë¦¬ëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œ ì •ì˜í•˜ê³  êµ¬í˜„ì²´ëŠ” ìŠ¤í”„ë§ì´ ìë™ ìƒì„± ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ë©´ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì´ ë„ˆë¬´ ë§ìŒ ë‹¤ì–‘í•œ ì´ìœ ë¡œ ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì§ì ‘ êµ¬í˜„í•˜ê³  ì‹¶ë‹¤ë©´?  JPA ì§ì ‘ ì‚¬ìš©(EntityManager) ìŠ¤í”„ë§ JDBC Template ì‚¬ìš© MyBatis ì‚¬ìš© ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ ì§ì ‘ ì‚¬ìš© ë“±ë“±.. QueryDSL ì‚¬ìš©    ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤
public interface MemberRepositoryCustom { List&lt;Member&gt; findMemberCustom(); } 
ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ í´ë˜ìŠ¤
@RequiredArgsConstructor public class MemberRepositoryImpl implements MemberRepositoryCustom { private final EntityManager em; @Override public List&lt;Member&gt; findMemberCustom() { return em.createQuery(&#34;select m from Member m&#34;) .getResultList(); } } 
ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ìƒì†
public interface MemberRepository extends JpaRepository&lt;Member, Long&gt;, MemberRepositoryCustom { } 
ì‚¬ìš©ì ì •ì˜ ë©”ì„œë“œ í˜¸ì¶œ ì½”ë“œ
List&lt;Member&gt; result = memberRepository.findMemberCustom(); 
ì‚¬ìš©ì ì •ì˜ êµ¬í˜„ í´ë˜ìŠ¤
 ê·œì¹™ : ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ + Impl ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ ì¸ì‹í•´ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡  Impl ëŒ€ì‹œ ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì‹¶ìœ¼ë©´?
XML ì„¤ì •
&lt;repositories base-package=&#34;study.datajpa.repository&#34; repository-impl-postfix=&#34;Impl&#34; /&gt; 
JavaConfig ì„¤ì •
@EnableJpaRepositories(basePackages = &#34;study.datajpa.repository&#34;, repositoryImplementationPostfix = &#34;Impl&#34;) 
ì°¸ê³  ì‹¤ë¬´ì—ì„œëŠ” ì£¼ë¡œ QueryDSLì´ë‚˜ SpringJdbcTemplateì„ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ ê¸°ëŠ¥ ìì£¼ ì‚¬ìš© í•­ìƒ ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ê°€ í•„ìš”í•œ ê²ƒì€ ì•„ë‹ˆë‹¤. ê·¸ëƒ¥ ì„ì˜ì˜ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ë§Œë“¤ì–´ë„ ëœë‹¤.
ì˜ˆë¥¼ë“¤ì–´ MemberQueryRepositoryë¥¼ ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ê³  ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì„œ ê·¸ëƒ¥ ì§ì ‘ ì‚¬ìš©í•´ë„ ëœë‹¤. ë¬¼ë¡  ì´ ê²½ìš° ìŠ¤í”„ë§ ë°ì´í„° JPAì™€ëŠ” ì•„ë¬´ëŸ° ê´€ê³„ ì—†ì´ ë³„ë„ë¡œ ë™ì‘í•œë‹¤.
ì‚¬ìš©ì ì •ì˜ ë¦¬í¬ì§€í† ë¦¬ êµ¬í˜„ ìµœì‹  ë°©ì‹ ìŠ¤í”„ë§ ë°ì´í„° 2.x ë¶€í„°ëŠ” ì‚¬ìš©ì ì •ì˜ êµ¬í˜„ í´ë˜ìŠ¤ì— ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ + Impl ì„ ì ìš©í•˜ëŠ” ëŒ€ì‹ ì— ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ëª… + Impl ë°©ì‹ë„ ì§€ì›í•œë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ìœ„ ì˜ˆì œì˜ MemberRepositoryImpl ëŒ€ì‹ ì— MemberRepositoryCustomImpl ê°™ì´ êµ¬í˜„í•´ë„ ëœë‹¤.
ìµœì‹  ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ í´ë˜ìŠ¤ ì˜ˆì œ
@RequiredArgsConstructor public class MemberRepositoryCustomImpl implements MemberRepositoryCustom { private final EntityManager em; @Override public List&lt;Member&gt; findMemberCustom() { return em.createQuery(&#34;select m from Member m&#34;) .getResultList(); } } ê¸°ì¡´ ë°©ì‹ë³´ë‹¤ ì´ ë°©ì‹ì´ ì‚¬ìš©ì ì •ì˜ ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ê³¼ êµ¬í˜„ í´ë˜ìŠ¤ ì´ë¦„ì´ ë¹„ìŠ·í•˜ë¯€ë¡œ ë” ì§ê´€ì ì´ë‹¤. ì¶”ê°€ë¡œ ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶„ë¦¬í•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ìƒˆë¡­ê²Œ ë³€ê²½ëœ ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë” ê¶Œì¥í•œë‹¤.
2. Auditing  ì—”í‹°í‹°ë¥¼ ìƒì„±, ë³€ê²½í•  ë•Œ ë³€ê²½í•œ ì‚¬ëŒê³¼ ì‹œê°„ì„ ì¶”ì í•˜ê³  ì‹¶ìœ¼ë©´?  ë“±ë¡ì¼ ìˆ˜ì •ì¼ ë“±ë¡ì ìˆ˜ì •ì    ìˆœìˆ˜ JPA ì‚¬ìš© ìš°ì„  ë“±ë¡ì¼, ìˆ˜ì •ì¼ ì ìš©
@Getter @MappedSuperclass public class JpaBaseEntity { @Column(updatable = false) private LocalDateTime createdDate; private LocalDateTime updatedDate; @PrePersist public void prePersist() { LocalDateTime now = LocalDateTime.now(); createdDate = now; updatedDate = now; } @PreUpdate public void preUpdate() { updatedDate = LocalDateTime.now(); } } JPA ì£¼ìš” ì´ë²¤íŠ¸ ì–´ë…¸í…Œì´ì…˜
 @PrePersist, @PostPersist @PreUpdate, @PostUpdate  ìŠ¤í”„ë§ ë°ì´í„° JPA ì‚¬ìš© ì„¤ì •
@EnableJpaAuditing â†’ ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì • í´ë˜ìŠ¤ì— ì ìš©í•´ì•¼í•¨
@EntityListeners(AuditingEntityListener.class) â†’ ì—”í‹°í‹°ì— ì ìš©
ì‚¬ìš© ì–´ë…¸í…Œì´ì…˜
 @CreatedDate @LastModifiedDate @CreatedBy @LastModifiedBy  ìŠ¤í”„ë§ ë°ì´í„° Auditing ì ìš© - ë“±ë¡ì¼, ìˆ˜ì •ì¼
@EntityListeners(AuditingEntityListener.class) @MappedSuperclass @Getter public class BaseEntity { @CreatedBy @Column(updatable = false) private String createdBy; @LastModifiedBy private String lastModifiedBy; } 
ìŠ¤í”„ë§ ë°ì´í„° Auditing ì ìš© - ë“±ë¡ì, ìˆ˜ì •ì
@EntityListeners(AuditingEntityListener.class) @MappedSuperclass @Getter public class BaseTimeEntity { @CreatedDate @Column(updatable = false) private LocalDateTime createdDate; @LastModifiedDate private LocalDateTime lastModifiedDate; } 
ë“±ë¡ì, ìˆ˜ì •ìë¥¼ ì²˜ë¦¬í•´ì£¼ëŠ” AuditorAware ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡
@Bean public AuditorAware&lt;String&gt; auditorProvider() { return () -&gt; Optional.of(UUID.randomUUID().toString()); } ì‹¤ë¬´ì—ì„œëŠ” ì„¸ì…˜ ì •ë³´ë‚˜, ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë¡œê·¸ì¸ ì •ë³´ì—ì„œ IDë¥¼ ë°›ìŒ</div><div class="post-footer">
        <a href="/posts/spring-data-jpa-extension/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/spring-data-jpa/">Spring Data JPA</a>,&nbsp;<a href="/tags/hibernate/">Hibernate</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/spring-data-jpa-query-method/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/spring-data-jpa.png"
        data-srcset="/images/JPA/spring-data-jpa.png, /images/JPA/spring-data-jpa.png 1.5x, /images/JPA/spring-data-jpa.png 2x"
        data-sizes="auto"
        alt="/images/JPA/spring-data-jpa.png"
        title="/images/JPA/spring-data-jpa.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/spring-data-jpa-query-method/">ì¿¼ë¦¬ ë©”ì†Œë“œ</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-31">2021-12-31</time></span>&nbsp;<span class="post-category">included in <a href="/categories/spring-data-jpa/"><i class="far fa-folder fa-fw"></i>Spring Data JPA</a></span></div><div class="content">1. ì¿¼ë¦¬ ë©”ì†Œë“œ ê¸°ëŠ¥  ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± NamedQuery @Query - ë¦¬íŒŒì§€í† ë¦¬ ë©”ì†Œë“œì— ì¿¼ë¦¬ ì •ì˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ë°˜í™˜ íƒ€ì… í˜ì´ì§•ê³¼ ì •ë ¬ ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬ @EntityGraph  ì¿¼ë¦¬ ë©”ì†Œë“œ ê¸°ëŠ¥ 3ê°€ì§€
 ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ JPA namedQuery í˜¸ì¶œ @Query ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì„œ ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ì— ì¿¼ë¦¬ ì§ì ‘ ì •ì˜  ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± ë©”ì†Œë“œ ì´ë¦„ì„ ë¶„ì„í•´ì„œ JPQL ì¿¼ë¦¬ ì‹¤í–‰
ì´ë¦„ê³¼ ë‚˜ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ íšŒì›ì„ ì¡°íšŒí•˜ë ¤ë©´?
ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬
public List&lt;Member&gt; findByUsernameAndAgeGreaterThen(String username, int age) { return em.createQuery(&#34;select m from Member m where m.username = :username and m.age &gt; :age&#34;) .setParameter(&#34;username&#34;, username) .setParameter(&#34;age&#34;, age) .getResultList(); } 
ìˆœìˆ˜ JPA í…ŒìŠ¤íŠ¸ ì½”ë“œ
@Test public void findByUsernameAndAgeGreaterThen() { Member m1 = new Member(&#34;AAA&#34;, 10); Member m2 = new Member(&#34;AAA&#34;, 20); memberJpaRepository.save(m1); memberJpaRepository.save(m2); List&lt;Member&gt; result = memberJpaRepository.findByUsernameAndAgeGreaterThen(&#34;AAA&#34;, 15); assertThat(result.get(0).getUsername()).isEqualTo(&#34;AAA&#34;); assertThat(result.get(0).getAge()).isEqualTo(20); assertThat(result.size()).isEqualTo(1); } 
ìŠ¤í”„ë§ ë°ì´í„° JPA
public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { List&lt;Member&gt; findByUsernameAndAgeGreaterThan(String username, int age); }  ìŠ¤í”„ë§ ë°ì´í„° JPAëŠ” ë©”ì†Œë“œ ì´ë¦„ì„ ë¶„ì„í•´ì„œ JPQLì„ ìƒì„±í•˜ê³  ì‹¤í–‰  ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ ì œê³µí•˜ëŠ” ì¿¼ë¦¬ ë©”ì†Œë“œ ê¸°ëŠ¥
 ì¡°íšŒ: findâ€¦By ,readâ€¦By ,queryâ€¦By getâ€¦By,  https://docs.spring.io/spring-data/jpa/docs/current/reference/html/ #repositories.query-methods.query-creation ì˜ˆ:) findHelloBy ì²˜ëŸ¼ &hellip;ì— ì‹ë³„í•˜ê¸° ìœ„í•œ ë‚´ìš©(ì„¤ëª…)ì´ ë“¤ì–´ê°€ë„ ëœë‹¤.   COUNT: countâ€¦By ë°˜í™˜íƒ€ì… long EXISTS: existsâ€¦By ë°˜í™˜íƒ€ì… boolean ì‚­ì œ: deleteâ€¦By, removeâ€¦By ë°˜í™˜íƒ€ì… long DISTINCT: findDistinct, findMemberDistinctBy LIMIT: findFirst3, findFirst, findTop, findTop3  https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.limit-query-result    ì°¸ê³  ì´ ê¸°ëŠ¥ì€ ì—”í‹°í‹°ì˜ í•„ë“œëª…ì´ ë³€ê²½ë˜ë©´ ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜í•œ ë©”ì„œë“œ ì´ë¦„ë„ ê¼­ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•˜ëŠ” ì‹œì ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ì´ë ‡ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì ì— ì˜¤ë¥˜ë¥¼ ì¸ì§€í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ìŠ¤í”„ë§ ë°ì´í„° JPAì˜ ë§¤ìš° í° ì¥ì ì´ë‹¤.
2. JPA NamedQuery JPAì˜ NamedQueryë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŒ
@NamedQuery ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ Named ì¿¼ë¦¬ ì •ì˜
@Entity @NamedQuery( name = &#34;Member.findByUsername&#34;, query = &#34;select m from Member m where m.username = :username&#34; ) public class Member { ... } 
JPAë¥¼ ì§ì ‘ ì‚¬ìš©í•´ì„œ Named ì¿¼ë¦¬ í˜¸ì¶œ
public class MemberRepository { public List&lt;Member&gt; findByUsername(String username) { ... return em.createNamedQuery(&#34;Member.findByUsername&#34;, Member.class) .setParameter(&#34;username&#34;, username) .getResultList(); } } 
ìŠ¤í”„ë§ ë°ì´í„° JPAë¡œ NamedQuery ì‚¬ìš©
@Query(name = &#34;Member.findByUsername&#34;) List&lt;Member&gt; findByUsername(@Param(&#34;username&#34;) String username); @Query ë¥¼ ìƒëµí•˜ê³  ë©”ì„œë“œ ì´ë¦„ë§Œìœ¼ë¡œ Named ì¿¼ë¦¬ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
ìŠ¤í”„ë§ ë°ì´í„° JPAë¡œ Named ì¿¼ë¦¬ í˜¸ì¶œ
public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { // ** ì—¬ê¸° ì„ ì–¸í•œ Member ë„ë©”ì¸ í´ë˜ìŠ¤  List&lt;Member&gt; findByUsername(@Param(&#34;username&#34;) String username); }  ìŠ¤í”„ë§ ë°ì´í„° JPAëŠ” ì„ ì–¸í•œ &ldquo;ë„ë©”ì¸ í´ë˜ìŠ¤ + .(ì ) + ë©”ì„œë“œ ì´ë¦„&rdquo; ìœ¼ë¡œ Named ì¿¼ë¦¬ë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰ ë§Œì•½ ì‹¤í–‰í•  Named ì¿¼ë¦¬ê°€ ì—†ìœ¼ë©´ ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± ì „ëµì„ ì‚¬ìš©í•œë‹¤. í•„ìš”í•˜ë©´ ì „ëµì„ ë³€ê²½í•  ìˆ˜ ìˆì§€ë§Œ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.  ì°¸ê³  : https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-lookup-strategies    ì°¸ê³  ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•˜ë©´ ì‹¤ë¬´ì—ì„œ Named Queryë¥¼ ì§ì ‘ ë“±ë¡í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì¼ì€ ë“œë¬¼ë‹¤. ëŒ€ì‹  @Query ë¥¼ ì‚¬ìš©í•´ì„œ ë¦¬í¬ì§€í† ë¦¬ ë©”ì†Œë“œì— ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì •ì˜í•œë‹¤.
3. @Query, ë¦¬í¬ì§€í† ë¦¬ ë©”ì†Œë“œì— ì¿¼ë¦¬ ì •ì˜í•˜ê¸° ë©”ì„œë“œ JPQL ì¿¼ë¦¬ ì‘ì„± public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { @Query(&#34;select m from Member m where m.username = :username and m.age = :age&#34;) List&lt;Member&gt; findUser(@Param(&#34;username&#34;) String username, @Param(&#34;age&#34;) int age); }  @org.springframework.data.jpa.repository.Query ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš© ì‹¤í–‰í•  ë©”ì„œë“œì— ì •ì  ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‘ì„±í•˜ë¯€ë¡œ ì´ë¦„ ì—†ëŠ” Named ì¿¼ë¦¬ë¼ í•  ìˆ˜ ìˆìŒ JPA Named ì¿¼ë¦¬ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆìŒ (ë§¤ìš° í° ì¥ì !)  ì°¸ê³  ì‹¤ë¬´ì—ì„œëŠ” ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± ê¸°ëŠ¥ì€ íŒŒë¼ë¯¸í„°ê°€ ì¦ê°€í•˜ë©´ ë©”ì„œë“œ ì´ë¦„ì´ ë§¤ìš° ì§€ì €ë¶„í•´ì§„ë‹¤.</div><div class="post-footer">
        <a href="/posts/spring-data-jpa-query-method/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/spring-data-jpa/">Spring Data JPA</a>,&nbsp;<a href="/tags/hibernate/">Hibernate</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/spring-data-jpa-common-interface/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/spring-data-jpa.png"
        data-srcset="/images/JPA/spring-data-jpa.png, /images/JPA/spring-data-jpa.png 1.5x, /images/JPA/spring-data-jpa.png 2x"
        data-sizes="auto"
        alt="/images/JPA/spring-data-jpa.png"
        title="/images/JPA/spring-data-jpa.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/spring-data-jpa-common-interface/">ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ê¸°ëŠ¥</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-31">2021-12-31</time></span>&nbsp;<span class="post-category">included in <a href="/categories/spring-data-jpa/"><i class="far fa-folder fa-fw"></i>Spring Data JPA</a></span></div><div class="content">1. ìˆœìˆ˜ JPAê¸°ë°˜ ë¦¬í¬ì§€í† ë¦¬ ë§Œë“¤ê¸°  ê¸°ë³¸ CRUD  ì €ì¥ ë³€ê²½ â†’ ë³€ê²½ê°ì§€ ì‚¬ìš© ì‚­ì œ ì „ì²´ ì¡°íšŒ ë‹¨ê±´ ì¡°íšŒ ì¹´ìš´íŠ¸     ì°¸ê³ : JPAì—ì„œ ìˆ˜ì •ì€ ë³€ê²½ê°ì§€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•œ ë‹¤ìŒì— ë°ì´í„°ë¥¼ ë³€ê²½í•˜ë©´, íŠ¸ëœì­ì…˜ ì¢…ë£Œ ì‹œì ì— ë³€ê²½ê°ì§€ ê¸°ëŠ¥ì´ ì‘ë™í•´ì„œ ë³€ê²½ëœ ì—”í‹°í‹°ë¥¼ ê°ì§€í•˜ê³  UPDATE SQLì„ ì‹¤í–‰í•œë‹¤.
 ìˆœìˆ˜ JPA ê¸°ë°˜ ë¦¬í¬ì§€í† ë¦¬
@Repository public class MemberJpaRepository { @PersistenceContext private EntityManager em; // Create (ì €ì¥)  public Member save(Member member) { em.persist(member); return member; } // Delete (ì‚­ì œ)  public void delete(Member member) { em.remove(member); } // Read (ì¡°íšŒ)  public List&lt;Member&gt; findAll() { // JPQL  return em.createQuery(&#34;select m from Member m&#34;, Member.class) .getResultList(); } public Optional&lt;Member&gt; findById(Long id) { Member member = em.find(Member.class, id); return Optional.ofNullable(member); } public long count() { return em.createQuery(&#34;select count(m) from Member m&#34;, Long.class) .getSingleResult(); } public Member find(Long id) { return em.find(Member.class, id); } }  íšŒì› ë¦¬í¬ì§€í† ë¦¬ì™€ ê±°ì˜ ë™ì¼í•˜ë‹¤.  2. ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ì„¤ì • javaConfig ì„¤ì • - ìŠ¤í”„ë§ ë¶€íŠ¸ ì‚¬ìš©ì‹œ ìƒëµ ê°€ëŠ¥ @Configuration @EnableJpaRepositories(basePackages = &#34;jpabook.jpashop.repository&#34;) public class AppConfig {}  ìŠ¤í”„ë§ ë¶€íŠ¸ ì‚¬ìš©ì‹œ @SpringBootApplication ìœ„ì¹˜ë¥¼ ì§€ì •(í•´ë‹¹ íŒ¨í‚¤ì§€ì™€ í•˜ìœ„ íŒ¨í‚¤ì§€ ì¸ì‹) ë§Œì•½ ìœ„ì¹˜ê°€ ë‹¬ë¼ì§€ë©´ @EnableJpaRepositories í•„ìš”  ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ êµ¬í˜„ í´ë˜ìŠ¤ ëŒ€ì‹  ìƒì„±  org.springframework.data.repository.Repository ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ëŠ” ìŠ¤ìº” ëŒ€ìƒ  MemberRepository ì¸í„°í˜ì´ìŠ¤ê°€ ë™ì‘í•œ ì´ìœ  ì‹¤ì œ ì¶œë ¥í•´ë³´ê¸°(Proxy) memberRepository.getClass() â†’ class com.sun.proxy.$ProxyXXX   @Repository ì• ë…¸í…Œì´ì…˜ ìƒëµ ê°€ëŠ¥  ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬ JPA ì˜ˆì™¸ë¥¼ ìŠ¤í”„ë§ ì˜ˆì™¸ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ë„ ìë™ìœ¼ë¡œ ì²˜ë¦¬    3. ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ì ìš© ìˆœìˆ˜ JPAë¡œ êµ¬í˜„í•œ MemberJpaRepository ëŒ€ì‹ ì— ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ ì œê³µí•˜ëŠ” ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©
ìŠ¤í”„ë§ ë°ì´í„° JPA ê¸°ë°˜ Repository public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { }  Generic  T : ì—”í‹°í‹° íƒ€ì… ID : ì‹ë³„ì íƒ€ì…(PK)    4. ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ë¶„ì„  JpaRepository ì¸í„°í˜ì´ìŠ¤ : ê³µí†µ CURD ì œê³µ ì œë„¤ë¦­ì€ &lt;ì—”í‹°í‹° íƒ€ì…, ì‹ë³„ì íƒ€ì…&gt; ì„¤ì •  JpaRepository ê³µí†µ ê¸°ëŠ¥ ì¸í„°í˜ì´ìŠ¤
public interface JpaRepository&lt;T, ID extends Serializable&gt; extends PagingAndSortingRepository&lt;T, ID&gt; { ... } 
JpaRepository ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤
public interface MemberRepository extends JpaRepository&lt;Member, Long&gt; { } 
ê³µí†µ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ì£¼ì˜
 T findOne(ID) â†’ Optional&lt;T&gt; findById(ID) ë³€ê²½  ì œë„¤ë¦­ íƒ€ì…
 T : ì—”í‹°í‹° ID : ì—”í‹°í‹°ì˜ ì‹ë³„ì íƒ€ì… S : ì—”í‹°í‹°ì™€ ê·¸ ìì‹ íƒ€ì…  ì£¼ìš” ë©”ì„œë“œ
 save(S) : ìƒˆë¡œìš´ ì—”í‹°í‹°ëŠ” ì €ì¥í•˜ê³  ì´ë¯¸ ìˆëŠ” ì—”í‹°í‹°ëŠ” ë³‘í•©í•œë‹¤. delete(T) : ì—”í‹°í‹° í•˜ë‚˜ë¥´ ì‚­ì œí•œë‹¤. ë‚´ë¶€ì—ì„œ EntityManager.remove() í˜¸ì¶œ findById(ID) : ì—”í‹°í‹° í•˜ë‚˜ë¥¼ ì¡°íšŒí•œë‹¤. ë‚´ë¶€ì—ì„œ EntityManager.find() í˜¸ì¶œ getOne(ID) : ì—”í‹°í‹°ë¥¼ í”„ë¡ì‹œë¡œ ì¡°íšŒí•œë‹¤. ë‚´ë¶€ì—ì„œ EntityManager.getReference() í˜¸ì¶œ findAll(...) : ëª¨ë“  ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•œë‹¤. ì •ë ¬(Sort)ì´ë‚˜ í˜ì´ì§•(Pageable) ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ì œê³µí•  ìˆ˜ ìˆë‹¤.  ì°¸ê³ : JpaRepository ëŠ” ëŒ€ë¶€ë¶„ì˜ ê³µí†µ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.</div><div class="post-footer">
        <a href="/posts/spring-data-jpa-common-interface/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/spring-data-jpa/">Spring Data JPA</a>,&nbsp;<a href="/tags/hibernate/">Hibernate</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/jpa-object-query-language2/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/jpa.png"
        data-srcset="/images/JPA/jpa.png, /images/JPA/jpa.png 1.5x, /images/JPA/jpa.png 2x"
        data-sizes="auto"
        alt="/images/JPA/jpa.png"
        title="/images/JPA/jpa.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/jpa-object-query-language2/">ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ì¤‘ê¸‰ ë¬¸ë²•</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-30">2021-12-30</time></span>&nbsp;<span class="post-category">included in <a href="/categories/jpa/"><i class="far fa-folder fa-fw"></i>JPA</a></span></div><div class="content">1. ê²½ë¡œ í‘œí˜„ì‹  .(ì )ì„ ì°ì–´ ê°ì²´ ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•˜ëŠ” ê²ƒ select m.username -&gt; ìƒíƒœ í•„ë“œ from Member m join m.team t -&gt; ë‹¨ì¼ ê°’ ì—°ê´€ í•„ë“œ join m.orders o -&gt; ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ í•„ë“œ where t.name = &#39;íŒ€A&#39; 
ê²½ë¡œ í‘œí˜„ì‹ ìš©ì–´ ì •ë¦¬
 ìƒíƒœ í•„ë“œ(state field): ë‹¨ìˆœíˆ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ í•„ë“œ(ex: m.usernmae) ì—°ê´€ í•„ë“œ(association field): ì—°ê´€ê´€ê³„ë¥¼ ìœ„í•œ í•„ë“œ  ë‹¨ì¼ ê°’ ì—°ê´€ í•„ë“œ:  @ManyToOne, @OneToOne: ëŒ€ìƒì´ ì—”í‹°í‹°(ex: m.team)  ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ í•„ë“œ:  @OneToMany, @ManyToMany, ëŒ€ìƒì´ ì»¬ë ‰ì…˜(ex m.orders)   ê²½ë¡œ í‘œí˜„ì‹ íŠ¹ì§•
  ìƒíƒœ í•„ë“œ(state field): ê²½ë¡œ íƒìƒ‰ì˜ ë, íƒìƒ‰x
  ë‹¨ì¼ ê°’ ì—°ê´€ ê²½ë¡œ: ë¬µì‹œì  ë‚´ë¶€ ì¡°ì¸(inner join)ë°œìƒ, íƒìƒ‰O
select m.team.name from Member m; //teamì—ì„œ ê²½ë¡œíƒìƒ‰ì´ ë” ê°€ëŠ¥í•˜ë‹¤(name)   ì»¬ë ‰ì…˜ ê°’ ì—°ê´€ ê²½ë¡œ: ë¬µì‹œì  ë‚´ë¶€ ì¡°ì¸ ë°œìƒ, íƒìƒ‰X
  FROM ì ˆì—ì„œ ëª…ì‹œì  ì¡°ì¸ì„ í†µí•´ ë³„ì¹­ì„ ì–»ìœ¼ë©´ ë³„ì¹­ì„ í†µí•´ íƒìƒ‰ ê°€ëŠ¥
select m.username from Team t join t.members m;     ì‹¤ë¬´ì—ì„œëŠ” ëª…ì‹œì  ì¡°ì¸ì„ ì‚¬ìš©í•˜ì.
ì¡°ì¸ì€ SQL íŠœë‹ì— ì¤‘ìš” í¬ì¸íŠ¸
ë¬µì‹œì  ì¡°ì¸ì€ ì¡°ì¸ì´ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì„ í•œëˆˆì— íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
2. JPQL - í˜ì¹˜ ì¡°ì¸ (fetchjoin)   SQL ì¡°ì¸ ì¢…ë¥˜ëŠ” ì•„ë‹ˆê³  JPAì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. JPQLì—ì„œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥. ì—°ê´€ëœ ì—”í‹°í‹°ë‚˜ ì»¬ë ‰ì…˜ì„ SQL í•œ ë²ˆì— í•¨ê»˜ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ join fetch ëª…ë ¹ì–´ ì‚¬ìš© í˜ì¹˜ ì¡°ì¸ :: = [LEFT [OUTER] | INNER ] JOIN FETCH ì¡°ì¸ ê²½ë¡œ  ì—”í‹°í‹° í˜ì¹˜ ì¡°ì¸
  íšŒì›ì„ ì¡°íšŒí•˜ë©´ì„œ ì—°ê´€ëœ íŒ€ë„ í•¨ê»˜ ì¡°íšŒ(SQL í•œ ë²ˆì—)
//JPQL select m from Member m join fetch m.team //SQL select m.* t.* from Member m inner join Team t on m.team_id = t.id;     ë„ì‹í™”
íŒ€ì´ ìˆëŠ” íšŒì›ì„ ì¡°íšŒí•˜ê³  ì‹¶ì„ ë•Œ fetch joinì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ inner joinì„ ì‚¬ìš©í•œë‹¤.
íŒ€ì´ ì—†ëŠ” íšŒì›ì€ ëˆ„ë½ëœë‹¤.
  í˜ì¹˜ ì¡°ì¸ ì‚¬ìš© ì½”ë“œ
  ê¸°ì¡´ ì—°ê´€ê´€ê³„ ì¡°íšŒ ë¡œì§ì˜ ë¬¸ì œ
String jpql = &#34;select m from Member m&#34;; List&lt;Member&gt; members = em.createQuery(jpql, Member.class) .getResultList(); for (Member member : members) { System.out.println(&#34;username = &#34; + member.getUsername() + &#34;, &#34; + &#34;teamName = &#34; + member.getTeam().name()); //íšŒì›1, íŒ€A(SQL) //íšŒì›2, íŒ€A(1ì°¨ ìºì‹œ) //íšŒì›3, íŒ€B(SQL)  //íšŒì› 100ëª… -&gt; N + 1 } ìµœì´ˆ jpqlì„ í†µí•´ Memberë¥¼ ì¡°íšŒí•´ ì˜¬ë•Œ Teamì˜ ì •ë³´ëŠ” Proxyê°ì²´ë¡œ ê°€ì§€ê³  ìˆë‹¤. (ì‹¤ì œë¡  ì—†ë‹¤ëŠ” ì˜ë¯¸) ê·¸ë ‡ê¸°ì— ì‹¤ì œë¡œ getTeam().getName()ì„ í†µí•´ íŒ€ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ë ¤ê³  í•  ë•Œ SQLì„ ìˆ˜í–‰í•œë‹¤. ì£¼ì„ ë‚´ìš©ëŒ€ë¡œ í•œë²ˆ ê°€ì ¸ì˜¨ Teamì˜ ì •ë³´ëŠ” 1ì°¨ ìºì‹œì— ì˜¬ë¼ê°€ ìˆê¸° ë•Œë¬¸ì— ë” ì¡°íšŒí•  í•„ìš”ëŠ” ì—†ì§€ë§Œ, íšŒì›ì„ Nëª… ì¡°íšŒí•˜ê²Œ ë˜ì—ˆì„ë•Œ ìµœëŒ€ N + 1 ë²ˆ Team ì¡°íšŒ ì¿¼ë¦¬ê°€ ìˆ˜í–‰ ë  ìˆ˜ ìˆë‹¤.
    í˜ì¹˜ ì¡°ì¸ì„ í†µí•œ í•´ê²°
String jpql = &#34;select m from Member m join fetch m.team&#34;; List&lt;Member&gt; members = em.createQuery(jpql, Member.class) .getResultList(); for (Member member : members) { //í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ íšŒì›ê³¼ íŒ€ì„ í•¨ê»˜ ì¡°íšŒí•´ì„œ ì§€ì—° ë¡œë”©X  System.out.println(&#34;username = &#34; + member.getUsername() + &#34;, &#34; + &#34;teamName = &#34; + member.getTeam().name()); } í˜ì¹˜ì¡°ì¸ì€ ì¡°íšŒ ë‹¹ì‹œì— ì‹¤ì œ ì—”í‹°í‹°ê°€ ë‹´ê¸´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì§€ì—°ë¡œë”© ì—†ì´ ë°”ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
  ì‹¤ë¬´ì—ì„œ ìì£¼ ì‚¬ìš©ëœë‹¤. ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸
 ì¼ëŒ€ë‹¤ ê´€ê³„, ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸  //JPQL select t from Team t join fetch t.members where t.name = &#39;íŒ€A&#39;; //SQL select t.*, m.* from team t, inner join member m on t.</div><div class="post-footer">
        <a href="/posts/jpa-object-query-language2/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/jpa/">JPA</a>,&nbsp;<a href="/tags/hibernate/">Hibernate</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><div class="featured-image-preview">
            <a href="/posts/jpa-object-query-language1/"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/JPA/jpa.png"
        data-srcset="/images/JPA/jpa.png, /images/JPA/jpa.png 1.5x, /images/JPA/jpa.png 2x"
        data-sizes="auto"
        alt="/images/JPA/jpa.png"
        title="/images/JPA/jpa.png" /></a>
        </div><h1 class="single-title" itemprop="name headline">
        <a href="/posts/jpa-object-query-language1/">ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ - ê¸°ë³¸ ë¬¸ë²•</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaeyeon</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-12-30">2021-12-30</time></span>&nbsp;<span class="post-category">included in <a href="/categories/jpa/"><i class="far fa-folder fa-fw"></i>JPA</a></span></div><div class="content">1. ì†Œê°œ  JPAëŠ” ë‹¤ì–‘í•œ ì¿¼ë¦¬ ë°©ë²•ì„ ì§€ì›
 JPQL JPA Criteria QueryDSL Native SQL JDBC API ì§ì ‘ ì‚¬ìš©, MyBatis, SpringJdbcTemplate í•¨ê»˜ ì‚¬ìš©  JPQL ì†Œê°œ
 ê°€ì¥ ë‹¨ìˆœí•œ ì¡°íšŒ ë°©ë²•  EntityManager.find() ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰ (a.getB().getC())   ë‚˜ì´ê°€ 18ì‚´ ì´ìƒì¸ íšŒì›ì„ ëª¨ë‘ ê²€ìƒ‰í•˜ê³  ì‹¶ë‹¤ë©´?  JPQL - í•„ìš”ì„±
 JPAë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ê°ì²´ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œ ë¬¸ì œëŠ” ê²€ìƒ‰ ì¿¼ë¦¬ ê²€ìƒ‰ì„ í•  ë•Œë„ í…Œì´ë¸”ì´ ì•„ë‹Œ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰ ëª¨ë“  DB ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•´ì„œ ê²€ìƒ‰í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•œ ë°ì´í„°ë§Œ DBì—ì„œ ë¶ˆëŸ¬ì˜¤ë ¤ë©´ ê²°êµ­ ê²€ ìƒ‰ ì¡°ê±´ì´ í¬í•¨ëœ SQLì´ í•„ìš”  JPQL - íŠ¹ì§•
  JPAëŠ” SQLì„ ì¶”ìƒí™”í•œ JPQLì´ë¼ëŠ” ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ë¥¼ ì œê³µ
String sql = &#34;select m from Member.class as m where m.username like &#39;%until%&#39;&#34;; ì¼ë°˜ SQLê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ì—”í‹°í‹°ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•œë‹¤ëŠ” ì ì´ ë‹¤ë¥´ë‹¤.
 SQLì„ ì¶”ìƒí™”í•´ì„œ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ SQLì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤. ë™ì  ì¿¼ë¦¬ ìƒì„±ì´ ì‰½ì§€ ì•Šë‹¤.    Criteria - ì†Œê°œ
 ë¬¸ìê°€ ì•„ë‹Œ ìë°”ì½”ë“œë¡œ JPQLì„ ì‘ì„±í•  ìˆ˜ ìˆìŒ  //Criteria ì‚¬ìš© ì¤€ë¹„ CriteriaBuilder cb = em.getCriteriaBuilder(); CriteriaQuery&lt;Member&gt; query = cb.createQuery(Member.class); //ë£¨íŠ¸ í´ë˜ìŠ¤ (ì¡°íšŒë¥¼ ì‹œì‘í•  í´ë˜ìŠ¤) Root&lt;Member&gt; m = query.from(Member.class); //ì¿¼ë¦¬ ìƒì„± CriteriaQuery&lt;Member&gt; cq = query.select(m).where(cb.equal(m.get(&#34;username&#34;), â€œkimâ€)); List&lt;Member&gt; resultList = em.createQuery(cq).getResultList()  JPQL ë¹Œë” ì—­í•  JPA ê³µì‹ ê¸°ëŠ¥  âŒì‹¤ë¬´ì—ì„  ê±°ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.
 ì¿¼ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ëŠ” ìˆì§€ë§Œ êµ¬í˜„ì´ ë„ˆë¬´ ë³µì¡í•˜ê³  ì‹¤ìš©ì„±ì´ ì—†ë‹¤. ë¬¸ìê°€ ì•„ë‹Œ ìë°”ì½”ë“œë¡œ JPQLì„ ì‘ì„±í•  ìˆ˜ ìˆìŒ JPQL ë¹Œë” ì—­í•  JPA ê³µì‹ ê¸°ëŠ¥ ë‹¨ì  : ë„ˆë¬´ ë³µì¡í•˜ê³  ì‹¤ìš©ì„±ì´ ì—†ë‹¤. Criteria ëŒ€ì‹ ì— QueryDSL ì‚¬ìš© ê¶Œì¥  QueryDSL ì†Œê°œ
ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬
// JPQL // SELECT m from Member m WHERE m.age &gt; 18 JPAFactoryQuery query = new JPAQueryFactory(em); QMember m = QMember.member; List&lt;Member&gt; list = query.selectFrom(m) .where(m.age.gt(18)) .orderBy(m.name.desc()) .fetch();   ë¬¸ìê°€ ì•„ë‹Œ ìë°”ì½”ë“œë¡œ JPQLì„ ì‘ì„±í•  ìˆ˜ ìˆìŒ
  JPQL ë¹Œë” ì—­í• 
  ì»´íŒŒì¼ ì‹œì ì— ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŒ
  ... List&lt;Member&gt; list = query.selectFrom(m) .wheree(m.age.gt(18)) //ì»´íŒŒì¼ ì‹œì ì—ì„œ ì˜¤ë¥˜ ê²€ì¶œ ê°€ëŠ¥  .orderBy(m.name.desc()) .fetch()  ë™ì ì¿¼ë¦¬ ì‘ì„± í¸ë¦¬í•¨ ë‹¨ìˆœí•˜ê³  ì‰½ë‹¤. ì‹¤ë¬´ ì‚¬ìš© ê¶Œì¥  ë„¤ì´í‹°ë¸Œ SQL ì†Œê°œ
  JPAê°€ ì œê³µí•˜ëŠ” SQLì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥
  JPQLë¡œ í•´ê²°í•  ìˆ˜ ì—†ëŠ” íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´ì ì¸ ê¸°ëŠ¥
 ex: ì˜¤ë¼í´ CONNECT BY, íŠ¹ì • DBë§Œ ì‚¬ìš©í•œëŠ” SQL íŒíŠ¸  String sql =&#34;SELECT ID, AGE, TEAM_ID, NAME FROM MEMBER WHERE NAME = â€˜kimâ€™&#34;; List&lt;Member&gt; resultList = em.createNativeQuery(sql, Member.class) .getResultList();   JDBC ì§ì ‘ ì‚¬ìš©, SpringJdbcTemplate ë“±
  PAë¥¼ ì‚¬ìš©í•˜ë©´ì„œ JDBC ì»¤ë„¥ì…˜ì„ ì§ì ‘ ì‚¬ìš©í•˜ê±°ë‚˜, ìŠ¤í”„ë§ JdbcTemplate, ë§ˆì´ë°”í‹°ìŠ¤ë“± í•¨ê¼ ì‚¬ìš©ê°€ëŠ¥
  ë‹¨, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì ì ˆí•œ ì‹œì ì— ê°•ì œë¡œ í”ŒëŸ¬ì‹œ í•„ìš”
 ex: JPAë¥¼ ìš°íšŒí•´ì„œ SQLì„ ì‹¤í–‰í•˜ê¸° ì§ì „ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ìˆ˜ë™ í”ŒëŸ¬ì‹œ í•´ì¤˜ì•¼ í•œë‹¤.  Member member = new Member(); member.setUsername(&#34;catsbi&#34;); conn.createQuery(&#34;select * from Member where username = &#39;catsbi&#39;&#34;); //ê²°ê³¼ ì—†ìŒ memberëŠ” Jdbcê°€ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ”ì‹œì ì—ì„œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ë§Œ ìˆê³  dbì— ì•„ì§ ì €ì¥ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì¡°íšŒê²°ê³¼ê°€ ì—†ë‹¤ ê·¸ëŸ¬ë¯€ë¡œ ì¿¼ë¦¬ ìˆ˜í–‰ ì „ ìˆ˜ë™ìœ¼ë¡œ í”ŒëŸ¬ì‹œë¥¼ í•´ì¤˜ì•¼ í•œë‹¤.
  2. ê¸°ë³¸ ë¬¸ë²•ê³¼ ì¿¼ë¦¬ API  JPQL ì†Œê°œ
 JPQLì€ ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ë‹¤. ë”°ë¼ì„œ í…Œì´ë¸”ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•œë‹¤. JPQLì€ SQLì„ ì¶”ìƒí™”í•´ì„œ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ SQLì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.  EX: ì¡°íšŒ ê¸°ëŠ¥ì„ ë§Œë“¤ ë•Œ íŠ¹ì • DBì— ì˜ì¡´í•˜ëŠ” SQLì„ ë”°ë¡œ ì•ˆë§Œë“¤ì–´ë„ ëœë‹¤.   JPQLì€ ê²°êµ­ SQLë¡œ ë³€í™˜ëœë‹¤.  ê°ì²´/DB ëª¨ë¸</div><div class="post-footer">
        <a href="/posts/jpa-object-query-language1/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/jpa/">JPA</a>,&nbsp;<a href="/tags/hibernate/">Hibernate</a></div></div>
</article><ul class="pagination"><li class="page-item active">
                    <span class="page-link">
                        <a href="/">1</a>
                    </span>
                </li><li class="page-item ">
                    <span class="page-link">
                        <a href="/page/2/">2</a>
                    </span>
                </li></ul></div></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.91.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Jaeyeon</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@7.0.4/dist/typeit.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":500},"data":{"id-1":"Life of record"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"typeit":{"cursorChar":"|","cursorSpeed":500,"data":{"id-1":["id-1"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
