<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Hibernate - Tag - ğŸ“š | Dev Blog</title>
        <link>https://jaeyeonme.github.io/tags/hibernate/</link>
        <description>Hibernate - Tag - ğŸ“š | Dev Blog</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 29 Dec 2021 12:00:00 &#43;0000</lastBuildDate><atom:link href="https://jaeyeonme.github.io/tags/hibernate/" rel="self" type="application/rss+xml" /><item>
    <title>ì˜ì†ì„±ê´€ë¦¬ - ë‚´ë¶€ ë™ì‘ ë°©ì‹</title>
    <link>https://jaeyeonme.github.io/posts/%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A5%E1%86%BC%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5-%E1%84%82%E1%85%A2%E1%84%87%E1%85%AE-%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%A8-%E1%84%87%E1%85%A1%E1%86%BC%E1%84%89%E1%85%B5%E1%86%A8/</link>
    <pubDate>Wed, 29 Dec 2021 12:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://jaeyeonme.github.io/posts/%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A5%E1%86%BC%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5-%E1%84%82%E1%85%A2%E1%84%87%E1%85%AE-%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%A8-%E1%84%87%E1%85%A1%E1%86%BC%E1%84%89%E1%85%B5%E1%86%A8/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/JPA/jpa.png" referrerpolicy="no-referrer">
            </div>1. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸  ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™í•˜ëŠ” ì‹œì ì— EntityManagerFactory ë¥¼ ìƒì„±í•˜ì—¬ ê°€ì§€ê³  ìˆìœ¼ë©°, ì‚¬ìš©ìì˜ ìš”ì²­ì´ ìˆì„ ë•Œ EntityManagerë¥¼ ìƒì„±í•˜ì—¬ ì»¤ë„¥ì…˜ í’€(Connection Pool)ì„ ì‚¬ìš©í•´ì„œ DBë¥¼ í•¸ë“¤ë§ í•˜ê²Œ ëœë‹¤.  ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë€?   ì—”í‹°í‹°ë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” í™˜ê²½
  EntityManager.persist(entity);
â†’ DBì— ì €ì¥í•œë‹¤ê¸° ë³´ë‹¤ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í†µí•´ ì—”í‹°í‹°ë¥¼ ì˜ì†í™” í•œë‹¤ëŠ” ì˜ë¯¸
 ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì—”í‹°í‹°ë¥¼ ì €ì¥í•œë‹¤ëŠ” ë§    ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ë…¼ë¦¬ì ì¸ ê°œë…
  ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.
  ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ í†µí•´ì„œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼
 J2SE í™˜ê²½    ì—”í‹°í‹°ì˜ ìƒëª… ì£¼ê¸°  ë¹„ì˜ì†(new / transient): ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì „í˜€ ê´€ê³„ê°€ ì—†ëŠ” ìƒˆë¡œìš´ ìƒíƒœ ì˜ì†(managed): ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ê´€ë¦¬ë˜ëŠ” ìƒíƒœ ì¤€ì˜ì†(detached): ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë˜ì—ˆë‹¤ê°€ ë¶„ë¦¬ëœ ìƒíƒœ ì‚­ì œ(removed): ì‚­ì œëœ ìƒíƒœ  ë¹„ì˜ì† : JPAì— ê´€ê³„ì—†ì´ ê°ì²´ ìƒì„±ë§Œ ëœ ìƒíƒœ
// ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†) Member member = new Member(); member.setId(&#34;member1&#34;); member.setUsername(&#34;íšŒì›1&#34;); 
ì˜ì† // ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†) Member member = new Member(); member.setId(&#34;member1&#34;); member.setUsername(&#34;íšŒì›1&#34;); EntityManager em = emf.createEntityManager(); em.getTransaction().begin(); // ê°ì²´ë¥¼ ì €ì¥í•œ ìƒíƒœ(ì˜ì†) em.persist(member); 
ì¤€ì˜ì†, ì‚­ì œ // íšŒì› ì—”í‹°í‹°ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë¶„ë¦¬, ì¤€ì˜ì† ìƒíƒœ em.detach(member); // ê°ì²´ë¥¼ ì‚­ì œí•œ ìƒíƒœ(ì‚­ì œ) em.remove(member);  ì¤€ì˜ì†: ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‚­ì œí•˜ëŠ” ê²ƒ ì‚­ì œëŠ” ì‹¤ì œë¡œ DBì—ì„œ í•´ë‹¹ ROWë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒ  2. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ì´ì  1. 1ì°¨ ìºì‹œ Member member = new Member(); member.setId(&#34;member1&#34;); member.setUsername(&#34;íšŒì›1&#34;); //1ì°¨ ìºì‹œì— ì €ì¥ë¨ em.persist(member); //1ì°¨ ìºì‹œì—ì„œ ì¡°íšŒ Member findMember = em.find(Member.class, &#34;member1&#34;);  ì¡°íšŒ ì‹œ ì˜ì† ì»¨í…ìŠ¤íŠ¸ì•ˆì—ì„œ 1ì°¨ ìºì‹œë¥¼ ì¡°íšŒ í›„ í•´ë‹¹ ì—”í‹°í‹°ê°€ ìˆì„ ê²½ìš° ìºì‹œë¥¼ ì¡°íšŒ í•´ ì˜¨ë‹¤. ì¡°íšŒ ì‹œ ì˜ì† ì»¨í…ìŠ¤íŠ¸ ì•ˆì—ì„œ 1ì°¨ ìºì‹œë¥¼ ì¡°íšŒ í›„ í•´ë‹¹ ì—”í‹°í‹°ê°€ ì—†ì„ ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒí•´ ì˜¨ë‹¤. ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ ë‚´ë¶€ì—ì„œ ë§Œë“¤ê³  ì¢…ë£Œë˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì¢…ë£Œë  ê²½ìš° 1ì°¨ìºì‹œëŠ” ë‹¤ ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì— í° ë„ì›€ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë³µì¡í•´ ì§ˆ ìˆ˜ë¡ íš¨ê³¼ëŠ” ì»¤ì§„ë‹¤.)  2. ë™ì¼ì„±(identity) ë³´ì¥ Member findMember = em.find(Member.class, 100L); Member findMember2 = em.find(Member.class, 100L); System.out.println(findMember == findMember2); // true : 1ì°¨ ìºì‹œë¡œ ë°˜ë³µ ê°€ëŠ¥í•œ ì½ê¸°(REPEATABLE READ) ë“±ê¸‰ì˜ íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€ì„ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì•„ë‹Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì°¨ì›ì—ì„œ ì œê³µ
 ì°¸ê³ : íŠ¸ëœì­ì…˜ì˜ ê²©ë¦¬ìˆ˜ì¤€ì´ ê¶ê¸ˆí•˜ë©´ íŠ¸ëœì­ì…˜ì´ ë³´ì¥í•´ì•¼ í•˜ëŠ” ACIDë¥¼ ê¸°ì–µí•˜ì.
 3. ì—”í‹°í‹° ë“±ë¡ - íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ì§€ì§€ì—° Member member = new Member(150L, &#34;A&#34;); Member member2 = new Member(160L, &#34;B&#34;); em.persist(member); em.persist(member2); // ì—”í‹°í‹° ë“±ë¡ì€ ì•„ì§ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. (ì“°ì§€ ì§€ì—°)  System.out.println(&#34;=========&#34;); tx.commit(); // ì—í‹°í‹° ë“±ë¡ì€ ì´ ë–„ ë™ì‹œì— ìˆ˜í–‰ëœë‹¤. 
memberAì™€ memberrBëŠ” ë‘˜ ë‹¤ ì“°ê¸°ì§€ì—° SQLì €ì¥ì†Œì— ì €ì¥ë˜ì–´ìˆê³  ì‹¤ì œ DBì— ì ìš©ì€ ì•ˆëœ ìƒíƒœ
commit() ì‹œì ì— ì“°ê¸°ì§€ì—° SQLì— ì €ì¥ëœ ì¿¼ë¦¬ë“¤ì„ ë‹¤ ì‹¤í–‰ì‹œì¼œì„œ DBì— ì ìš©í•œë‹¤.
ì“°ê¸° ì§€ì—°ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
-&gt; ë²„í¼ë§ ê¸°ëŠ¥ì´ ì œê³µ
&lt;property name=&#34;hibernate.jdbc.batch_size&#34; value=&#34;10&#34;/&gt; -&gt; 10ê°œì”© ìŒ“ì¼ë•Œë§ˆë‹¤ ì ìš©í•˜ê²Œ í•˜ëŠ” ê¸°ëŠ¥
-&gt; ì¿¼ë¦¬ë¥¼ ì—¬ëŸ¬ë²ˆ ë‚ ë¦¬ì§€ ì•Šê³  ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.
4. ì—”í‹°í‹° ìˆ˜ì • - ë³€ê²½ê°ì§€(Dirty Checking) transaction.begin(); //ì—”í‹°í‹° ì¡°íšŒ Member findMember = em.find(Member.class, &#34;memberA&#34;); //ì˜ì† ì—”í‹°í‹° ë°ì´í„° ìˆ˜ì • findMember.setUsername(&#34;hi&#34;); findMember.setAge(10); transaction.commit(); â†’ 1ì°¨ ìºì‹œì•ˆì—ëŠ” @Id, Entity , ìŠ¤ëƒ…ìƒ· ì´ ìˆë‹¤. ì—¬ê¸°ì„œ ìŠ¤ëƒ…ìƒ· ì€ ìµœì´ˆë¡œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸(1ì°¨ìºì‹œ)ì— ë“¤ì–´ì˜¤ëŠ”ìˆœê°„ ìŠ¤ëƒ…ìƒ·ì„ ì°ì–´ì„œ ì €ì¥í•´ë‘”ë‹¤.
â†’ JPAëŠ” íŠ¸ëœì­ì…˜ì´ ì»¤ë°‹(commit)ë˜ëŠ” ìˆœê°„ ì—”í‹°í‹°ì™€ ìŠ¤ëƒ…ìƒ·ì„ ëª¨ë‘ ë¹„êµí•œë‹¤.
â†’ ë³€ê²½ëœ ê²ƒì´ ìˆì„ ê²½ìš° ì“°ê¸°ì§€ì—° SQL ì €ì¥ì†Œ ì— ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ë¥¼ ì €ì¥í•˜ê³  ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.
5. ì—”í‹°í‹° ì‚­ì œ //ì‚­ì œ ëŒ€ìƒ ì—”í‹°í‹° ì¡°íšŒ Member member = em.find(Member.class, &#34;memberA&#34;); em.remove(member);//ì—”í‹°í‹° ì‚­ì œ 
3. í”ŒëŸ¬ì‹œ(flush) : ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜(sync)
  í”ŒëŸ¬ì‹œ ë°œìƒ
 ë³€ê²½ ê°ì§€ ìˆ˜ì •ëœ ì—”í‹°í‹° ì“°ê¸°ì§€ì—° SQL ì €ì¥ì†Œì— ë“±ë¡ ì“°ê¸° ì§€ì—° SQLì €ì¥ì†Œì˜ ì¿¼ë¦¬ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ì†¡(ë“±ë¡, ìˆ˜ì •, ì‚­ì œ ì¿¼ë¦¬)    ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í”ŒëŸ¬ì‹œ í•˜ëŠ” ë°©ë²•]]></description>
</item></channel>
</rss>
